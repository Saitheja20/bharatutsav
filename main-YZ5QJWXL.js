var nR=Object.defineProperty,i$=Object.defineProperties;var s$=Object.getOwnPropertyDescriptors;var eR=Object.getOwnPropertySymbols;var o$=Object.prototype.hasOwnProperty,a$=Object.prototype.propertyIsEnumerable;var tR=(t,e,n)=>e in t?nR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,H=(t,e)=>{for(var n in e||={})o$.call(e,n)&&tR(t,n,e[n]);if(eR)for(var n of eR(e))a$.call(e,n)&&tR(t,n,e[n]);return t},be=(t,e)=>i$(t,s$(e));var c$=(t,e)=>{for(var n in e)nR(t,n,{get:e[n],enumerable:!0})};var pi=globalThis;function vr(t){return(pi.__Zone_symbol_prefix||"__zone_symbol__")+t}function l$(){let t=pi.performance;function e(oe){t&&t.mark&&t.mark(oe)}function n(oe,J){t&&t.measure&&t.measure(oe,J)}e("Zone");let r=(()=>{class oe{static __symbol__=vr;static assertZonePatched(){if(pi.Promise!==w.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let R=oe.current;for(;R.parent;)R=R.parent;return R}static get current(){return D.zone}static get currentTask(){return b}static __load_patch(R,N,se=!1){if(w.hasOwnProperty(R)){let he=pi[vr("forceDuplicateZoneCheck")]===!0;if(!se&&he)throw Error("Already loaded patch: "+R)}else if(!pi["__Zone_disable_"+R]){let he="Zone:"+R;e(he),w[R]=N(pi,oe,T),n(he,he)}}get parent(){return this._parent}get name(){return this._name}_parent;_name;_properties;_zoneDelegate;constructor(R,N){this._parent=R,this._name=N?N.name||"unnamed":"<root>",this._properties=N&&N.properties||{},this._zoneDelegate=new s(this,this._parent&&this._parent._zoneDelegate,N)}get(R){let N=this.getZoneWith(R);if(N)return N._properties[R]}getZoneWith(R){let N=this;for(;N;){if(N._properties.hasOwnProperty(R))return N;N=N._parent}return null}fork(R){if(!R)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,R)}wrap(R,N){if(typeof R!="function")throw new Error("Expecting function got: "+R);let se=this._zoneDelegate.intercept(this,R,N),he=this;return function(){return he.runGuarded(se,this,arguments,N)}}run(R,N,se,he){D={parent:D,zone:this};try{return this._zoneDelegate.invoke(this,R,N,se,he)}finally{D=D.parent}}runGuarded(R,N=null,se,he){D={parent:D,zone:this};try{try{return this._zoneDelegate.invoke(this,R,N,se,he)}catch(ke){if(this._zoneDelegate.handleError(this,ke))throw ke}}finally{D=D.parent}}runTask(R,N,se){if(R.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(R.zone||C).name+"; Execution: "+this.name+")");let he=R,{type:ke,data:{isPeriodic:ue=!1,isRefreshable:rn=!1}={}}=R;if(R.state===k&&(ke===E||ke===_))return;let Rt=R.state!=z;Rt&&he._transitionTo(z,F);let Gt=b;b=he,D={parent:D,zone:this};try{ke==_&&R.data&&!ue&&!rn&&(R.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,he,N,se)}catch(gn){if(this._zoneDelegate.handleError(this,gn))throw gn}}finally{let gn=R.state;if(gn!==k&&gn!==K)if(ke==E||ue||rn&&gn===O)Rt&&he._transitionTo(F,z,O);else{let Y=he._zoneDelegates;this._updateTaskCount(he,-1),Rt&&he._transitionTo(k,z,k),rn&&(he._zoneDelegates=Y)}D=D.parent,b=Gt}}scheduleTask(R){if(R.zone&&R.zone!==this){let se=this;for(;se;){if(se===R.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${R.zone.name}`);se=se.parent}}R._transitionTo(O,k);let N=[];R._zoneDelegates=N,R._zone=this;try{R=this._zoneDelegate.scheduleTask(this,R)}catch(se){throw R._transitionTo(K,O,k),this._zoneDelegate.handleError(this,se),se}return R._zoneDelegates===N&&this._updateTaskCount(R,1),R.state==O&&R._transitionTo(F,O),R}scheduleMicroTask(R,N,se,he){return this.scheduleTask(new o(I,R,N,se,he,void 0))}scheduleMacroTask(R,N,se,he,ke){return this.scheduleTask(new o(_,R,N,se,he,ke))}scheduleEventTask(R,N,se,he,ke){return this.scheduleTask(new o(E,R,N,se,he,ke))}cancelTask(R){if(R.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(R.zone||C).name+"; Execution: "+this.name+")");if(!(R.state!==F&&R.state!==z)){R._transitionTo(W,F,z);try{this._zoneDelegate.cancelTask(this,R)}catch(N){throw R._transitionTo(K,W),this._zoneDelegate.handleError(this,N),N}return this._updateTaskCount(R,-1),R._transitionTo(k,W),R.runCount=-1,R}}_updateTaskCount(R,N){let se=R._zoneDelegates;N==-1&&(R._zoneDelegates=null);for(let he=0;he<se.length;he++)se[he]._updateTaskCount(R.type,N)}}return oe})(),i={name:"",onHasTask:(oe,J,R,N)=>oe.hasTask(R,N),onScheduleTask:(oe,J,R,N)=>oe.scheduleTask(R,N),onInvokeTask:(oe,J,R,N,se,he)=>oe.invokeTask(R,N,se,he),onCancelTask:(oe,J,R,N)=>oe.cancelTask(R,N)};class s{get zone(){return this._zone}_zone;_taskCounts={microTask:0,macroTask:0,eventTask:0};_parentDelegate;_forkDlgt;_forkZS;_forkCurrZone;_interceptDlgt;_interceptZS;_interceptCurrZone;_invokeDlgt;_invokeZS;_invokeCurrZone;_handleErrorDlgt;_handleErrorZS;_handleErrorCurrZone;_scheduleTaskDlgt;_scheduleTaskZS;_scheduleTaskCurrZone;_invokeTaskDlgt;_invokeTaskZS;_invokeTaskCurrZone;_cancelTaskDlgt;_cancelTaskZS;_cancelTaskCurrZone;_hasTaskDlgt;_hasTaskDlgtOwner;_hasTaskZS;_hasTaskCurrZone;constructor(J,R,N){this._zone=J,this._parentDelegate=R,this._forkZS=N&&(N&&N.onFork?N:R._forkZS),this._forkDlgt=N&&(N.onFork?R:R._forkDlgt),this._forkCurrZone=N&&(N.onFork?this._zone:R._forkCurrZone),this._interceptZS=N&&(N.onIntercept?N:R._interceptZS),this._interceptDlgt=N&&(N.onIntercept?R:R._interceptDlgt),this._interceptCurrZone=N&&(N.onIntercept?this._zone:R._interceptCurrZone),this._invokeZS=N&&(N.onInvoke?N:R._invokeZS),this._invokeDlgt=N&&(N.onInvoke?R:R._invokeDlgt),this._invokeCurrZone=N&&(N.onInvoke?this._zone:R._invokeCurrZone),this._handleErrorZS=N&&(N.onHandleError?N:R._handleErrorZS),this._handleErrorDlgt=N&&(N.onHandleError?R:R._handleErrorDlgt),this._handleErrorCurrZone=N&&(N.onHandleError?this._zone:R._handleErrorCurrZone),this._scheduleTaskZS=N&&(N.onScheduleTask?N:R._scheduleTaskZS),this._scheduleTaskDlgt=N&&(N.onScheduleTask?R:R._scheduleTaskDlgt),this._scheduleTaskCurrZone=N&&(N.onScheduleTask?this._zone:R._scheduleTaskCurrZone),this._invokeTaskZS=N&&(N.onInvokeTask?N:R._invokeTaskZS),this._invokeTaskDlgt=N&&(N.onInvokeTask?R:R._invokeTaskDlgt),this._invokeTaskCurrZone=N&&(N.onInvokeTask?this._zone:R._invokeTaskCurrZone),this._cancelTaskZS=N&&(N.onCancelTask?N:R._cancelTaskZS),this._cancelTaskDlgt=N&&(N.onCancelTask?R:R._cancelTaskDlgt),this._cancelTaskCurrZone=N&&(N.onCancelTask?this._zone:R._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;let se=N&&N.onHasTask,he=R&&R._hasTaskZS;(se||he)&&(this._hasTaskZS=se?N:i,this._hasTaskDlgt=R,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,N.onScheduleTask||(this._scheduleTaskZS=i,this._scheduleTaskDlgt=R,this._scheduleTaskCurrZone=this._zone),N.onInvokeTask||(this._invokeTaskZS=i,this._invokeTaskDlgt=R,this._invokeTaskCurrZone=this._zone),N.onCancelTask||(this._cancelTaskZS=i,this._cancelTaskDlgt=R,this._cancelTaskCurrZone=this._zone))}fork(J,R){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,J,R):new r(J,R)}intercept(J,R,N){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,J,R,N):R}invoke(J,R,N,se,he){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,J,R,N,se,he):R.apply(N,se)}handleError(J,R){return this._handleErrorZS?this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,J,R):!0}scheduleTask(J,R){let N=R;if(this._scheduleTaskZS)this._hasTaskZS&&N._zoneDelegates.push(this._hasTaskDlgtOwner),N=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,J,R),N||(N=R);else if(R.scheduleFn)R.scheduleFn(R);else if(R.type==I)v(R);else throw new Error("Task is missing scheduleFn.");return N}invokeTask(J,R,N,se){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,J,R,N,se):R.callback.apply(N,se)}cancelTask(J,R){let N;if(this._cancelTaskZS)N=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,J,R);else{if(!R.cancelFn)throw Error("Task is not cancelable");N=R.cancelFn(R)}return N}hasTask(J,R){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,J,R)}catch(N){this.handleError(J,N)}}_updateTaskCount(J,R){let N=this._taskCounts,se=N[J],he=N[J]=se+R;if(he<0)throw new Error("More tasks executed then were scheduled.");if(se==0||he==0){let ke={microTask:N.microTask>0,macroTask:N.macroTask>0,eventTask:N.eventTask>0,change:J};this.hasTask(this._zone,ke)}}}class o{type;source;invoke;callback;data;scheduleFn;cancelFn;_zone=null;runCount=0;_zoneDelegates=null;_state="notScheduled";constructor(J,R,N,se,he,ke){if(this.type=J,this.source=R,this.data=se,this.scheduleFn=he,this.cancelFn=ke,!N)throw new Error("callback is not defined");this.callback=N;let ue=this;J===E&&se&&se.useG?this.invoke=o.invokeTask:this.invoke=function(){return o.invokeTask.call(pi,ue,this,arguments)}}static invokeTask(J,R,N){J||(J=this),He++;try{return J.runCount++,J.zone.runTask(J,R,N)}finally{He==1&&S(),He--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(k,O)}_transitionTo(J,R,N){if(this._state===R||this._state===N)this._state=J,J==k&&(this._zoneDelegates=null);else throw new Error(`${this.type} '${this.source}': can not transition to '${J}', expecting state '${R}'${N?" or '"+N+"'":""}, was '${this._state}'.`)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}let a=vr("setTimeout"),c=vr("Promise"),l=vr("then"),d=[],h=!1,p;function g(oe){if(p||pi[c]&&(p=pi[c].resolve(0)),p){let J=p[l];J||(J=p.then),J.call(p,oe)}else pi[a](oe,0)}function v(oe){He===0&&d.length===0&&g(S),oe&&d.push(oe)}function S(){if(!h){for(h=!0;d.length;){let oe=d;d=[];for(let J=0;J<oe.length;J++){let R=oe[J];try{R.zone.runTask(R,null,null)}catch(N){T.onUnhandledError(N)}}}T.microtaskDrainDone(),h=!1}}let C={name:"NO ZONE"},k="notScheduled",O="scheduling",F="scheduled",z="running",W="canceling",K="unknown",I="microTask",_="macroTask",E="eventTask",w={},T={symbol:vr,currentZoneFrame:()=>D,onUnhandledError:ge,microtaskDrainDone:ge,scheduleMicroTask:v,showUncaughtError:()=>!r[vr("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:ge,patchMethod:()=>ge,bindArguments:()=>[],patchThen:()=>ge,patchMacroTask:()=>ge,patchEventPrototype:()=>ge,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>ge,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>ge,wrapWithCurrentZone:()=>ge,filterProperties:()=>[],attachOriginToPatched:()=>ge,_redefineProperty:()=>ge,patchCallbacks:()=>ge,nativeScheduleMicroTask:g},D={parent:null,zone:new r(null,null)},b=null,He=0;function ge(){}return n("Zone","Zone"),r}function u$(){let t=globalThis,e=t[vr("forceDuplicateZoneCheck")]===!0;if(t.Zone&&(e||typeof t.Zone.__symbol__!="function"))throw new Error("Zone already loaded.");return t.Zone??=l$(),t.Zone}var pd=Object.getOwnPropertyDescriptor,kb=Object.defineProperty,Pb=Object.getPrototypeOf,d$=Object.create,h$=Array.prototype.slice,Ob="addEventListener",Fb="removeEventListener",xb=vr(Ob),Rb=vr(Fb),rs="true",is="false",gd=vr("");function Lb(t,e){return Zone.current.wrap(t,e)}function Vb(t,e,n,r,i){return Zone.current.scheduleMacroTask(t,e,n,r,i)}var Ye=vr,kp=typeof window<"u",md=kp?window:void 0,Yt=kp&&md||globalThis,f$="removeAttribute";function jb(t,e){for(let n=t.length-1;n>=0;n--)typeof t[n]=="function"&&(t[n]=Lb(t[n],e+"_"+n));return t}function p$(t,e){let n=t.constructor.name;for(let r=0;r<e.length;r++){let i=e[r],s=t[i];if(s){let o=pd(t,i);if(!lR(o))continue;t[i]=(a=>{let c=function(){return a.apply(this,jb(arguments,n+"."+i))};return os(c,a),c})(s)}}}function lR(t){return t?t.writable===!1?!1:!(typeof t.get=="function"&&typeof t.set>"u"):!0}var uR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Pp=!("nw"in Yt)&&typeof Yt.process<"u"&&Yt.process.toString()==="[object process]",Bb=!Pp&&!uR&&!!(kp&&md.HTMLElement),dR=typeof Yt.process<"u"&&Yt.process.toString()==="[object process]"&&!uR&&!!(kp&&md.HTMLElement),Np={},g$=Ye("enable_beforeunload"),rR=function(t){if(t=t||Yt.event,!t)return;let e=Np[t.type];e||(e=Np[t.type]=Ye("ON_PROPERTY"+t.type));let n=this||t.target||Yt,r=n[e],i;if(Bb&&n===md&&t.type==="error"){let s=t;i=r&&r.call(this,s.message,s.filename,s.lineno,s.colno,s.error),i===!0&&t.preventDefault()}else i=r&&r.apply(this,arguments),t.type==="beforeunload"&&Yt[g$]&&typeof i=="string"?t.returnValue=i:i!=null&&!i&&t.preventDefault();return i};function iR(t,e,n){let r=pd(t,e);if(!r&&n&&pd(n,e)&&(r={enumerable:!0,configurable:!0}),!r||!r.configurable)return;let i=Ye("on"+e+"patched");if(t.hasOwnProperty(i)&&t[i])return;delete r.writable,delete r.value;let s=r.get,o=r.set,a=e.slice(2),c=Np[a];c||(c=Np[a]=Ye("ON_PROPERTY"+a)),r.set=function(l){let d=this;if(!d&&t===Yt&&(d=Yt),!d)return;typeof d[c]=="function"&&d.removeEventListener(a,rR),o?.call(d,null),d[c]=l,typeof l=="function"&&d.addEventListener(a,rR,!1)},r.get=function(){let l=this;if(!l&&t===Yt&&(l=Yt),!l)return null;let d=l[c];if(d)return d;if(s){let h=s.call(this);if(h)return r.set.call(this,h),typeof l[f$]=="function"&&l.removeAttribute(e),h}return null},kb(t,e,r),t[i]=!0}function hR(t,e,n){if(e)for(let r=0;r<e.length;r++)iR(t,"on"+e[r],n);else{let r=[];for(let i in t)i.slice(0,2)=="on"&&r.push(i);for(let i=0;i<r.length;i++)iR(t,r[i],n)}}var Hr=Ye("originalInstance");function fd(t){let e=Yt[t];if(!e)return;Yt[Ye(t)]=e,Yt[t]=function(){let i=jb(arguments,t);switch(i.length){case 0:this[Hr]=new e;break;case 1:this[Hr]=new e(i[0]);break;case 2:this[Hr]=new e(i[0],i[1]);break;case 3:this[Hr]=new e(i[0],i[1],i[2]);break;case 4:this[Hr]=new e(i[0],i[1],i[2],i[3]);break;default:throw new Error("Arg list too long.")}},os(Yt[t],e);let n=new e(function(){}),r;for(r in n)t==="XMLHttpRequest"&&r==="responseBlob"||(function(i){typeof n[i]=="function"?Yt[t].prototype[i]=function(){return this[Hr][i].apply(this[Hr],arguments)}:kb(Yt[t].prototype,i,{set:function(s){typeof s=="function"?(this[Hr][i]=Lb(s,t+"."+i),os(this[Hr][i],s)):this[Hr][i]=s},get:function(){return this[Hr][i]}})})(r);for(r in e)r!=="prototype"&&e.hasOwnProperty(r)&&(Yt[t][r]=e[r])}function ss(t,e,n){let r=t;for(;r&&!r.hasOwnProperty(e);)r=Pb(r);!r&&t[e]&&(r=t);let i=Ye(e),s=null;if(r&&(!(s=r[i])||!r.hasOwnProperty(i))){s=r[i]=r[e];let o=r&&pd(r,e);if(lR(o)){let a=n(s,i,e);r[e]=function(){return a(this,arguments)},os(r[e],s)}}return s}function m$(t,e,n){let r=null;function i(s){let o=s.data;return o.args[o.cbIdx]=function(){s.invoke.apply(this,arguments)},r.apply(o.target,o.args),s}r=ss(t,e,s=>function(o,a){let c=n(o,a);return c.cbIdx>=0&&typeof a[c.cbIdx]=="function"?Vb(c.name,a[c.cbIdx],c,i):s.apply(o,a)})}function os(t,e){t[Ye("OriginalDelegate")]=e}var sR=!1,Mb=!1;function y$(){if(sR)return Mb;sR=!0;try{let t=md.navigator.userAgent;(t.indexOf("MSIE ")!==-1||t.indexOf("Trident/")!==-1||t.indexOf("Edge/")!==-1)&&(Mb=!0)}catch{}return Mb}function oR(t){return typeof t=="function"}function aR(t){return typeof t=="number"}var _$={useG:!0},br={},fR={},pR=new RegExp("^"+gd+"(\\w+)(true|false)$"),gR=Ye("propagationStopped");function mR(t,e){let n=(e?e(t):t)+is,r=(e?e(t):t)+rs,i=gd+n,s=gd+r;br[t]={},br[t][is]=i,br[t][rs]=s}function v$(t,e,n,r){let i=r&&r.add||Ob,s=r&&r.rm||Fb,o=r&&r.listeners||"eventListeners",a=r&&r.rmAll||"removeAllListeners",c=Ye(i),l="."+i+":",d="prependListener",h="."+d+":",p=function(O,F,z){if(O.isRemoved)return;let W=O.callback;typeof W=="object"&&W.handleEvent&&(O.callback=_=>W.handleEvent(_),O.originalDelegate=W);let K;try{O.invoke(O,F,[z])}catch(_){K=_}let I=O.options;if(I&&typeof I=="object"&&I.once){let _=O.originalDelegate?O.originalDelegate:O.callback;F[s].call(F,z.type,_,I)}return K};function g(O,F,z){if(F=F||t.event,!F)return;let W=O||F.target||t,K=W[br[F.type][z?rs:is]];if(K){let I=[];if(K.length===1){let _=p(K[0],W,F);_&&I.push(_)}else{let _=K.slice();for(let E=0;E<_.length&&!(F&&F[gR]===!0);E++){let w=p(_[E],W,F);w&&I.push(w)}}if(I.length===1)throw I[0];for(let _=0;_<I.length;_++){let E=I[_];e.nativeScheduleMicroTask(()=>{throw E})}}}let v=function(O){return g(this,O,!1)},S=function(O){return g(this,O,!0)};function C(O,F){if(!O)return!1;let z=!0;F&&F.useG!==void 0&&(z=F.useG);let W=F&&F.vh,K=!0;F&&F.chkDup!==void 0&&(K=F.chkDup);let I=!1;F&&F.rt!==void 0&&(I=F.rt);let _=O;for(;_&&!_.hasOwnProperty(i);)_=Pb(_);if(!_&&O[i]&&(_=O),!_||_[c])return!1;let E=F&&F.eventNameToString,w={},T=_[c]=_[i],D=_[Ye(s)]=_[s],b=_[Ye(o)]=_[o],He=_[Ye(a)]=_[a],ge;F&&F.prepend&&(ge=_[Ye(F.prepend)]=_[F.prepend]);function oe(L,q){return q?typeof L=="boolean"?{capture:L,passive:!0}:L?typeof L=="object"&&L.passive!==!1?be(H({},L),{passive:!0}):L:{passive:!0}:L}let J=function(L){if(!w.isExisting)return T.call(w.target,w.eventName,w.capture?S:v,w.options)},R=function(L){if(!L.isRemoved){let q=br[L.eventName],de;q&&(de=q[L.capture?rs:is]);let ye=de&&L.target[de];if(ye){for(let ce=0;ce<ye.length;ce++)if(ye[ce]===L){ye.splice(ce,1),L.isRemoved=!0,L.removeAbortListener&&(L.removeAbortListener(),L.removeAbortListener=null),ye.length===0&&(L.allRemoved=!0,L.target[de]=null);break}}}if(L.allRemoved)return D.call(L.target,L.eventName,L.capture?S:v,L.options)},N=function(L){return T.call(w.target,w.eventName,L.invoke,w.options)},se=function(L){return ge.call(w.target,w.eventName,L.invoke,w.options)},he=function(L){return D.call(L.target,L.eventName,L.invoke,L.options)},ke=z?J:N,ue=z?R:he,rn=function(L,q){let de=typeof q;return de==="function"&&L.callback===q||de==="object"&&L.originalDelegate===q},Rt=F?.diff||rn,Gt=Zone[Ye("UNPATCHED_EVENTS")],gn=t[Ye("PASSIVE_EVENTS")];function Y(L){if(typeof L=="object"&&L!==null){let q=H({},L);return L.signal&&(q.signal=L.signal),q}return L}let G=function(L,q,de,ye,ce=!1,we=!1){return function(){let Ce=this||t,Se=arguments[0];F&&F.transferEventName&&(Se=F.transferEventName(Se));let nt=arguments[1];if(!nt)return L.apply(this,arguments);if(Pp&&Se==="uncaughtException")return L.apply(this,arguments);let Je=!1;if(typeof nt!="function"){if(!nt.handleEvent)return L.apply(this,arguments);Je=!0}if(W&&!W(L,nt,Ce,arguments))return;let jr=!!gn&&gn.indexOf(Se)!==-1,zn=Y(oe(arguments[2],jr)),es=zn?.signal;if(es?.aborted)return;if(Gt){for(let sr=0;sr<Gt.length;sr++)if(Se===Gt[sr])return jr?L.call(Ce,Se,nt,zn):L.apply(this,arguments)}let Zu=zn?typeof zn=="boolean"?!0:zn.capture:!1,Rc=zn&&typeof zn=="object"?zn.once:!1,Xu=Zone.current,oa=br[Se];oa||(mR(Se,E),oa=br[Se]);let Kt=oa[Zu?rs:is],bt=Ce[Kt],aa=!1;if(bt){if(aa=!0,K){for(let sr=0;sr<bt.length;sr++)if(Rt(bt[sr],nt))return}}else bt=Ce[Kt]=[];let ca,Ju=Ce.constructor.name,mp=fR[Ju];mp&&(ca=mp[Se]),ca||(ca=Ju+q+(E?E(Se):Se)),w.options=zn,Rc&&(w.options.once=!1),w.target=Ce,w.capture=Zu,w.eventName=Se,w.isExisting=aa;let Br=z?_$:void 0;Br&&(Br.taskData=w),es&&(w.options.signal=void 0);let Wn=Xu.scheduleEventTask(ca,nt,Br,de,ye);if(es){w.options.signal=es;let sr=()=>Wn.zone.cancelTask(Wn);L.call(es,"abort",sr,{once:!0}),Wn.removeAbortListener=()=>es.removeEventListener("abort",sr)}if(w.target=null,Br&&(Br.taskData=null),Rc&&(w.options.once=!0),typeof Wn.options!="boolean"&&(Wn.options=zn),Wn.target=Ce,Wn.capture=Zu,Wn.eventName=Se,Je&&(Wn.originalDelegate=nt),we?bt.unshift(Wn):bt.push(Wn),ce)return Ce}};return _[i]=G(T,l,ke,ue,I),ge&&(_[d]=G(ge,h,se,ue,I,!0)),_[s]=function(){let L=this||t,q=arguments[0];F&&F.transferEventName&&(q=F.transferEventName(q));let de=arguments[2],ye=de?typeof de=="boolean"?!0:de.capture:!1,ce=arguments[1];if(!ce)return D.apply(this,arguments);if(W&&!W(D,ce,L,arguments))return;let we=br[q],Ce;we&&(Ce=we[ye?rs:is]);let Se=Ce&&L[Ce];if(Se)for(let nt=0;nt<Se.length;nt++){let Je=Se[nt];if(Rt(Je,ce)){if(Se.splice(nt,1),Je.isRemoved=!0,Se.length===0&&(Je.allRemoved=!0,L[Ce]=null,!ye&&typeof q=="string")){let jr=gd+"ON_PROPERTY"+q;L[jr]=null}return Je.zone.cancelTask(Je),I?L:void 0}}return D.apply(this,arguments)},_[o]=function(){let L=this||t,q=arguments[0];F&&F.transferEventName&&(q=F.transferEventName(q));let de=[],ye=yR(L,E?E(q):q);for(let ce=0;ce<ye.length;ce++){let we=ye[ce],Ce=we.originalDelegate?we.originalDelegate:we.callback;de.push(Ce)}return de},_[a]=function(){let L=this||t,q=arguments[0];if(q){F&&F.transferEventName&&(q=F.transferEventName(q));let de=br[q];if(de){let ye=de[is],ce=de[rs],we=L[ye],Ce=L[ce];if(we){let Se=we.slice();for(let nt=0;nt<Se.length;nt++){let Je=Se[nt],jr=Je.originalDelegate?Je.originalDelegate:Je.callback;this[s].call(this,q,jr,Je.options)}}if(Ce){let Se=Ce.slice();for(let nt=0;nt<Se.length;nt++){let Je=Se[nt],jr=Je.originalDelegate?Je.originalDelegate:Je.callback;this[s].call(this,q,jr,Je.options)}}}}else{let de=Object.keys(L);for(let ye=0;ye<de.length;ye++){let ce=de[ye],we=pR.exec(ce),Ce=we&&we[1];Ce&&Ce!=="removeListener"&&this[a].call(this,Ce)}this[a].call(this,"removeListener")}if(I)return this},os(_[i],T),os(_[s],D),He&&os(_[a],He),b&&os(_[o],b),!0}let k=[];for(let O=0;O<n.length;O++)k[O]=C(n[O],r);return k}function yR(t,e){if(!e){let s=[];for(let o in t){let a=pR.exec(o),c=a&&a[1];if(c&&(!e||c===e)){let l=t[o];if(l)for(let d=0;d<l.length;d++)s.push(l[d])}}return s}let n=br[e];n||(mR(e),n=br[e]);let r=t[n[is]],i=t[n[rs]];return r?i?r.concat(i):r.slice():i?i.slice():[]}function b$(t,e){let n=t.Event;n&&n.prototype&&e.patchMethod(n.prototype,"stopImmediatePropagation",r=>function(i,s){i[gR]=!0,r&&r.apply(i,s)})}function E$(t,e){e.patchMethod(t,"queueMicrotask",n=>function(r,i){Zone.current.scheduleMicroTask("queueMicrotask",i[0])})}var Mp=Ye("zoneTask");function Oc(t,e,n,r){let i=null,s=null;e+=r,n+=r;let o={};function a(l){let d=l.data;d.args[0]=function(){return l.invoke.apply(this,arguments)};let h=i.apply(t,d.args);return aR(h)?d.handleId=h:(d.handle=h,d.isRefreshable=oR(h.refresh)),l}function c(l){let{handle:d,handleId:h}=l.data;return s.call(t,d??h)}i=ss(t,e,l=>function(d,h){if(oR(h[0])){let p={isRefreshable:!1,isPeriodic:r==="Interval",delay:r==="Timeout"||r==="Interval"?h[1]||0:void 0,args:h},g=h[0];h[0]=function(){try{return g.apply(this,arguments)}finally{let{handle:z,handleId:W,isPeriodic:K,isRefreshable:I}=p;!K&&!I&&(W?delete o[W]:z&&(z[Mp]=null))}};let v=Vb(e,h[0],p,a,c);if(!v)return v;let{handleId:S,handle:C,isRefreshable:k,isPeriodic:O}=v.data;if(S)o[S]=v;else if(C&&(C[Mp]=v,k&&!O)){let F=C.refresh;C.refresh=function(){let{zone:z,state:W}=v;return W==="notScheduled"?(v._state="scheduled",z._updateTaskCount(v,1)):W==="running"&&(v._state="scheduling"),F.call(this)}}return C??S??v}else return l.apply(t,h)}),s=ss(t,n,l=>function(d,h){let p=h[0],g;aR(p)?(g=o[p],delete o[p]):(g=p?.[Mp],g?p[Mp]=null:g=p),g?.type?g.cancelFn&&g.zone.cancelTask(g):l.apply(t,h)})}function w$(t,e){let{isBrowser:n,isMix:r}=e.getGlobalObjects();if(!n&&!r||!t.customElements||!("customElements"in t))return;let i=["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"];e.patchCallbacks(e,t.customElements,"customElements","define",i)}function I$(t,e){if(Zone[e.symbol("patchEventTarget")])return;let{eventNames:n,zoneSymbolEventNames:r,TRUE_STR:i,FALSE_STR:s,ZONE_SYMBOL_PREFIX:o}=e.getGlobalObjects();for(let c=0;c<n.length;c++){let l=n[c],d=l+s,h=l+i,p=o+d,g=o+h;r[l]={},r[l][s]=p,r[l][i]=g}let a=t.EventTarget;if(!(!a||!a.prototype))return e.patchEventTarget(t,e,[a&&a.prototype]),!0}function T$(t,e){e.patchEventPrototype(t,e)}function _R(t,e,n){if(!n||n.length===0)return e;let r=n.filter(s=>s.target===t);if(r.length===0)return e;let i=r[0].ignoreProperties;return e.filter(s=>i.indexOf(s)===-1)}function cR(t,e,n,r){if(!t)return;let i=_R(t,e,n);hR(t,i,r)}function Nb(t){return Object.getOwnPropertyNames(t).filter(e=>e.startsWith("on")&&e.length>2).map(e=>e.substring(2))}function D$(t,e){if(Pp&&!dR||Zone[t.symbol("patchEvents")])return;let n=e.__Zone_ignore_on_properties,r=[];if(Bb){let i=window;r=r.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);let s=[];cR(i,Nb(i),n&&n.concat(s),Pb(i))}r=r.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let i=0;i<r.length;i++){let s=e[r[i]];s?.prototype&&cR(s.prototype,Nb(s.prototype),n)}}function C$(t){t.__load_patch("legacy",e=>{let n=e[t.__symbol__("legacyPatch")];n&&n()}),t.__load_patch("timers",e=>{let r="clear";Oc(e,"set",r,"Timeout"),Oc(e,"set",r,"Interval"),Oc(e,"set",r,"Immediate")}),t.__load_patch("requestAnimationFrame",e=>{Oc(e,"request","cancel","AnimationFrame"),Oc(e,"mozRequest","mozCancel","AnimationFrame"),Oc(e,"webkitRequest","webkitCancel","AnimationFrame")}),t.__load_patch("blocking",(e,n)=>{let r=["alert","prompt","confirm"];for(let i=0;i<r.length;i++){let s=r[i];ss(e,s,(o,a,c)=>function(l,d){return n.current.run(o,e,d,c)})}}),t.__load_patch("EventTarget",(e,n,r)=>{T$(e,r),I$(e,r);let i=e.XMLHttpRequestEventTarget;i&&i.prototype&&r.patchEventTarget(e,r,[i.prototype])}),t.__load_patch("MutationObserver",(e,n,r)=>{fd("MutationObserver"),fd("WebKitMutationObserver")}),t.__load_patch("IntersectionObserver",(e,n,r)=>{fd("IntersectionObserver")}),t.__load_patch("FileReader",(e,n,r)=>{fd("FileReader")}),t.__load_patch("on_property",(e,n,r)=>{D$(r,e)}),t.__load_patch("customElements",(e,n,r)=>{w$(e,r)}),t.__load_patch("XHR",(e,n)=>{l(e);let r=Ye("xhrTask"),i=Ye("xhrSync"),s=Ye("xhrListener"),o=Ye("xhrScheduled"),a=Ye("xhrURL"),c=Ye("xhrErrorBeforeScheduled");function l(d){let h=d.XMLHttpRequest;if(!h)return;let p=h.prototype;function g(T){return T[r]}let v=p[xb],S=p[Rb];if(!v){let T=d.XMLHttpRequestEventTarget;if(T){let D=T.prototype;v=D[xb],S=D[Rb]}}let C="readystatechange",k="scheduled";function O(T){let D=T.data,b=D.target;b[o]=!1,b[c]=!1;let He=b[s];v||(v=b[xb],S=b[Rb]),He&&S.call(b,C,He);let ge=b[s]=()=>{if(b.readyState===b.DONE)if(!D.aborted&&b[o]&&T.state===k){let J=b[n.__symbol__("loadfalse")];if(b.status!==0&&J&&J.length>0){let R=T.invoke;T.invoke=function(){let N=b[n.__symbol__("loadfalse")];for(let se=0;se<N.length;se++)N[se]===T&&N.splice(se,1);!D.aborted&&T.state===k&&R.call(T)},J.push(T)}else T.invoke()}else!D.aborted&&b[o]===!1&&(b[c]=!0)};return v.call(b,C,ge),b[r]||(b[r]=T),E.apply(b,D.args),b[o]=!0,T}function F(){}function z(T){let D=T.data;return D.aborted=!0,w.apply(D.target,D.args)}let W=ss(p,"open",()=>function(T,D){return T[i]=D[2]==!1,T[a]=D[1],W.apply(T,D)}),K="XMLHttpRequest.send",I=Ye("fetchTaskAborting"),_=Ye("fetchTaskScheduling"),E=ss(p,"send",()=>function(T,D){if(n.current[_]===!0||T[i])return E.apply(T,D);{let b={target:T,url:T[a],isPeriodic:!1,args:D,aborted:!1},He=Vb(K,F,b,O,z);T&&T[c]===!0&&!b.aborted&&He.state===k&&He.invoke()}}),w=ss(p,"abort",()=>function(T,D){let b=g(T);if(b&&typeof b.type=="string"){if(b.cancelFn==null||b.data&&b.data.aborted)return;b.zone.cancelTask(b)}else if(n.current[I]===!0)return w.apply(T,D)})}}),t.__load_patch("geolocation",e=>{e.navigator&&e.navigator.geolocation&&p$(e.navigator.geolocation,["getCurrentPosition","watchPosition"])}),t.__load_patch("PromiseRejectionEvent",(e,n)=>{function r(i){return function(s){yR(e,i).forEach(a=>{let c=e.PromiseRejectionEvent;if(c){let l=new c(i,{promise:s.promise,reason:s.rejection});a.invoke(l)}})}}e.PromiseRejectionEvent&&(n[Ye("unhandledPromiseRejectionHandler")]=r("unhandledrejection"),n[Ye("rejectionHandledHandler")]=r("rejectionhandled"))}),t.__load_patch("queueMicrotask",(e,n,r)=>{E$(e,r)})}function S$(t){t.__load_patch("ZoneAwarePromise",(e,n,r)=>{let i=Object.getOwnPropertyDescriptor,s=Object.defineProperty;function o(Y){if(Y&&Y.toString===Object.prototype.toString){let G=Y.constructor&&Y.constructor.name;return(G||"")+": "+JSON.stringify(Y)}return Y?Y.toString():Object.prototype.toString.call(Y)}let a=r.symbol,c=[],l=e[a("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")]!==!1,d=a("Promise"),h=a("then"),p="__creationTrace__";r.onUnhandledError=Y=>{if(r.showUncaughtError()){let G=Y&&Y.rejection;G?console.error("Unhandled Promise rejection:",G instanceof Error?G.message:G,"; Zone:",Y.zone.name,"; Task:",Y.task&&Y.task.source,"; Value:",G,G instanceof Error?G.stack:void 0):console.error(Y)}},r.microtaskDrainDone=()=>{for(;c.length;){let Y=c.shift();try{Y.zone.runGuarded(()=>{throw Y.throwOriginal?Y.rejection:Y})}catch(G){v(G)}}};let g=a("unhandledPromiseRejectionHandler");function v(Y){r.onUnhandledError(Y);try{let G=n[g];typeof G=="function"&&G.call(this,Y)}catch{}}function S(Y){return Y&&typeof Y.then=="function"}function C(Y){return Y}function k(Y){return ue.reject(Y)}let O=a("state"),F=a("value"),z=a("finally"),W=a("parentPromiseValue"),K=a("parentPromiseState"),I="Promise.then",_=null,E=!0,w=!1,T=0;function D(Y,G){return L=>{try{oe(Y,G,L)}catch(q){oe(Y,!1,q)}}}let b=function(){let Y=!1;return function(L){return function(){Y||(Y=!0,L.apply(null,arguments))}}},He="Promise resolved with itself",ge=a("currentTaskTrace");function oe(Y,G,L){let q=b();if(Y===L)throw new TypeError(He);if(Y[O]===_){let de=null;try{(typeof L=="object"||typeof L=="function")&&(de=L&&L.then)}catch(ye){return q(()=>{oe(Y,!1,ye)})(),Y}if(G!==w&&L instanceof ue&&L.hasOwnProperty(O)&&L.hasOwnProperty(F)&&L[O]!==_)R(L),oe(Y,L[O],L[F]);else if(G!==w&&typeof de=="function")try{de.call(L,q(D(Y,G)),q(D(Y,!1)))}catch(ye){q(()=>{oe(Y,!1,ye)})()}else{Y[O]=G;let ye=Y[F];if(Y[F]=L,Y[z]===z&&G===E&&(Y[O]=Y[K],Y[F]=Y[W]),G===w&&L instanceof Error){let ce=n.currentTask&&n.currentTask.data&&n.currentTask.data[p];ce&&s(L,ge,{configurable:!0,enumerable:!1,writable:!0,value:ce})}for(let ce=0;ce<ye.length;)N(Y,ye[ce++],ye[ce++],ye[ce++],ye[ce++]);if(ye.length==0&&G==w){Y[O]=T;let ce=L;try{throw new Error("Uncaught (in promise): "+o(L)+(L&&L.stack?`
`+L.stack:""))}catch(we){ce=we}l&&(ce.throwOriginal=!0),ce.rejection=L,ce.promise=Y,ce.zone=n.current,ce.task=n.currentTask,c.push(ce),r.scheduleMicroTask()}}}return Y}let J=a("rejectionHandledHandler");function R(Y){if(Y[O]===T){try{let G=n[J];G&&typeof G=="function"&&G.call(this,{rejection:Y[F],promise:Y})}catch{}Y[O]=w;for(let G=0;G<c.length;G++)Y===c[G].promise&&c.splice(G,1)}}function N(Y,G,L,q,de){R(Y);let ye=Y[O],ce=ye?typeof q=="function"?q:C:typeof de=="function"?de:k;G.scheduleMicroTask(I,()=>{try{let we=Y[F],Ce=!!L&&z===L[z];Ce&&(L[W]=we,L[K]=ye);let Se=G.run(ce,void 0,Ce&&ce!==k&&ce!==C?[]:[we]);oe(L,!0,Se)}catch(we){oe(L,!1,we)}},L)}let se="function ZoneAwarePromise() { [native code] }",he=function(){},ke=e.AggregateError;class ue{static toString(){return se}static resolve(G){return G instanceof ue?G:oe(new this(null),E,G)}static reject(G){return oe(new this(null),w,G)}static withResolvers(){let G={};return G.promise=new ue((L,q)=>{G.resolve=L,G.reject=q}),G}static any(G){if(!G||typeof G[Symbol.iterator]!="function")return Promise.reject(new ke([],"All promises were rejected"));let L=[],q=0;try{for(let ce of G)q++,L.push(ue.resolve(ce))}catch{return Promise.reject(new ke([],"All promises were rejected"))}if(q===0)return Promise.reject(new ke([],"All promises were rejected"));let de=!1,ye=[];return new ue((ce,we)=>{for(let Ce=0;Ce<L.length;Ce++)L[Ce].then(Se=>{de||(de=!0,ce(Se))},Se=>{ye.push(Se),q--,q===0&&(de=!0,we(new ke(ye,"All promises were rejected")))})})}static race(G){let L,q,de=new this((we,Ce)=>{L=we,q=Ce});function ye(we){L(we)}function ce(we){q(we)}for(let we of G)S(we)||(we=this.resolve(we)),we.then(ye,ce);return de}static all(G){return ue.allWithCallback(G)}static allSettled(G){return(this&&this.prototype instanceof ue?this:ue).allWithCallback(G,{thenCallback:q=>({status:"fulfilled",value:q}),errorCallback:q=>({status:"rejected",reason:q})})}static allWithCallback(G,L){let q,de,ye=new this((Se,nt)=>{q=Se,de=nt}),ce=2,we=0,Ce=[];for(let Se of G){S(Se)||(Se=this.resolve(Se));let nt=we;try{Se.then(Je=>{Ce[nt]=L?L.thenCallback(Je):Je,ce--,ce===0&&q(Ce)},Je=>{L?(Ce[nt]=L.errorCallback(Je),ce--,ce===0&&q(Ce)):de(Je)})}catch(Je){de(Je)}ce++,we++}return ce-=2,ce===0&&q(Ce),ye}constructor(G){let L=this;if(!(L instanceof ue))throw new Error("Must be an instanceof Promise.");L[O]=_,L[F]=[];try{let q=b();G&&G(q(D(L,E)),q(D(L,w)))}catch(q){oe(L,!1,q)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return ue}then(G,L){let q=this.constructor?.[Symbol.species];(!q||typeof q!="function")&&(q=this.constructor||ue);let de=new q(he),ye=n.current;return this[O]==_?this[F].push(ye,de,G,L):N(this,ye,de,G,L),de}catch(G){return this.then(null,G)}finally(G){let L=this.constructor?.[Symbol.species];(!L||typeof L!="function")&&(L=ue);let q=new L(he);q[z]=z;let de=n.current;return this[O]==_?this[F].push(de,q,G,G):N(this,de,q,G,G),q}}ue.resolve=ue.resolve,ue.reject=ue.reject,ue.race=ue.race,ue.all=ue.all;let rn=e[d]=e.Promise;e.Promise=ue;let Rt=a("thenPatched");function Gt(Y){let G=Y.prototype,L=i(G,"then");if(L&&(L.writable===!1||!L.configurable))return;let q=G.then;G[h]=q,Y.prototype.then=function(de,ye){return new ue((we,Ce)=>{q.call(this,we,Ce)}).then(de,ye)},Y[Rt]=!0}r.patchThen=Gt;function gn(Y){return function(G,L){let q=Y.apply(G,L);if(q instanceof ue)return q;let de=q.constructor;return de[Rt]||Gt(de),q}}return rn&&(Gt(rn),ss(e,"fetch",Y=>gn(Y))),Promise[n.__symbol__("uncaughtPromiseErrors")]=c,ue})}function A$(t){t.__load_patch("toString",e=>{let n=Function.prototype.toString,r=Ye("OriginalDelegate"),i=Ye("Promise"),s=Ye("Error"),o=function(){if(typeof this=="function"){let d=this[r];if(d)return typeof d=="function"?n.call(d):Object.prototype.toString.call(d);if(this===Promise){let h=e[i];if(h)return n.call(h)}if(this===Error){let h=e[s];if(h)return n.call(h)}}return n.call(this)};o[r]=n,Function.prototype.toString=o;let a=Object.prototype.toString,c="[object Promise]";Object.prototype.toString=function(){return typeof Promise=="function"&&this instanceof Promise?c:a.call(this)}})}function x$(t,e,n,r,i){let s=Zone.__symbol__(r);if(e[s])return;let o=e[s]=e[r];e[r]=function(a,c,l){return c&&c.prototype&&i.forEach(function(d){let h=`${n}.${r}::`+d,p=c.prototype;try{if(p.hasOwnProperty(d)){let g=t.ObjectGetOwnPropertyDescriptor(p,d);g&&g.value?(g.value=t.wrapWithCurrentZone(g.value,h),t._redefineProperty(c.prototype,d,g)):p[d]&&(p[d]=t.wrapWithCurrentZone(p[d],h))}else p[d]&&(p[d]=t.wrapWithCurrentZone(p[d],h))}catch{}}),o.call(e,a,c,l)},t.attachOriginToPatched(e[r],o)}function R$(t){t.__load_patch("util",(e,n,r)=>{let i=Nb(e);r.patchOnProperties=hR,r.patchMethod=ss,r.bindArguments=jb,r.patchMacroTask=m$;let s=n.__symbol__("BLACK_LISTED_EVENTS"),o=n.__symbol__("UNPATCHED_EVENTS");e[o]&&(e[s]=e[o]),e[s]&&(n[s]=n[o]=e[s]),r.patchEventPrototype=b$,r.patchEventTarget=v$,r.isIEOrEdge=y$,r.ObjectDefineProperty=kb,r.ObjectGetOwnPropertyDescriptor=pd,r.ObjectCreate=d$,r.ArraySlice=h$,r.patchClass=fd,r.wrapWithCurrentZone=Lb,r.filterProperties=_R,r.attachOriginToPatched=os,r._redefineProperty=Object.defineProperty,r.patchCallbacks=x$,r.getGlobalObjects=()=>({globalSources:fR,zoneSymbolEventNames:br,eventNames:i,isBrowser:Bb,isMix:dR,isNode:Pp,TRUE_STR:rs,FALSE_STR:is,ZONE_SYMBOL_PREFIX:gd,ADD_EVENT_LISTENER_STR:Ob,REMOVE_EVENT_LISTENER_STR:Fb})})}function M$(t){S$(t),A$(t),R$(t)}var vR=u$();M$(vR);C$(vR);var Ub;function Op(){return Ub}function gi(t){let e=Ub;return Ub=t,e}var bR=Symbol("NotFound");function Fc(t){return t===bR||t?.name==="\u0275NotFound"}function Bp(t,e){return Object.is(t,e)}var Dn=null,Fp=!1,Hb=1,N$=null,Cn=Symbol("SIGNAL");function xe(t){let e=Dn;return Dn=t,e}function Up(){return Dn}var Lc={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Vc(t){if(Fp)throw new Error("");if(Dn===null)return;Dn.consumerOnSignalRead(t);let e=Dn.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=Dn.recomputing;if(r&&(n=e!==void 0?e.nextProducer:Dn.producers,n!==void 0&&n.producer===t)){Dn.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===Dn&&(!r||P$(i,Dn)))return;let s=Bc(Dn),o={producer:t,consumer:Dn,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};Dn.producersTail=o,e!==void 0?e.nextProducer=o:Dn.producers=o,s&&wR(t,o)}function ER(){Hb++}function Hp(t){if(!(Bc(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Hb)){if(!t.producerMustRecompute(t)&&!vd(t)){jp(t);return}t.producerRecomputeValue(t),jp(t)}}function $b(t){if(t.consumers===void 0)return;let e=Fp;Fp=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||k$(r)}}finally{Fp=e}}function zb(){return Dn?.consumerAllowSignalWrites!==!1}function k$(t){t.dirty=!0,$b(t),t.consumerMarkedDirty?.(t)}function jp(t){t.dirty=!1,t.lastCleanEpoch=Hb}function jc(t){return t&&(t.producersTail=void 0,t.recomputing=!0),xe(t)}function _d(t,e){if(xe(e),!t)return;t.recomputing=!1;let n=t.producersTail,r=n!==void 0?n.nextProducer:t.producers;if(r!==void 0){if(Bc(t))do r=Wb(r);while(r!==void 0);n!==void 0?n.nextProducer=void 0:t.producers=void 0}}function vd(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(Hp(n),r!==n.version))return!0}return!1}function bd(t){if(Bc(t)){let e=t.producers;for(;e!==void 0;)e=Wb(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function wR(t,e){let n=t.consumersTail,r=Bc(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)wR(i.producer,i)}function Wb(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Bc(e)){let s=e.producers;for(;s!==void 0;)s=Wb(s)}return n}function Bc(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function $p(t){N$?.(t)}function P$(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function zp(t,e){let n=Object.create(O$);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(Hp(n),Vc(n),n.value===yd)throw n.error;return n.value};return r[Cn]=n,$p(n),r}var Lp=Symbol("UNSET"),Vp=Symbol("COMPUTING"),yd=Symbol("ERRORED"),O$=be(H({},Lc),{value:Lp,dirty:!0,error:null,equal:Bp,kind:"computed",producerMustRecompute(t){return t.value===Lp||t.value===Vp},producerRecomputeValue(t){if(t.value===Vp)throw new Error("");let e=t.value;t.value=Vp;let n=jc(t),r,i=!1;try{r=t.computation(),xe(null),i=e!==Lp&&e!==yd&&r!==yd&&t.equal(e,r)}catch(s){r=yd,t.error=s}finally{_d(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function F$(){throw new Error}var IR=F$;function TR(t){IR(t)}function qb(t){IR=t}var L$=null;function Gb(t,e){let n=Object.create(Wp);n.value=t,e!==void 0&&(n.equal=e);let r=()=>DR(n);return r[Cn]=n,$p(n),[r,o=>Uc(n,o),o=>Kb(n,o)]}function DR(t){return Vc(t),t.value}function Uc(t,e){zb()||TR(t),t.equal(t.value,e)||(t.value=e,V$(t))}function Kb(t,e){zb()||TR(t),Uc(t,e(t.value))}var Wp=be(H({},Lc),{equal:Bp,value:void 0,kind:"signal"});function V$(t){t.version++,ER(),$b(t),L$?.(t)}function Te(t){return typeof t=="function"}function Hc(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var qp=Hc(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function fa(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var wt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Te(r))try{r()}catch(s){e=s instanceof qp?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{CR(s)}catch(o){e=e??[],o instanceof qp?e=[...e,...o.errors]:e.push(o)}}if(e)throw new qp(e)}}add(e){var n;if(e&&e!==this)if(this.closed)CR(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&fa(n,e)}remove(e){let{_finalizers:n}=this;n&&fa(n,e),e instanceof t&&e._removeParent(this)}};wt.EMPTY=(()=>{let t=new wt;return t.closed=!0,t})();var Yb=wt.EMPTY;function Gp(t){return t instanceof wt||t&&"closed"in t&&Te(t.remove)&&Te(t.add)&&Te(t.unsubscribe)}function CR(t){Te(t)?t():t.unsubscribe()}var $r={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var $c={setTimeout(t,e,...n){let{delegate:r}=$c;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=$c;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Kp(t){$c.setTimeout(()=>{let{onUnhandledError:e}=$r;if(e)e(t);else throw t})}function Ed(){}var SR=Qb("C",void 0,void 0);function AR(t){return Qb("E",void 0,t)}function xR(t){return Qb("N",t,void 0)}function Qb(t,e,n){return{kind:t,value:e,error:n}}var pa=null;function zc(t){if($r.useDeprecatedSynchronousErrorHandling){let e=!pa;if(e&&(pa={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=pa;if(pa=null,n)throw r}}else t()}function RR(t){$r.useDeprecatedSynchronousErrorHandling&&pa&&(pa.errorThrown=!0,pa.error=t)}var ga=class extends wt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Gp(e)&&e.add(this)):this.destination=U$}static create(e,n,r){return new Wc(e,n,r)}next(e){this.isStopped?Xb(xR(e),this):this._next(e)}error(e){this.isStopped?Xb(AR(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Xb(SR,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},j$=Function.prototype.bind;function Zb(t,e){return j$.call(t,e)}var Jb=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Yp(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Yp(r)}else Yp(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Yp(n)}}},Wc=class extends ga{constructor(e,n,r){super();let i;if(Te(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&$r.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Zb(e.next,s),error:e.error&&Zb(e.error,s),complete:e.complete&&Zb(e.complete,s)}):i=e}this.destination=new Jb(i)}};function Yp(t){$r.useDeprecatedSynchronousErrorHandling?RR(t):Kp(t)}function B$(t){throw t}function Xb(t,e){let{onStoppedNotification:n}=$r;n&&$c.setTimeout(()=>n(t,e))}var U$={closed:!0,next:Ed,error:B$,complete:Ed};var qc=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Fn(t){return t}function eE(...t){return tE(t)}function tE(t){return t.length===0?Fn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Re=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=$$(n)?n:new Wc(n,r,i);return zc(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=MR(r),new r((i,s)=>{let o=new Wc({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[qc](){return this}pipe(...n){return tE(n)(this)}toPromise(n){return n=MR(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function MR(t){var e;return(e=t??$r.Promise)!==null&&e!==void 0?e:Promise}function H$(t){return t&&Te(t.next)&&Te(t.error)&&Te(t.complete)}function $$(t){return t&&t instanceof ga||H$(t)&&Gp(t)}function nE(t){return Te(t?.lift)}function je(t){return e=>{if(nE(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Pe(t,e,n,r,i){return new rE(t,e,n,r,i)}var rE=class extends ga{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Gc(){return je((t,e)=>{let n=null;t._refCount++;let r=Pe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Kc=class extends Re{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,nE(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new wt;let n=this.getSubject();e.add(this.source.subscribe(Pe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=wt.EMPTY)}return e}refCount(){return Gc()(this)}};var NR=Hc(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Mt=(()=>{class t extends Re{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Qp(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new NR}next(n){zc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){zc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){zc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Yb:(this.currentObservers=null,s.push(n),new wt(()=>{this.currentObservers=null,fa(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new Re;return n.source=this,n}}return t.create=(e,n)=>new Qp(e,n),t})(),Qp=class extends Mt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Yb}};var It=class extends Mt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var iE={now(){return(iE.delegate||Date).now()},delegate:void 0};var Zp=class extends wt{constructor(e,n){super()}schedule(e,n=0){return this}};var wd={setInterval(t,e,...n){let{delegate:r}=wd;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=wd;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Yc=class extends Zp{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return wd.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&wd.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,fa(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Qc=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Qc.now=iE.now;var Zc=class extends Qc{constructor(e,n=Qc.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var sE=new Zc(Yc);var Xp=class extends Yc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Jp=class extends Zc{};var oE=new Jp(Xp);var qn=new Re(t=>t.complete());function kR(t){return t&&Te(t.schedule)}function PR(t){return t[t.length-1]}function eg(t){return Te(PR(t))?t.pop():void 0}function Js(t){return kR(PR(t))?t.pop():void 0}function tg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function FR(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(h){o(h)}}function c(d){try{l(r.throw(d))}catch(h){o(h)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function OR(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ma(t){return this instanceof ma?(this.v=t,this):new ma(t)}function LR(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(g){return function(v){return Promise.resolve(v).then(g,h)}}function a(g,v){r[g]&&(i[g]=function(S){return new Promise(function(C,k){s.push([g,S,C,k])>1||c(g,S)})},v&&(i[g]=v(i[g])))}function c(g,v){try{l(r[g](v))}catch(S){p(s[0][3],S)}}function l(g){g.value instanceof ma?Promise.resolve(g.value.v).then(d,h):p(s[0][2],g)}function d(g){c("next",g)}function h(g){c("throw",g)}function p(g,v){g(v),s.shift(),s.length&&c(s[0][0],s[0][1])}}function VR(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof OR=="function"?OR(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var ng=t=>t&&typeof t.length=="number"&&typeof t!="function";function rg(t){return Te(t?.then)}function ig(t){return Te(t[qc])}function sg(t){return Symbol.asyncIterator&&Te(t?.[Symbol.asyncIterator])}function og(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function z$(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ag=z$();function cg(t){return Te(t?.[ag])}function lg(t){return LR(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield ma(n.read());if(i)return yield ma(void 0);yield yield ma(r)}}finally{n.releaseLock()}})}function ug(t){return Te(t?.getReader)}function Ft(t){if(t instanceof Re)return t;if(t!=null){if(ig(t))return W$(t);if(ng(t))return q$(t);if(rg(t))return G$(t);if(sg(t))return jR(t);if(cg(t))return K$(t);if(ug(t))return Y$(t)}throw og(t)}function W$(t){return new Re(e=>{let n=t[qc]();if(Te(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function q$(t){return new Re(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function G$(t){return new Re(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Kp)})}function K$(t){return new Re(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function jR(t){return new Re(e=>{Q$(t,e).catch(n=>e.error(n))})}function Y$(t){return jR(lg(t))}function Q$(t,e){var n,r,i,s;return FR(this,void 0,void 0,function*(){try{for(n=VR(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function Gn(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function eo(t,e=0){return je((n,r)=>{n.subscribe(Pe(r,i=>Gn(r,t,()=>r.next(i),e),()=>Gn(r,t,()=>r.complete(),e),i=>Gn(r,t,()=>r.error(i),e)))})}function to(t,e=0){return je((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function BR(t,e){return Ft(t).pipe(to(e),eo(e))}function UR(t,e){return Ft(t).pipe(to(e),eo(e))}function HR(t,e){return new Re(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function $R(t,e){return new Re(n=>{let r;return Gn(n,e,()=>{r=t[ag](),Gn(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>Te(r?.return)&&r.return()})}function dg(t,e){if(!t)throw new Error("Iterable cannot be null");return new Re(n=>{Gn(n,e,()=>{let r=t[Symbol.asyncIterator]();Gn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function zR(t,e){return dg(lg(t),e)}function WR(t,e){if(t!=null){if(ig(t))return BR(t,e);if(ng(t))return HR(t,e);if(rg(t))return UR(t,e);if(sg(t))return dg(t,e);if(cg(t))return $R(t,e);if(ug(t))return zR(t,e)}throw og(t)}function lt(t,e){return e?WR(t,e):Ft(t)}function pe(...t){let e=Js(t);return lt(t,e)}function Xc(t,e){let n=Te(t)?t:()=>t,r=i=>i.error(n());return new Re(e?i=>e.schedule(r,0,i):r)}function aE(t){return!!t&&(t instanceof Re||Te(t.lift)&&Te(t.subscribe))}var as=Hc(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Be(t,e){return je((n,r)=>{let i=0;n.subscribe(Pe(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:Z$}=Array;function X$(t,e){return Z$(e)?t(...e):t(e)}function hg(t){return Be(e=>X$(t,e))}var{isArray:J$}=Array,{getPrototypeOf:ez,prototype:tz,keys:nz}=Object;function fg(t){if(t.length===1){let e=t[0];if(J$(e))return{args:e,keys:null};if(rz(e)){let n=nz(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function rz(t){return t&&typeof t=="object"&&ez(t)===tz}function pg(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Id(...t){let e=Js(t),n=eg(t),{args:r,keys:i}=fg(t);if(r.length===0)return lt([],e);let s=new Re(iz(r,e,i?o=>pg(i,o):Fn));return n?s.pipe(hg(n)):s}function iz(t,e,n=Fn){return r=>{qR(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)qR(e,()=>{let l=lt(t[c],e),d=!1;l.subscribe(Pe(r,h=>{s[c]=h,d||(d=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function qR(t,e,n){t?Gn(n,t,e):e()}function GR(t,e,n,r,i,s,o,a){let c=[],l=0,d=0,h=!1,p=()=>{h&&!c.length&&!l&&e.complete()},g=S=>l<r?v(S):c.push(S),v=S=>{s&&e.next(S),l++;let C=!1;Ft(n(S,d++)).subscribe(Pe(e,k=>{i?.(k),s?g(k):e.next(k)},()=>{C=!0},void 0,()=>{if(C)try{for(l--;c.length&&l<r;){let k=c.shift();o?Gn(e,o,()=>v(k)):v(k)}p()}catch(k){e.error(k)}}))};return t.subscribe(Pe(e,g,()=>{h=!0,p()})),()=>{a?.()}}function Nt(t,e,n=1/0){return Te(e)?Nt((r,i)=>Be((s,o)=>e(r,s,i,o))(Ft(t(r,i))),n):(typeof e=="number"&&(n=e),je((r,i)=>GR(r,i,t,n)))}function no(t=1/0){return Nt(Fn,t)}function KR(){return no(1)}function Jc(...t){return KR()(lt(t,Js(t)))}function Td(t){return new Re(e=>{Ft(t()).subscribe(e)})}function cE(...t){let e=eg(t),{args:n,keys:r}=fg(t),i=new Re(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let d=0;d<o;d++){let h=!1;Ft(n[d]).subscribe(Pe(s,p=>{h||(h=!0,l--),a[d]=p},()=>c--,void 0,()=>{(!c||!h)&&(l||s.next(r?pg(r,a):a),s.complete())}))}});return e?i.pipe(hg(e)):i}function Kn(t,e){return je((n,r)=>{let i=0;n.subscribe(Pe(r,s=>t.call(e,s,i++)&&r.next(s)))})}function cs(t){return je((e,n)=>{let r=null,i=!1,s;r=e.subscribe(Pe(n,void 0,void 0,o=>{s=Ft(t(o,cs(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function YR(t,e,n,r,i){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(Pe(o,d=>{let h=l++;c=a?t(c,d,h):(a=!0,d),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function ro(t,e){return Te(e)?Nt(t,e,1):Nt(t,1)}function io(t){return je((e,n)=>{let r=!1;e.subscribe(Pe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function ls(t){return t<=0?()=>qn:je((e,n)=>{let r=0;e.subscribe(Pe(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function lE(t,e=Fn){return t=t??sz,je((n,r)=>{let i,s=!0;n.subscribe(Pe(r,o=>{let a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function sz(t,e){return t===e}function gg(t=oz){return je((e,n)=>{let r=!1;e.subscribe(Pe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function oz(){return new as}function Dd(t){return je((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function us(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Kn((i,s)=>t(i,s,r)):Fn,ls(1),n?io(e):gg(()=>new as))}function el(t){return t<=0?()=>qn:je((e,n)=>{let r=[];e.subscribe(Pe(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function uE(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Kn((i,s)=>t(i,s,r)):Fn,el(1),n?io(e):gg(()=>new as))}function dE(t,e){return je(YR(t,e,arguments.length>=2,!0))}function hE(...t){let e=Js(t);return je((n,r)=>{(e?Jc(t,n,e):Jc(t,n)).subscribe(r)})}function Ln(t,e){return je((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(Pe(r,c=>{i?.unsubscribe();let l=0,d=s++;Ft(t(c,d)).subscribe(i=Pe(r,h=>r.next(e?e(c,h,d,l++):h),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function mg(t){return je((e,n)=>{Ft(t).subscribe(Pe(n,()=>n.complete(),Ed)),!n.closed&&e.subscribe(n)})}function sn(t,e,n){let r=Te(t)||e||n?{next:t,error:e,complete:n}:t;return r?je((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Pe(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Fn}function QR(t){let e=xe(null);try{return t()}finally{xe(e)}}var Eg="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",X=class extends Error{code;constructor(e,n){super(Ea(e,n)),this.code=e}};function az(t){return`NG0${Math.abs(t)}`}function Ea(t,e){return`${az(t)}${e?": "+e:""}`}var ps=globalThis;function Qe(t){for(let e in t)if(t[e]===Qe)return e;throw Error("")}function JR(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function hs(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(hs).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function DE(t,e){return t?e?`${t} ${e}`:t:e||""}var cz=Qe({__forward_ref__:Qe});function cr(t){return t.__forward_ref__=cr,t.toString=function(){return hs(this())},t}function yn(t){return CE(t)?t():t}function CE(t){return typeof t=="function"&&t.hasOwnProperty(cz)&&t.__forward_ref__===cr}function eM(t,e){t==null&&SE(e,t,null,"!=")}function SE(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function ie(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Wr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Rd(t){return lz(t,wg)}function AE(t){return Rd(t)!==null}function lz(t,e){return t.hasOwnProperty(e)&&t[e]||null}function uz(t){let e=t?.[wg]??null;return e||null}function pE(t){return t&&t.hasOwnProperty(_g)?t[_g]:null}var wg=Qe({\u0275prov:Qe}),_g=Qe({\u0275inj:Qe}),te=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ie({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function xE(t){return t&&!!t.\u0275providers}var RE=Qe({\u0275cmp:Qe}),ME=Qe({\u0275dir:Qe}),NE=Qe({\u0275pipe:Qe}),kE=Qe({\u0275mod:Qe}),Ad=Qe({\u0275fac:Qe}),wa=Qe({__NG_ELEMENT_ID__:Qe}),ZR=Qe({__NG_ENV_ID__:Qe});function Md(t){return typeof t=="string"?t:t==null?"":String(t)}function vg(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Md(t)}var PE=Qe({ngErrorCode:Qe}),tM=Qe({ngErrorMessage:Qe}),Sd=Qe({ngTokenPath:Qe});function OE(t,e){return nM("",-200,e)}function Ig(t,e){throw new X(-201,!1)}function dz(t,e){t[Sd]??=[];let n=t[Sd],r;typeof e=="object"&&"multi"in e&&e?.multi===!0?(eM(e.provide,"Token with multi: true should have a provide property"),r=vg(e.provide)):r=vg(e),n[0]!==r&&t[Sd].unshift(r)}function hz(t,e){let n=t[Sd],r=t[PE],i=t[tM]||t.message;return t.message=pz(i,r,n,e),t}function nM(t,e,n){let r=new X(e,t);return r[PE]=e,r[tM]=t,n&&(r[Sd]=n),r}function fz(t){return t[PE]}function pz(t,e,n=[],r=null){let i="";n&&n.length>1&&(i=` Path: ${n.join(" -> ")}.`);let s=r?` Source: ${r}.`:"";return Ea(e,`${t}${s}${i}`)}var gE;function rM(){return gE}function Vn(t){let e=gE;return gE=t,e}function FE(t,e,n){let r=Rd(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Ig(t,"Injector")}var gz={},ya=gz,mE="__NG_DI_FLAG__",yE=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=_a(n)||0;try{return this.injector.get(e,r&8?null:ya,r)}catch(i){if(Fc(i))return i;throw i}}};function mz(t,e=0){let n=Op();if(n===void 0)throw new X(-203,!1);if(n===null)return FE(t,void 0,e);{let r=yz(e),i=n.retrieve(t,r);if(Fc(i)){if(r.optional)return null;throw i}return i}}function ae(t,e=0){return(rM()||mz)(yn(t),e)}function j(t,e){return ae(t,_a(e))}function _a(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function yz(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function _E(t){let e=[];for(let n=0;n<t.length;n++){let r=yn(t[n]);if(Array.isArray(r)){if(r.length===0)throw new X(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],c=_z(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(ae(i,s))}else e.push(ae(r))}return e}function iM(t,e){return t[mE]=e,t.prototype[mE]=e,t}function _z(t){return t[mE]}function so(t,e){let n=t.hasOwnProperty(Ad);return n?t[Ad]:null}function sM(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function oM(t){return t.flat(Number.POSITIVE_INFINITY)}function Tg(t,e){t.forEach(n=>Array.isArray(n)?Tg(n,e):e(n))}function LE(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Nd(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function aM(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function cM(t,e,n){let r=nl(t,e);return r>=0?t[r|1]=n:(r=~r,aM(t,r,e,n)),r}function Dg(t,e){let n=nl(t,e);if(n>=0)return t[n|1]}function nl(t,e){return vz(t,e,1)}function vz(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var ao={},ar=[],co=new te(""),VE=new te("",-1),jE=new te(""),xd=class{get(e,n=ya){if(n===ya){let i=nM("",-201);throw i.name="\u0275NotFound",i}return n}};function BE(t){return t[kE]||null}function gs(t){return t[RE]||null}function UE(t){return t[ME]||null}function lM(t){return t[NE]||null}function lr(t){return{\u0275providers:t}}function uM(...t){return{\u0275providers:HE(!0,t),\u0275fromNgModule:!0}}function HE(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Tg(e,o=>{let a=o;bg(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&dM(i,s),n}function dM(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];$E(i,s=>{e(s,r)})}}function bg(t,e,n,r){if(t=yn(t),!t)return!1;let i=null,s=pE(t),o=!s&&gs(t);if(!s&&!o){let c=t.ngModule;if(s=pE(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)bg(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Tg(s.imports,d=>{bg(d,e,n,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&dM(l,e)}if(!a){let l=so(i)||(()=>new i);e({provide:i,useFactory:l,deps:ar},i),e({provide:jE,useValue:i,multi:!0},i),e({provide:co,useValue:()=>ae(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;$E(c,d=>{e(d,l)})}}else return!1;return i!==t&&t.providers!==void 0}function $E(t,e){for(let n of t)xE(n)&&(n=n.\u0275providers),Array.isArray(n)?$E(n,e):e(n)}var bz=Qe({provide:String,useValue:Qe});function hM(t){return t!==null&&typeof t=="object"&&bz in t}function Ez(t){return!!(t&&t.useExisting)}function wz(t){return!!(t&&t.useFactory)}function va(t){return typeof t=="function"}function fM(t){return!!t.useClass}var kd=new te(""),yg={},XR={},fE;function Pd(){return fE===void 0&&(fE=new xd),fE}var kt=class{},ba=class extends kt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,bE(e,o=>this.processProvider(o)),this.records.set(VE,tl(void 0,this)),i.has("environment")&&this.records.set(kt,tl(void 0,this));let s=this.records.get(kd);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(jE,ar,{self:!0}))}retrieve(e,n){let r=_a(n)||0;try{return this.get(e,ya,r)}catch(i){if(Fc(i))return i;throw i}}destroy(){Cd(this),this._destroyed=!0;let e=xe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),xe(e)}}onDestroy(e){return Cd(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Cd(this);let n=gi(this),r=Vn(void 0),i;try{return e()}finally{gi(n),Vn(r)}}get(e,n=ya,r){if(Cd(this),e.hasOwnProperty(ZR))return e[ZR](this);let i=_a(r),s,o=gi(this),a=Vn(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let d=Sz(e)&&Rd(e);d&&this.injectableDefInScope(d)?l=tl(vE(e),yg):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let c=i&2?Pd():this.parent;return n=i&8&&n===ya?null:n,c.get(e,n)}catch(c){let l=fz(c);throw l===-200||l===-201?new X(l,null):c}finally{Vn(a),gi(o)}}resolveInjectorInitializers(){let e=xe(null),n=gi(this),r=Vn(void 0),i;try{let s=this.get(co,ar,{self:!0});for(let o of s)o()}finally{gi(n),Vn(r),xe(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(hs(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=yn(e);let n=va(e)?e:yn(e&&e.provide),r=Tz(e);if(!va(e)&&e.multi===!0){let i=this.records.get(n);i||(i=tl(void 0,yg,!0),i.factory=()=>_E(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=xe(null);try{if(n.value===XR)throw OE(hs(e));return n.value===yg&&(n.value=XR,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&Cz(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{xe(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=yn(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function vE(t){let e=Rd(t),n=e!==null?e.factory:so(t);if(n!==null)return n;if(t instanceof te)throw new X(204,!1);if(t instanceof Function)return Iz(t);throw new X(204,!1)}function Iz(t){if(t.length>0)throw new X(204,!1);let n=uz(t);return n!==null?()=>n.factory(t):()=>new t}function Tz(t){if(hM(t))return tl(void 0,t.useValue);{let e=zE(t);return tl(e,yg)}}function zE(t,e,n){let r;if(va(t)){let i=yn(t);return so(i)||vE(i)}else if(hM(t))r=()=>yn(t.useValue);else if(wz(t))r=()=>t.useFactory(..._E(t.deps||[]));else if(Ez(t))r=(i,s)=>ae(yn(t.useExisting),s!==void 0&&s&8?8:void 0);else{let i=yn(t&&(t.useClass||t.provide));if(Dz(t))r=()=>new i(..._E(t.deps));else return so(i)||vE(i)}return r}function Cd(t){if(t.destroyed)throw new X(205,!1)}function tl(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Dz(t){return!!t.deps}function Cz(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Sz(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function bE(t,e){for(let n of t)Array.isArray(n)?bE(n,e):n&&xE(n)?bE(n.\u0275providers,e):e(n)}function Lt(t,e){let n;t instanceof ba?(Cd(t),n=t):n=new yE(t);let r,i=gi(n),s=Vn(void 0);try{return e()}finally{gi(i),Vn(s)}}function pM(){return rM()!==void 0||Op()!=null}var qr=0,ve=1,Ee=2,on=3,Er=4,wr=5,Od=6,rl=7,Sn=8,Ia=9,mi=10,_t=11,il=12,WE=13,Ta=14,Ir=15,lo=16,Da=17,yi=18,Fd=19,qE=20,ds=21,Cg=22,Ld=23,ur=24,Ca=25,an=26,gM=1;var uo=7,Vd=8,Sa=9,jn=10;function _i(t){return Array.isArray(t)&&typeof t[gM]=="object"}function Gr(t){return Array.isArray(t)&&t[gM]===!0}function GE(t){return(t.flags&4)!==0}function ho(t){return t.componentOffset>-1}function sl(t){return(t.flags&1)===1}function vi(t){return!!t.template}function ol(t){return(t[Ee]&512)!==0}function Aa(t){return(t[Ee]&256)===256}var mM="svg",yM="math";function Tr(t){for(;Array.isArray(t);)t=t[qr];return t}function KE(t,e){return Tr(e[t])}function Kr(t,e){return Tr(e[t.index])}function Sg(t,e){return t.data[e]}function Ag(t,e){return t[e]}function YE(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Dr(t,e){let n=e[t];return _i(n)?n:n[qr]}function _M(t){return(t[Ee]&4)===4}function xg(t){return(t[Ee]&128)===128}function vM(t){return Gr(t[on])}function jd(t,e){return e==null?null:t[e]}function QE(t){t[Da]=0}function ZE(t){t[Ee]&1024||(t[Ee]|=1024,xg(t)&&al(t))}function bM(t,e){for(;t>0;)e=e[Ta],t--;return e}function Bd(t){return!!(t[Ee]&9216||t[ur]?.dirty)}function Rg(t){t[mi].changeDetectionScheduler?.notify(8),t[Ee]&64&&(t[Ee]|=1024),Bd(t)&&al(t)}function al(t){t[mi].changeDetectionScheduler?.notify(0);let e=oo(t);for(;e!==null&&!(e[Ee]&8192||(e[Ee]|=8192,!xg(e)));)e=oo(e)}function XE(t,e){if(Aa(t))throw new X(911,!1);t[ds]===null&&(t[ds]=[]),t[ds].push(e)}function EM(t,e){if(t[ds]===null)return;let n=t[ds].indexOf(e);n!==-1&&t[ds].splice(n,1)}function oo(t){let e=t[on];return Gr(e)?e[on]:e}function JE(t){return t[rl]??=[]}function ew(t){return t.cleanup??=[]}function wM(t,e,n,r){let i=JE(e);i.push(n),t.firstCreatePass&&ew(t).push(r,i.length-1)}var Me={lFrame:jM(null),bindingsEnabled:!0,skipHydrationRootTNode:null},Ud=(function(t){return t[t.Off=0]="Off",t[t.Exhaustive=1]="Exhaustive",t[t.OnlyDirtyViews=2]="OnlyDirtyViews",t})(Ud||{}),Az=0,EE=!1;function IM(){return Me.lFrame.elementDepthCount}function TM(){Me.lFrame.elementDepthCount++}function DM(){Me.lFrame.elementDepthCount--}function Mg(){return Me.bindingsEnabled}function CM(){return Me.skipHydrationRootTNode!==null}function SM(t){return Me.skipHydrationRootTNode===t}function AM(){Me.skipHydrationRootTNode=null}function Fe(){return Me.lFrame.lView}function _n(){return Me.lFrame.tView}function Vt(t){return Me.lFrame.contextLView=t,t[Sn]}function jt(t){return Me.lFrame.contextLView=null,t}function cn(){let t=tw();for(;t!==null&&t.type===64;)t=t.parent;return t}function tw(){return Me.lFrame.currentTNode}function xM(){let t=Me.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function cl(t,e){let n=Me.lFrame;n.currentTNode=t,n.isParent=e}function nw(){return Me.lFrame.isParent}function RM(){Me.lFrame.isParent=!1}function MM(){return Me.lFrame.contextLView}function rw(t){SE("Must never be called in production mode"),Az=t}function iw(){return EE}function sw(t){let e=EE;return EE=t,e}function ll(){let t=Me.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function NM(t){return Me.lFrame.bindingIndex=t}function Hd(){return Me.lFrame.bindingIndex++}function kM(t){let e=Me.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function PM(){return Me.lFrame.inI18n}function OM(t,e){let n=Me.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ng(e)}function FM(){return Me.lFrame.currentDirectiveIndex}function Ng(t){Me.lFrame.currentDirectiveIndex=t}function LM(t){let e=Me.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function ow(){return Me.lFrame.currentQueryIndex}function kg(t){Me.lFrame.currentQueryIndex=t}function xz(t){let e=t[ve];return e.type===2?e.declTNode:e.type===1?t[wr]:null}function aw(t,e,n){if(n&4){let i=e,s=t;for(;i=i.parent,i===null&&!(n&1);)if(i=xz(s),i===null||(s=s[Ta],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=Me.lFrame=VM();return r.currentTNode=e,r.lView=t,!0}function Pg(t){let e=VM(),n=t[ve];Me.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function VM(){let t=Me.lFrame,e=t===null?null:t.child;return e===null?jM(t):e}function jM(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function BM(){let t=Me.lFrame;return Me.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var cw=BM;function Og(){let t=BM();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function UM(t){return(Me.lFrame.contextLView=bM(t,Me.lFrame.contextLView))[Sn]}function xa(){return Me.lFrame.selectedIndex}function fo(t){Me.lFrame.selectedIndex=t}function Fg(){let t=Me.lFrame;return Sg(t.tView,t.selectedIndex)}function HM(){return Me.lFrame.currentNamespace}var $M=!0;function Lg(){return $M}function $d(t){$M=t}var Rz={elements:void 0};function Vg(){return Rz}function wE(t,e=null,n=null,r){let i=lw(t,e,n,r);return i.resolveInjectorInitializers(),i}function lw(t,e=null,n=null,r,i=new Set){let s=[n||ar,uM(t)];return r=r||(typeof t=="object"?void 0:hs(t)),new ba(s,e||Pd(),r||null,i)}var ft=class t{static THROW_IF_NOT_FOUND=ya;static NULL=new xd;static create(e,n){if(Array.isArray(e))return wE({name:""},n,e,"");{let r=e.name??"";return wE({name:r},e.parent,e.providers,r)}}static \u0275prov=ie({token:t,providedIn:"any",factory:()=>ae(VE)});static __NG_ELEMENT_ID__=-1},Bt=new te(""),bi=(()=>{class t{static __NG_ELEMENT_ID__=Mz;static __NG_ENV_ID__=n=>n}return t})(),IE=class extends bi{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Aa(this._lView)}onDestroy(e){let n=this._lView;return XE(n,e),()=>EM(n,e)}};function Mz(){return new IE(Fe())}var zr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Yn=new te("",{providedIn:"root",factory:()=>{let t=j(kt),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(zr),e.handleError(n))}}}),zM={provide:co,useValue:()=>void j(zr),multi:!0};function uw(t){return typeof t=="function"&&t[Cn]!==void 0}function Cr(t,e){let[n,r,i]=Gb(t,e?.equal),s=n,o=s[Cn];return s.set=r,s.update=i,s.asReadonly=WM.bind(s),s}function WM(){let t=this[Cn];if(t.readonlyFn===void 0){let e=()=>this();e[Cn]=t,t.readonlyFn=e}return t.readonlyFn}function dw(t){return uw(t)&&typeof t.set=="function"}var fs=class{},jg=new te("",{providedIn:"root",factory:()=>!1});var hw=new te(""),fw=new te("");var Bg=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=Nz}return t})();function Nz(){return new Bg(Fe(),cn())}var Ei=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new It(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Re(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=ie({token:t,providedIn:"root",factory:()=>new t})}return t})(),ul=(()=>{class t{internalPendingTasks=j(Ei);scheduler=j(fs);errorHandler=j(Yn);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=ie({token:t,providedIn:"root",factory:()=>new t})}return t})();function zd(...t){}var pw=(()=>{class t{static \u0275prov=ie({token:t,providedIn:"root",factory:()=>new TE})}return t})(),TE=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function gl(t){return{toString:t}.toString()}var Ug="__parameters__";function Bz(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Uz(t,e,n){return gl(()=>{let r=Bz(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,d){let h=c.hasOwnProperty(Ug)?c[Ug]:Object.defineProperty(c,Ug,{value:[]})[Ug];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(o),c}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Qt=iM(Uz("Optional"),8);function Hz(t){return typeof t=="function"}var Kg=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function IN(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Sr=(()=>{let t=()=>TN;return t.ngInherit=!0,t})();function TN(t){return t.type.prototype.ngOnChanges&&(t.setInput=zz),$z}function $z(){let t=CN(this),e=t?.current;if(e){let n=t.previous;if(n===ao)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function zz(t,e,n,r,i){let s=this.declaredInputs[r],o=CN(t)||Wz(t,{previous:ao,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Kg(l&&l.currentValue,n,c===ao),IN(t,e,i,n)}var DN="__ngSimpleChanges__";function CN(t){return t[DN]||null}function Wz(t,e){return t[DN]=e}var qM=[];var et=function(t,e=null,n){for(let r=0;r<qM.length;r++){let i=qM[r];i(t,e,n)}};function qz(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=TN(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function SN(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),d!=null&&(t.destroyHooks??=[]).push(n,d)}}function zg(t,e,n){AN(t,e,3,n)}function Wg(t,e,n,r){(t[Ee]&3)===n&&AN(t,e,n,r)}function gw(t,e){let n=t[Ee];(n&3)===e&&(n&=16383,n+=1,t[Ee]=n)}function AN(t,e,n,r){let i=r!==void 0?t[Da]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Da]+=65536),(a<s||s==-1)&&(Gz(t,n,e,c),t[Da]=(t[Da]&4294901760)+c+2),c++}function GM(t,e){et(4,t,e);let n=xe(null);try{e.call(t)}finally{xe(n),et(5,t,e)}}function Gz(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[Ee]>>14<t[Da]>>16&&(t[Ee]&3)===e&&(t[Ee]+=16384,GM(a,s)):GM(a,s)}var hl=-1,Na=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function Kz(t){return(t.flags&8)!==0}function Yz(t){return(t.flags&16)!==0}function Qz(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];Zz(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function xN(t){return t===3||t===4||t===6}function Zz(t){return t.charCodeAt(0)===64}function Gd(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?KM(t,n,i,null,e[++r]):KM(t,n,i,null,null))}}return t}function KM(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){i!==null&&(t[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),i!==null&&t.splice(s++,0,i)}function RN(t){return t!==hl}function Yg(t){return t&32767}function Xz(t){return t>>16}function Qg(t,e){let n=Xz(t),r=e;for(;n>0;)r=r[Ta],n--;return r}var Cw=!0;function Zg(t){let e=Cw;return Cw=t,e}var Jz=256,MN=Jz-1,NN=5,e4=0,wi={};function t4(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(wa)&&(r=n[wa]),r==null&&(r=n[wa]=e4++);let i=r&MN,s=1<<i;e.data[t+(i>>NN)]|=s}function Xg(t,e){let n=kN(t,e);if(n!==-1)return n;let r=e[ve];r.firstCreatePass&&(t.injectorIndex=e.length,mw(r.data,t),mw(e,null),mw(r.blueprint,null));let i=Zw(t,e),s=t.injectorIndex;if(RN(i)){let o=Yg(i),a=Qg(i,e),c=a[ve].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function mw(t,e){t.push(0,0,0,0,0,0,0,0,e)}function kN(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Zw(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=VN(i),r===null)return hl;if(n++,i=i[Ta],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return hl}function Sw(t,e,n){t4(t,e,n)}function n4(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(xN(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function PN(t,e,n){if(n&8||t!==void 0)return t;Ig(e,"NodeInjector")}function ON(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[Ia],s=Vn(void 0);try{return i?i.get(e,r,n&8):FE(e,r,n&8)}finally{Vn(s)}}return PN(r,e,n)}function FN(t,e,n,r=0,i){if(t!==null){if(e[Ee]&2048&&!(r&2)){let o=o4(t,e,n,r,wi);if(o!==wi)return o}let s=LN(t,e,n,r,wi);if(s!==wi)return s}return ON(e,n,r,i)}function LN(t,e,n,r,i){let s=i4(n);if(typeof s=="function"){if(!aw(e,t,r))return r&1?PN(i,n,r):ON(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&8))Ig(n);else return o}finally{cw()}}else if(typeof s=="number"){let o=null,a=kN(t,e),c=hl,l=r&1?e[Ir][wr]:null;for((a===-1||r&4)&&(c=a===-1?Zw(t,e):e[a+8],c===hl||!QM(r,!1)?a=-1:(o=e[ve],a=Yg(c),e=Qg(c,e)));a!==-1;){let d=e[ve];if(YM(s,a,d.data)){let h=r4(a,e,n,o,r,l);if(h!==wi)return h}c=e[a+8],c!==hl&&QM(r,e[ve].data[a+8]===l)&&YM(s,a,e)?(o=d,a=Yg(c),e=Qg(c,e)):a=-1}}return i}function r4(t,e,n,r,i,s){let o=e[ve],a=o.data[t+8],c=r==null?ho(a)&&Cw:r!=o&&(a.type&3)!==0,l=i&1&&s===a,d=qg(a,o,n,c,l);return d!==null?Kd(e,o,d,a,i):wi}function qg(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,d=s>>20,h=r?a:a+d,p=i?a+d:l;for(let g=h;g<p;g++){let v=o[g];if(g<c&&n===v||g>=c&&v.type===n)return g}if(i){let g=o[c];if(g&&vi(g)&&g.type===n)return c}return null}function Kd(t,e,n,r,i){let s=t[n],o=e.data;if(s instanceof Na){let a=s;if(a.resolving){let g=vg(o[n]);throw OE(g)}let c=Zg(a.canSeeViewProviders);a.resolving=!0;let l=o[n].type||o[n],d,h=a.injectImpl?Vn(a.injectImpl):null,p=aw(t,r,0);try{s=t[n]=a.factory(void 0,i,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&qz(n,o[n],e)}finally{h!==null&&Vn(h),Zg(c),a.resolving=!1,cw()}}return s}function i4(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(wa)?t[wa]:void 0;return typeof e=="number"?e>=0?e&MN:s4:e}function YM(t,e,n){let r=1<<t;return!!(n[e+(t>>NN)]&r)}function QM(t,e){return!(t&2)&&!(t&1&&e)}var Ma=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return FN(this._tNode,this._lView,e,_a(r),n)}};function s4(){return new Ma(cn(),Fe())}function Zr(t){return gl(()=>{let e=t.prototype.constructor,n=e[Ad]||Aw(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Ad]||Aw(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Aw(t){return CE(t)?()=>{let e=Aw(yn(t));return e&&e()}:so(t)}function o4(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[Ee]&2048&&!ol(o);){let a=LN(s,o,n,r|2,wi);if(a!==wi)return a;let c=s.parent;if(!c){let l=o[qE];if(l){let d=l.get(n,wi,r);if(d!==wi)return d}c=VN(o),o=o[Ta]}s=c}return i}function VN(t){let e=t[ve],n=e.type;return n===2?e.declTNode:n===1?t[wr]:null}function Xd(t){return n4(cn(),t)}function a4(){return ml(cn(),Fe())}function ml(t,e){return new Zt(Kr(t,e))}var Zt=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=a4}return t})();function c4(t){return t instanceof Zt?t.nativeElement:t}function l4(){return this._results[Symbol.iterator]()}var Jg=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Mt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=oM(e);(this._changesDetected=!sM(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=l4};function jN(t){return(t.flags&128)===128}var Xw=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(Xw||{}),BN=new Map,u4=0;function d4(){return u4++}function h4(t){BN.set(t[Fd],t)}function xw(t){BN.delete(t[Fd])}var ZM="__ngContext__";function fl(t,e){_i(e)?(t[ZM]=e[Fd],h4(e)):t[ZM]=e}function UN(t){return $N(t[il])}function HN(t){return $N(t[Er])}function $N(t){for(;t!==null&&!Gr(t);)t=t[Er];return t}var Rw;function Jw(t){Rw=t}function zN(){if(Rw!==void 0)return Rw;if(typeof document<"u")return document;throw new X(210,!1)}var dm=new te("",{providedIn:"root",factory:()=>f4}),f4="ng",hm=new te(""),dr=new te("",{providedIn:"platform",factory:()=>"unknown"});var fm=new te("",{providedIn:"root",factory:()=>zN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var p4="h",g4="b";var WN=!1,qN=new te("",{providedIn:"root",factory:()=>WN});var eI=new te("");var m4=(t,e,n,r)=>{};function y4(t,e,n,r){m4(t,e,n,r)}function tI(t){return(t.flags&32)===32}var _4=()=>null;function GN(t,e,n=!1){return _4(t,e,n)}function KN(t,e){let n=t.contentQueries;if(n!==null){let r=xe(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];kg(s),a.contentQueries(2,e[o],o)}}}finally{xe(r)}}}function Mw(t,e,n){kg(0);let r=xe(null);try{e(t,n)}finally{xe(r)}}function nI(t,e,n){if(GE(e)){let r=xe(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{xe(r)}}}var ms=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})(ms||{});var Hg;function v4(){if(Hg===void 0&&(Hg=null,ps.trustedTypes))try{Hg=ps.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Hg}function XM(t){return v4()?.createScriptURL(t)||t}var em=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Eg})`}};function Jd(t){return t instanceof em?t.changingThisBreaksApplicationSecurity:t}function rI(t,e){let n=YN(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Eg})`)}return n===e}function YN(t){return t instanceof em&&t.getTypeName()||null}var b4=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function QN(t){return t=String(t),t.match(b4)?t:"unsafe:"+t}var pm=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(pm||{});function ys(t){let e=XN();return e?e.sanitize(pm.URL,t)||"":rI(t,"URL")?Jd(t):QN(Md(t))}function ZN(t){let e=XN();if(e)return XM(e.sanitize(pm.RESOURCE_URL,t)||"");if(rI(t,"ResourceURL"))return XM(Jd(t));throw new X(904,!1)}function E4(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?ZN:ys}function iI(t,e,n){return E4(e,n)(t)}function XN(){let t=Fe();return t&&t[mi].sanitizer}var w4=/^>|^->|<!--|-->|--!>|<!-$/g,I4=/(<|>)/g,T4="\u200B$1\u200B";function D4(t){return t.replace(w4,e=>e.replace(I4,T4))}function JN(t){return t instanceof Function?t():t}function C4(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}var ek="ng-template";function S4(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&C4(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(sI(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function sI(t){return t.type===4&&t.value!==ek}function A4(t,e,n){let r=t.type===4&&!n?ek:t.value;return e===r}function x4(t,e,n){let r=4,i=t.attrs,s=i!==null?N4(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Yr(r)&&!Yr(c))return!1;if(o&&Yr(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!A4(t,c,n)||c===""&&e.length===1){if(Yr(r))return!1;o=!0}}else if(r&8){if(i===null||!S4(t,i,c,n)){if(Yr(r))return!1;o=!0}}else{let l=e[++a],d=R4(c,i,sI(t),n);if(d===-1){if(Yr(r))return!1;o=!0;continue}if(l!==""){let h;if(d>s?h="":h=i[d+1].toLowerCase(),r&2&&l!==h){if(Yr(r))return!1;o=!0}}}}return Yr(r)||o}function Yr(t){return(t&1)===0}function R4(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return k4(e,t)}function M4(t,e,n=!1){for(let r=0;r<e.length;r++)if(x4(t,e[r],n))return!0;return!1}function N4(t){for(let e=0;e<t.length;e++){let n=t[e];if(xN(n))return e}return t.length}function k4(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function JM(t,e){return t?":not("+e.trim()+")":e}function P4(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Yr(o)&&(e+=JM(s,i),i=""),r=o,s=s||!Yr(r);n++}return i!==""&&(e+=JM(s,i)),e}function O4(t){return t.map(P4).join(",")}function F4(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Yr(i))break;i=s}r++}return n.length&&e.push(1,...n),e}var Ii={};function L4(t,e){return t.createText(e)}function V4(t,e,n){t.setValue(e,n)}function j4(t,e){return t.createComment(D4(e))}function tk(t,e,n){return t.createElement(e,n)}function tm(t,e,n,r,i){t.insertBefore(e,n,r,i)}function nk(t,e,n){t.appendChild(e,n)}function eN(t,e,n,r,i){r!==null?tm(t,e,n,r,i):nk(t,e,n)}function B4(t,e,n){t.removeChild(null,e,n)}function U4(t,e,n){t.setAttribute(e,"style",n)}function H4(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function rk(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Qz(t,e,r),i!==null&&H4(t,e,i),s!==null&&U4(t,e,s)}function oI(t,e,n,r,i,s,o,a,c,l,d){let h=an+r,p=h+i,g=$4(h,p),v=typeof l=="function"?l():l;return g[ve]={type:t,blueprint:g,template:n,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:v,incompleteFirstPass:!1,ssrId:d}}function $4(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ii);return n}function z4(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=oI(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function aI(t,e,n,r,i,s,o,a,c,l,d){let h=e.blueprint.slice();return h[qr]=i,h[Ee]=r|4|128|8|64|1024,(l!==null||t&&t[Ee]&2048)&&(h[Ee]|=2048),QE(h),h[on]=h[Ta]=t,h[Sn]=n,h[mi]=o||t&&t[mi],h[_t]=a||t&&t[_t],h[Ia]=c||t&&t[Ia]||null,h[wr]=s,h[Fd]=d4(),h[Od]=d,h[qE]=l,h[Ir]=e.type==2?t[Ir]:h,h}function W4(t,e,n){let r=Kr(e,t),i=z4(n),s=t[mi].rendererFactory,o=cI(t,aI(t,i,null,ik(n),r,e,null,s.createRenderer(r,n),null,null,null));return t[e.index]=o}function ik(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function sk(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function cI(t,e){return t[il]?t[WE][Er]=e:t[il]=e,t[WE]=e,e}function $(t=1){ok(_n(),Fe(),xa()+t,!1)}function ok(t,e,n,r){if(!r)if((e[Ee]&3)===3){let s=t.preOrderCheckHooks;s!==null&&zg(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Wg(e,s,0,n)}fo(n)}var gm=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(gm||{});function Nw(t,e,n,r){let i=xe(null);try{let[s,o,a]=t.inputs[n],c=null;(o&gm.SignalBased)!==0&&(c=e[s][Cn]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,c,r,n,s):IN(e,c,s,r)}finally{xe(i)}}var Qr=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(Qr||{}),q4;function lI(t,e){return q4(t,e)}function dl(t,e,n,r,i){if(r!=null){let s,o=!1;Gr(r)?s=r:_i(r)&&(o=!0,r=r[qr]);let a=Tr(r);t===0&&n!==null?i==null?nk(e,n,a):tm(e,n,a,i||null,!0):t===1&&n!==null?tm(e,n,a,i||null,!0):t===2?B4(e,a,o):t===3&&e.destroyNode(a),s!=null&&i3(e,t,s,n,i)}}function G4(t,e){ak(t,e),e[qr]=null,e[wr]=null}function K4(t,e,n,r,i,s){r[qr]=i,r[wr]=e,mm(t,r,n,1,i,s)}function ak(t,e){e[mi].changeDetectionScheduler?.notify(9),mm(t,e,e[_t],2,null,null)}function Y4(t){let e=t[il];if(!e)return yw(t[ve],t);for(;e;){let n=null;if(_i(e))n=e[il];else{let r=e[jn];r&&(n=r)}if(!n){for(;e&&!e[Er]&&e!==t;)_i(e)&&yw(e[ve],e),e=e[on];e===null&&(e=t),_i(e)&&yw(e[ve],e),n=e&&e[Er]}e=n}}function uI(t,e){let n=t[Sa],r=n.indexOf(e);n.splice(r,1)}function ck(t,e){if(Aa(e))return;let n=e[_t];n.destroyNode&&mm(t,e,n,3,null,null),Y4(e)}function yw(t,e){if(Aa(e))return;let n=xe(null);try{e[Ee]&=-129,e[Ee]|=256,e[ur]&&bd(e[ur]),Z4(t,e),Q4(t,e),e[ve].type===1&&e[_t].destroy();let r=e[lo];if(r!==null&&Gr(e[on])){r!==e[on]&&uI(r,e);let i=e[yi];i!==null&&i.detachView(t)}xw(e)}finally{xe(n)}}function Q4(t,e){let n=t.cleanup,r=e[rl];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let a=n[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[n[o+1]];n[o].call(a)}r!==null&&(e[rl]=null);let i=e[ds];if(i!==null){e[ds]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[Ld];if(s!==null){e[Ld]=null;for(let o of s)o.destroy()}}function Z4(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Na)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];et(4,a,c);try{c.call(a)}finally{et(5,a,c)}}else{et(4,i,s);try{s.call(i)}finally{et(5,i,s)}}}}}function X4(t,e,n){return J4(t,e.parent,n)}function J4(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[qr];if(ho(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===ms.None||i===ms.Emulated)return null}return Kr(r,n)}function e3(t,e,n){return n3(t,e,n)}function t3(t,e,n){return t.type&40?Kr(t,n):null}var n3=t3,tN;function dI(t,e,n,r){let i=X4(t,r,e),s=e[_t],o=r.parent||e[wr],a=e3(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)eN(s,i,n[c],a,!1);else eN(s,i,n,a,!1);tN!==void 0&&tN(s,r,e,n,i)}function Wd(t,e){if(e!==null){let n=e.type;if(n&3)return Kr(e,t);if(n&4)return kw(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Wd(t,r);{let i=t[e.index];return Gr(i)?kw(-1,i):Tr(i)}}else{if(n&128)return Wd(t,e.next);if(n&32)return lI(e,t)()||Tr(t[e.index]);{let r=lk(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=oo(t[Ir]);return Wd(i,r)}else return Wd(t,e.next)}}}return null}function lk(t,e){if(e!==null){let r=t[Ir][wr],i=e.projection;return r.projection[i]}return null}function kw(t,e){let n=jn+t+1;if(n<e.length){let r=e[n],i=r[ve].firstChild;if(i!==null)return Wd(r,i)}return e[uo]}function hI(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(o&&e===0&&(a&&fl(Tr(a),r),n.flags|=2),!tI(n))if(c&8)hI(t,e,n.child,r,i,s,!1),dl(e,t,i,a,s);else if(c&32){let l=lI(n,r),d;for(;d=l();)dl(e,t,i,d,s);dl(e,t,i,a,s)}else c&16?r3(t,e,r,n,i,s):dl(e,t,i,a,s);n=o?n.projectionNext:n.next}}function mm(t,e,n,r,i,s){hI(n,r,t.firstChild,e,i,s,!1)}function r3(t,e,n,r,i,s){let o=n[Ir],c=o[wr].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];dl(e,t,i,d,s)}else{let l=c,d=o[on];jN(r)&&(l.flags|=128),hI(t,e,l,d,i,s,!0)}}function i3(t,e,n,r,i){let s=n[uo],o=Tr(n);s!==o&&dl(e,t,r,s,i);for(let a=jn;a<n.length;a++){let c=n[a];mm(c[ve],c,t,e,r,s)}}function s3(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Qr.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Qr.Important),t.setStyle(n,r,i,s))}}function uk(t,e,n,r,i){let s=xa(),o=r&2;try{fo(-1),o&&e.length>an&&ok(t,e,an,!1),et(o?2:0,i,n),n(r,i)}finally{fo(s),et(o?3:1,i,n)}}function ym(t,e,n){h3(t,e,n),(n.flags&64)===64&&f3(t,e,n)}function fI(t,e,n=Kr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function o3(t,e,n,r){let s=r.get(qN,WN)||n===ms.ShadowDom,o=t.selectRootElement(e,s);return a3(o),o}function a3(t){c3(t)}var c3=()=>null;function l3(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function dk(t,e,n,r,i,s){let o=e[ve];if(gI(t,o,e,n,r)){ho(t)&&d3(e,t.index);return}t.type&3&&(n=l3(n)),u3(t,e,n,r,i,s)}function u3(t,e,n,r,i,s){if(t.type&3){let o=Kr(t,e);r=s!=null?s(r,t.value||"",n):r,i.setProperty(o,n,r)}else t.type&12}function d3(t,e){let n=Dr(e,t);n[Ee]&16||(n[Ee]|=64)}function h3(t,e,n){let r=n.directiveStart,i=n.directiveEnd;ho(n)&&W4(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Xg(n,e);let s=n.initialInputs;for(let o=r;o<i;o++){let a=t.data[o],c=Kd(e,t,o,n);if(fl(c,e),s!==null&&y3(e,o-r,c,a,n,s),vi(a)){let l=Dr(n.index,e);l[Sn]=Kd(e,t,o,n)}}}function f3(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=FM();try{fo(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];Ng(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&p3(c,l)}}finally{fo(-1),Ng(o)}}function p3(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function pI(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let s=n[i];M4(e,s.selectors,!1)&&(r??=[],vi(s)?r.unshift(s):r.push(s))}return r}function g3(t,e,n,r,i,s){let o=Kr(t,e);m3(e[_t],o,s,t.value,n,r,i)}function m3(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Md(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function y3(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],l=o[a+1];Nw(r,n,c,l)}}function hk(t,e,n,r,i){let s=an+n,o=e[ve],a=i(o,e,t,r,n);e[s]=a,cl(t,!0);let c=t.type===2;return c?(rk(e[_t],a,t),(IM()===0||sl(t))&&fl(a,e),TM()):fl(a,e),Lg()&&(!c||!tI(t))&&dI(o,e,a,t),t}function fk(t){let e=t;return nw()?RM():(e=e.parent,cl(e,!1)),e}function _3(t,e){let n=t[Ia];if(!n)return;let r;try{r=n.get(Yn,null)}catch{r=null}r?.(e)}function gI(t,e,n,r,i){let s=t.inputs?.[r],o=t.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let l=o[c],d=o[c+1],h=e.data[l];Nw(h,n[l],d,i),a=!0}if(s)for(let c of s){let l=n[c],d=e.data[c];Nw(d,l,r,i),a=!0}return a}function v3(t,e){let n=Dr(e,t),r=n[ve];b3(r,n);let i=n[qr];i!==null&&n[Od]===null&&(n[Od]=GN(i,n[Ia])),et(18),mI(r,n,n[Sn]),et(19,n[Sn])}function b3(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function mI(t,e,n){Pg(e);try{let r=t.viewQuery;r!==null&&Mw(1,r,n);let i=t.template;i!==null&&uk(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[yi]?.finishViewCreation(t),t.staticContentQueries&&KN(t,e),t.staticViewQueries&&Mw(2,t.viewQuery,n);let s=t.components;s!==null&&E3(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Ee]&=-5,Og()}}function E3(t,e){for(let n=0;n<e.length;n++)v3(t,e[n])}function w3(t,e,n,r){let i=xe(null);try{let s=e.tView,a=t[Ee]&4096?4096:16,c=aI(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[lo]=l;let d=t[yi];return d!==null&&(c[yi]=d.createEmbeddedView(s)),mI(s,c,n),c}finally{xe(i)}}function nN(t,e){return!e||e.firstChild===null||jN(t)}var rN=!1,I3=new te("");function Yd(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(Tr(s)),Gr(s)&&pk(s,r);let o=n.type;if(o&8)Yd(t,e,n.child,r);else if(o&32){let a=lI(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=lk(e,n);if(Array.isArray(a))r.push(...a);else{let c=oo(e[Ir]);Yd(c[ve],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function pk(t,e){for(let n=jn;n<t.length;n++){let r=t[n],i=r[ve].firstChild;i!==null&&Yd(r[ve],r,i,e)}t[uo]!==t[qr]&&e.push(t[uo])}function gk(t){if(t[Ca]!==null){for(let e of t[Ca])e.impl.addSequence(e);t[Ca].length=0}}var mk=[];function T3(t){return t[ur]??D3(t)}function D3(t){let e=mk.pop()??Object.create(S3);return e.lView=t,e}function C3(t){t.lView[ur]!==t&&(t.lView=null,mk.push(t))}var S3=be(H({},Lc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{al(t.lView)},consumerOnSignalRead(){this.lView[ur]=this}});function A3(t){let e=t[ur]??Object.create(x3);return e.lView=t,e}var x3=be(H({},Lc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=oo(t.lView);for(;e&&!yk(e[ve]);)e=oo(e);e&&ZE(e)},consumerOnSignalRead(){this.lView[ur]=this}});function yk(t){return t.type!==2}function _k(t){if(t[Ld]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Ld])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[Ee]&8192)}}var R3=100;function yI(t,e=0){let r=t[mi].rendererFactory,i=!1;i||r.begin?.();try{M3(t,e)}finally{i||r.end?.()}}function M3(t,e){let n=iw();try{sw(!0),Pw(t,e);let r=0;for(;Bd(t);){if(r===R3)throw new X(103,!1);r++,Pw(t,1)}}finally{sw(n)}}function vk(t,e){rw(e?Ud.Exhaustive:Ud.OnlyDirtyViews);try{yI(t)}finally{rw(Ud.Off)}}function N3(t,e,n,r){if(Aa(e))return;let i=e[Ee],s=!1,o=!1;Pg(e);let a=!0,c=null,l=null;s||(yk(t)?(l=T3(e),c=jc(l)):Up()===null?(a=!1,l=A3(e),c=jc(l)):e[ur]&&(bd(e[ur]),e[ur]=null));try{QE(e),NM(t.bindingStartIndex),n!==null&&uk(t,e,n,2,r);let d=(i&3)===3;if(!s)if(d){let g=t.preOrderCheckHooks;g!==null&&zg(e,g,null)}else{let g=t.preOrderHooks;g!==null&&Wg(e,g,0,null),gw(e,0)}if(o||k3(e),_k(e),bk(e,0),t.contentQueries!==null&&KN(t,e),!s)if(d){let g=t.contentCheckHooks;g!==null&&zg(e,g)}else{let g=t.contentHooks;g!==null&&Wg(e,g,1),gw(e,1)}O3(t,e);let h=t.components;h!==null&&wk(e,h,0);let p=t.viewQuery;if(p!==null&&Mw(2,p,r),!s)if(d){let g=t.viewCheckHooks;g!==null&&zg(e,g)}else{let g=t.viewHooks;g!==null&&Wg(e,g,2),gw(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Cg]){for(let g of e[Cg])g();e[Cg]=null}s||(gk(e),e[Ee]&=-73)}catch(d){throw s||al(e),d}finally{l!==null&&(_d(l,c),a&&C3(l)),Og()}}function bk(t,e){for(let n=UN(t);n!==null;n=HN(n))for(let r=jn;r<n.length;r++){let i=n[r];Ek(i,e)}}function k3(t){for(let e=UN(t);e!==null;e=HN(e)){if(!(e[Ee]&2))continue;let n=e[Sa];for(let r=0;r<n.length;r++){let i=n[r];ZE(i)}}}function P3(t,e,n){et(18);let r=Dr(e,t);Ek(r,n),et(19,r[Sn])}function Ek(t,e){xg(t)&&Pw(t,e)}function Pw(t,e){let r=t[ve],i=t[Ee],s=t[ur],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&vd(s)),o||=!1,s&&(s.dirty=!1),t[Ee]&=-9217,o)N3(r,t,r.template,t[Sn]);else if(i&8192){let a=xe(null);try{_k(t),bk(t,1);let c=r.components;c!==null&&wk(t,c,1),gk(t)}finally{xe(a)}}}function wk(t,e,n){for(let r=0;r<e.length;r++)P3(t,e[r],n)}function O3(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)fo(~i);else{let s=i,o=n[++r],a=n[++r];OM(o,s);let c=e[s];et(24,c),a(2,c),et(25,c)}}}finally{fo(-1)}}function _I(t,e){let n=iw()?64:1088;for(t[mi].changeDetectionScheduler?.notify(e);t;){t[Ee]|=n;let r=oo(t);if(ol(t)&&!r)return t;t=r}return null}function Ik(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function F3(t,e,n,r=!0){let i=e[ve];if(L3(i,e,t,n),r){let o=kw(n,t),a=e[_t],c=a.parentNode(t[uo]);c!==null&&K4(i,t[wr],a,e,c,o)}let s=e[Od];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Ow(t,e){if(t.length<=jn)return;let n=jn+e,r=t[n];if(r){let i=r[lo];i!==null&&i!==t&&uI(i,r),e>0&&(t[n-1][Er]=r[Er]);let s=Nd(t,jn+e);G4(r[ve],r);let o=s[yi];o!==null&&o.detachView(s[ve]),r[on]=null,r[Er]=null,r[Ee]&=-129}return r}function L3(t,e,n,r){let i=jn+r,s=n.length;r>0&&(n[i-1][Er]=e),r<s-jn?(e[Er]=n[i],LE(n,jn+r,e)):(n.push(e),e[Er]=null),e[on]=n;let o=e[lo];o!==null&&n!==o&&Tk(o,e);let a=e[yi];a!==null&&a.insertView(t),Rg(e),e[Ee]|=128}function Tk(t,e){let n=t[Sa],r=e[on];if(_i(r))t[Ee]|=2;else{let i=r[on][Ir];e[Ir]!==i&&(t[Ee]|=2)}n===null?t[Sa]=[e]:n.push(e)}var po=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[ve];return Yd(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[Sn]}set context(e){this._lView[Sn]=e}get destroyed(){return Aa(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[on];if(Gr(e)){let n=e[Vd],r=n?n.indexOf(this):-1;r>-1&&(Ow(e,r),Nd(n,r))}this._attachedToViewContainer=!1}ck(this._lView[ve],this._lView)}onDestroy(e){XE(this._lView,e)}markForCheck(){_I(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ee]&=-129}reattach(){Rg(this._lView),this._lView[Ee]|=128}detectChanges(){this._lView[Ee]|=1024,yI(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new X(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ol(this._lView),n=this._lView[lo];n!==null&&!e&&uI(n,this._lView),ak(this._lView[ve],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new X(902,!1);this._appRef=e;let n=ol(this._lView),r=this._lView[lo];r!==null&&!n&&Tk(r,this._lView),Rg(this._lView)}};var go=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=V3;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let s=w3(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new po(s)}}return t})();function V3(){return vI(cn(),Fe())}function vI(t,e){return t.type&4?new go(e,t,ml(t,e)):null}function bI(t,e,n,r,i){let s=t.data[e];if(s===null)s=j3(t,e,n,r,i),PM()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=xM();s.injectorIndex=o===null?-1:o.injectorIndex}return cl(s,!0),s}function j3(t,e,n,r,i){let s=tw(),o=nw(),a=o?s:s&&s.parent,c=t.data[e]=U3(t,a,n,e,r,i);return B3(t,c,s,o),c}function B3(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function U3(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return CM()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Ufe=new RegExp(`^(\\d+)*(${g4}|${p4})*(.*)`);var H3=()=>null;function iN(t,e){return H3(t,e)}var Dk=class{},_m=class{},Fw=class{resolveComponentFactory(e){throw new X(917,!1)}},eh=class{static NULL=new Fw},ka=class{},hr=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>$3()}return t})();function $3(){let t=Fe(),e=cn(),n=Dr(e.index,t);return(_i(n)?n:t)[_t]}var Ck=(()=>{class t{static \u0275prov=ie({token:t,providedIn:"root",factory:()=>null})}return t})();var Gg={},Lw=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Gg,r);return i!==Gg||n===Gg?i:this.parentInjector.get(e,n,r)}};function sN(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=DE(i,a);else if(s==2){let c=a,l=e[++o];r=DE(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Z(t,e=0){let n=Fe();if(n===null)return ae(t,e);let r=cn();return FN(r,n,yn(t),e)}function EI(){let t="invalid";throw new Error(t)}function Sk(t,e,n,r,i){let s=r===null?null:{"":-1},o=i(t,n);if(o!==null){let a=o,c=null,l=null;for(let d of o)if(d.resolveHostDirectives!==null){[a,c,l]=d.resolveHostDirectives(o);break}q3(t,e,n,a,s,c,l)}s!==null&&r!==null&&z3(n,r,s)}function z3(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new X(-301,!1);r.push(e[i],s)}}function W3(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function q3(t,e,n,r,i,s,o){let a=r.length,c=!1;for(let p=0;p<a;p++){let g=r[p];!c&&vi(g)&&(c=!0,W3(t,n,p)),Sw(Xg(n,e),t,g.type)}X3(n,t.data.length,a);for(let p=0;p<a;p++){let g=r[p];g.providersResolver&&g.providersResolver(g)}let l=!1,d=!1,h=sk(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let p=0;p<a;p++){let g=r[p];if(n.mergedAttrs=Gd(n.mergedAttrs,g.hostAttrs),K3(t,n,e,h,g),Z3(h,g,i),o!==null&&o.has(g)){let[S,C]=o.get(g);n.directiveToIndex.set(g.type,[h,S+n.directiveStart,C+n.directiveStart])}else(s===null||!s.has(g))&&n.directiveToIndex.set(g.type,h);g.contentQueries!==null&&(n.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(n.flags|=64);let v=g.type.prototype;!l&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!d&&(v.ngOnChanges||v.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),d=!0),h++}G3(t,n,s)}function G3(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))oN(0,e,i,r),oN(1,e,i,r),cN(e,r,!1);else{let s=n.get(i);aN(0,e,s,r),aN(1,e,s,r),cN(e,r,!0)}}}function oN(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;t===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),Ak(e,s)}}function aN(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),Ak(e,o)}}function Ak(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function cN(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:s}=t;if(r===null||!n&&i===null||n&&s===null||sI(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&i.hasOwnProperty(c)){let l=i[c];for(let d of l)if(d===e){o??=[],o.push(c,r[a+1]);break}}else if(n&&s.hasOwnProperty(c)){let l=s[c];for(let d=0;d<l.length;d+=2)if(l[d]===e){o??=[],o.push(l[d+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(o)}function K3(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=so(i.type,!0)),o=new Na(s,vi(i),Z,null);t.blueprint[r]=o,n[r]=o,Y3(t,e,r,sk(t,n,i.hostVars,Ii),i)}function Y3(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;Q3(o)!=a&&o.push(a),o.push(n,r,s)}}function Q3(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function Z3(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;vi(e)&&(n[""]=t)}}function X3(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function wI(t,e,n,r,i,s,o,a){let c=e[ve],l=c.consts,d=jd(l,o),h=bI(c,t,n,r,d);return s&&Sk(c,e,h,jd(l,a),i),h.mergedAttrs=Gd(h.mergedAttrs,h.attrs),h.attrs!==null&&sN(h,h.attrs,!1),h.mergedAttrs!==null&&sN(h,h.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,h),h}function II(t,e){SN(t,e),GE(e)&&t.queries.elementEnd(e)}function TI(t){return vm(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function xk(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function vm(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function DI(t,e,n){return t[e]=n}function J3(t,e){return t[e]}function mo(t,e,n){if(n===Ii)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function e6(t,e,n,r){let i=mo(t,e,n);return mo(t,e+1,r)||i}function _w(t,e,n){return function r(i){let s=ho(t)?Dr(t.index,e):e;_I(s,5);let o=e[Sn],a=lN(e,o,n,i),c=r.__ngNextListenerFn__;for(;c;)a=lN(e,o,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function lN(t,e,n,r){let i=xe(null);try{return et(6,e,n),n(r)!==!1}catch(s){return _3(t,s),!1}finally{et(7,e,n),xe(i)}}function t6(t,e,n,r,i,s,o,a){let c=sl(t),l=!1,d=null;if(!r&&c&&(d=n6(e,n,s,t.index)),d!==null){let h=d.__ngLastListenerFn__||d;h.__ngNextListenerFn__=o,d.__ngLastListenerFn__=o,l=!0}else{let h=Kr(t,n),p=r?r(h):h;y4(n,p,s,a);let g=i.listen(p,s,a),v=r?S=>r(Tr(S[t.index])):t.index;Rk(v,e,n,s,a,g,!1)}return l}function n6(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[rl],c=i[s+2];return a&&a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function Rk(t,e,n,r,i,s,o){let a=e.firstCreatePass?ew(e):null,c=JE(n),l=c.length;c.push(i,s),a&&a.push(r,t,l,(l+1)*(o?-1:1))}function uN(t,e,n,r,i,s){let o=e[n],a=e[ve],l=a.data[n].outputs[r],h=o[l].subscribe(s);Rk(t.index,a,e,i,s,h,!0)}var Vw=Symbol("BINDING");var nm=class extends eh{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=gs(e);return new Pa(n,this.ngModule)}};function r6(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],s={propName:n,templateName:e,isSignal:(r&gm.SignalBased)!==0};return i&&(s.transform=i),s})}function i6(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function s6(t,e,n){let r=e instanceof kt?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new Lw(n,r):n}function o6(t){let e=t.get(ka,null);if(e===null)throw new X(407,!1);let n=t.get(Ck,null),r=t.get(fs,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function a6(t,e){let n=Mk(t);return tk(e,n,n==="svg"?mM:n==="math"?yM:null)}function Mk(t){return(t.selectors[0][0]||"div").toLowerCase()}var Pa=class extends _m{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=r6(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=i6(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=O4(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,s,o){et(22);let a=xe(null);try{let c=this.componentDef,l=c6(r,c,o,s),d=s6(c,i||this.ngModule,e),h=o6(d),p=h.rendererFactory.createRenderer(null,c),g=r?o3(p,r,c.encapsulation,d):a6(c,p),v=o?.some(dN)||s?.some(k=>typeof k!="function"&&k.bindings.some(dN)),S=aI(null,l,null,512|ik(c),null,null,h,p,d,null,GN(g,d,!0));S[an]=g,Pg(S);let C=null;try{let k=wI(an,S,2,"#host",()=>l.directiveRegistry,!0,0);g&&(rk(p,g,k),fl(g,S)),ym(l,S,k),nI(l,k,S),II(l,k),n!==void 0&&u6(k,this.ngContentSelectors,n),C=Dr(k.index,S),S[Sn]=C[Sn],mI(l,S,null)}catch(k){throw C!==null&&xw(C),xw(S),k}finally{et(23),Og()}return new rm(this.componentType,S,!!v)}finally{xe(a)}}};function c6(t,e,n,r){let i=t?["ng-version","20.2.3"]:F4(e.selectors[0]),s=null,o=null,a=0;if(n)for(let d of n)a+=d[Vw].requiredVars,d.create&&(d.targetIdx=0,(s??=[]).push(d)),d.update&&(d.targetIdx=0,(o??=[]).push(d));if(r)for(let d=0;d<r.length;d++){let h=r[d];if(typeof h!="function")for(let p of h.bindings){a+=p[Vw].requiredVars;let g=d+1;p.create&&(p.targetIdx=g,(s??=[]).push(p)),p.update&&(p.targetIdx=g,(o??=[]).push(p))}}let c=[e];if(r)for(let d of r){let h=typeof d=="function"?d:d.type,p=UE(h);c.push(p)}return oI(0,null,l6(s,o),1,a,c,null,null,null,[i],null)}function l6(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function dN(t){let e=t[Vw].kind;return e==="input"||e==="twoWay"}var rm=class extends Dk{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Sg(n[ve],an),this.location=ml(this._tNode,n),this.instance=Dr(this._tNode.index,n)[Sn],this.hostView=this.changeDetectorRef=new po(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,s=gI(r,i[ve],i,e,n);this.previousInputValues.set(e,n);let o=Dr(r.index,i);_I(o,1)}get injector(){return new Ma(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function u6(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null&&s.length?Array.from(s):null)}}var _s=(()=>{class t{static __NG_ELEMENT_ID__=d6}return t})();function d6(){let t=cn();return kk(t,Fe())}var h6=_s,Nk=class extends h6{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ml(this._hostTNode,this._hostLView)}get injector(){return new Ma(this._hostTNode,this._hostLView)}get parentInjector(){let e=Zw(this._hostTNode,this._hostLView);if(RN(e)){let n=Qg(e,this._hostLView),r=Yg(e),i=n[ve].data[r+8];return new Ma(i,n)}else return new Ma(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=hN(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-jn}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=iN(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,nN(this._hostTNode,o)),a}createComponent(e,n,r,i,s,o,a){let c=e&&!Hz(e),l;if(c)l=n;else{let C=n||{};l=C.index,r=C.injector,i=C.projectableNodes,s=C.environmentInjector||C.ngModuleRef,o=C.directives,a=C.bindings}let d=c?e:new Pa(gs(e)),h=r||this.parentInjector;if(!s&&d.ngModule==null){let k=(c?h:this.parentInjector).get(kt,null);k&&(s=k)}let p=gs(d.componentType??{}),g=iN(this._lContainer,p?.id??null),v=g?.firstChild??null,S=d.create(h,i,v,s,o,a);return this.insertImpl(S.hostView,l,nN(this._hostTNode,g)),S}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(vM(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[on],l=new Nk(c,c[wr],c[on]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return F3(o,i,s,r),e.attachToViewContainerRef(),LE(vw(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=hN(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Ow(this._lContainer,n);r&&(Nd(vw(this._lContainer),n),ck(r[ve],r))}detach(e){let n=this._adjustIndex(e,-1),r=Ow(this._lContainer,n);return r&&Nd(vw(this._lContainer),n)!=null?new po(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function hN(t){return t[Vd]}function vw(t){return t[Vd]||(t[Vd]=[])}function kk(t,e){let n,r=e[t.index];return Gr(r)?n=r:(n=Ik(r,e,null,t),e[t.index]=n,cI(e,n)),p6(n,e,t,r),new Nk(n,t,e)}function f6(t,e){let n=t[_t],r=n.createComment(""),i=Kr(e,t),s=n.parentNode(i);return tm(n,s,r,n.nextSibling(i),!1),r}var p6=y6,g6=()=>!1;function m6(t,e,n){return g6(t,e,n)}function y6(t,e,n,r){if(t[uo])return;let i;n.type&8?i=Tr(r):i=f6(e,n),t[uo]=i}var jw=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Bw=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let o=n.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)CI(e,n).matches!==null&&this.queries[n].setDirty()}},Uw=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=D6(e):this.predicate=e}},Hw=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},$w=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,n,_6(n,s)),this.matchTNodeWithReadOption(e,n,qg(n,e,s,!1,!1))}else r===go?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,qg(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Zt||i===_s||i===go&&n.type&4)this.addMatch(n.index,-2);else{let s=qg(n,e,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function _6(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function v6(t,e){return t.type&11?ml(t,e):t.type&4?vI(t,e):null}function b6(t,e,n,r){return n===-1?v6(e,t):n===-2?E6(t,e,r):Kd(t,t[ve],n,e)}function E6(t,e,n){if(n===Zt)return ml(e,t);if(n===go)return vI(e,t);if(n===_s)return kk(e,t)}function Pk(t,e,n,r){let i=e[yi].queries[r];if(i.matches===null){let s=t.data,o=n.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let d=s[l];a.push(b6(e,d,o[c+1],n.metadata.read))}}i.matches=a}return i.matches}function zw(t,e,n,r){let i=t.queries.getByIndex(n),s=i.matches;if(s!==null){let o=Pk(t,e,i,n);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let l=s[a+1],d=e[-c];for(let h=jn;h<d.length;h++){let p=d[h];p[lo]===p[on]&&zw(p[ve],p,l,r)}if(d[Sa]!==null){let h=d[Sa];for(let p=0;p<h.length;p++){let g=h[p];zw(g[ve],g,l,r)}}}}}return r}function w6(t,e){return t[yi].queries[e].queryList}function I6(t,e,n){let r=new Jg((n&4)===4);return wM(t,e,r,r.destroy),(e[yi]??=new Bw).queries.push(new jw(r))-1}function T6(t,e,n,r){let i=_n();if(i.firstCreatePass){let s=cn();C6(i,new Uw(e,n,r),s.index),S6(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return I6(i,Fe(),n)}function D6(t){return t.split(",").map(e=>e.trim())}function C6(t,e,n){t.queries===null&&(t.queries=new Hw),t.queries.track(new $w(e,n))}function S6(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function CI(t,e){return t.queries.getByIndex(e)}function A6(t,e){let n=t[ve],r=CI(n,e);return r.crossesNgTemplate?zw(n,t,e,[]):Pk(n,t,r,e)}var fN=new Set;function yl(t){fN.has(t)||(fN.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Oa=class{},bm=class{};var im=class extends Oa{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new nm(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let s=BE(e);this._bootstrapComponents=JN(s.bootstrap),this._r3Injector=lw(e,n,[{provide:Oa,useValue:this},{provide:eh,useValue:this.componentFactoryResolver},...r],hs(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},sm=class extends bm{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new im(this.moduleType,e,[])}};var Qd=class extends Oa{injector;componentFactoryResolver=new nm(this);instance=null;constructor(e){super();let n=new ba([...e.providers,{provide:Oa,useValue:this},{provide:eh,useValue:this.componentFactoryResolver}],e.parent||Pd(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function _l(t,e,n=null){return new Qd({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var x6=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=HE(!1,n.type),i=r.length>0?_l([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ie({token:t,providedIn:"environment",factory:()=>new t(ae(kt))})}return t})();function Bn(t){return gl(()=>{let e=Ok(t),n=be(H({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Xw.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(x6).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ms.Emulated,styles:t.styles||ar,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&yl("NgStandalone"),Fk(n);let r=t.dependencies;return n.directiveDefs=pN(r,R6),n.pipeDefs=pN(r,lM),n.id=k6(n),n})}function R6(t){return gs(t)||UE(t)}function Ti(t){return gl(()=>({type:t.type,bootstrap:t.bootstrap||ar,declarations:t.declarations||ar,imports:t.imports||ar,exports:t.exports||ar,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function M6(t,e){if(t==null)return ao;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a,c;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,c=i[3]||null):(s=i,o=i,a=gm.None,c=null),n[s]=[r,a,c],e[s]=o}return n}function N6(t){if(t==null)return ao;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Ze(t){return gl(()=>{let e=Ok(t);return Fk(e),e})}function th(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Ok(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||ao,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||ar,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:M6(t.inputs,e),outputs:N6(t.outputs),debugInfo:null}}function Fk(t){t.features?.forEach(e=>e(t))}function pN(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let s=e(i);s!==null&&r.push(s)}return r}:null}function k6(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function P6(t){return Object.getPrototypeOf(t.prototype).constructor}function Qn(t){let e=P6(t.type),n=!0,r=[t];for(;e;){let i;if(vi(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new X(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=bw(t.inputs),o.declaredInputs=bw(t.declaredInputs),o.outputs=bw(t.outputs);let a=i.hostBindings;a&&j6(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&L6(t,c),l&&V6(t,l),O6(t,i),JR(t.outputs,i.outputs),vi(i)&&i.data.animation){let d=t.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Qn&&(n=!1)}}e=Object.getPrototypeOf(e)}F6(r)}function O6(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function F6(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Gd(i.hostAttrs,n=Gd(n,i.hostAttrs))}}function bw(t){return t===ao?{}:t===ar?[]:t}function L6(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function V6(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function j6(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function B6(t,e,n,r,i,s,o,a){if(n.firstCreatePass){t.mergedAttrs=Gd(t.mergedAttrs,t.attrs);let d=t.tView=oI(2,t,i,s,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),d.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),cl(t,!1);let c=H6(n,e,t,r);Lg()&&dI(n,e,c,t),fl(c,e);let l=Ik(c,e,c,t);e[r+an]=l,cI(e,l),m6(l,t,e)}function U6(t,e,n,r,i,s,o,a,c,l,d){let h=n+an,p;return e.firstCreatePass?(p=bI(e,h,4,o||null,a||null),Mg()&&Sk(e,t,p,jd(e.consts,l),pI),SN(e,p)):p=e.data[h],B6(p,t,e,n,r,i,s,c),sl(p)&&ym(e,t,p),l!=null&&fI(t,p,d),p}function ut(t,e,n,r,i,s,o,a){let c=Fe(),l=_n(),d=jd(l.consts,s);return U6(c,l,t,e,n,r,i,d,void 0,o,a),ut}var H6=$6;function $6(t,e,n,r){return $d(!0),e[_t].createComment("")}var Em=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Em||{}),La=new te(""),Lk=!1,Ww=class extends Mt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,pM()&&(this.destroyRef=j(bi,{optional:!0})??void 0,this.pendingTasks=j(Ei,{optional:!0})??void 0)}emit(e){let n=xe(null);try{super.next(e)}finally{xe(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof wt&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},pt=Ww;function Vk(t){let e,n;function r(){t=zd;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function gN(t){return queueMicrotask(()=>t()),()=>{t=zd}}var SI="isAngularZone",om=SI+"_ID",z6=0,Le=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new pt(!1);onMicrotaskEmpty=new pt(!1);onStable=new pt(!1);onError=new pt(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=Lk}=e;if(typeof Zone>"u")throw new X(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,G6(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(SI)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new X(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new X(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,W6,zd,zd);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},W6={};function AI(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function q6(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Vk(()=>{t.callbackScheduled=!1,qw(t),t.isCheckStableRunning=!0,AI(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),qw(t)}function G6(t){let e=()=>{q6(t)},n=z6++;t._inner=t._inner.fork({name:"angular",properties:{[SI]:!0,[om]:n,[om+n]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(K6(c))return r.invokeTask(s,o,a,c);try{return mN(t),r.invokeTask(s,o,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),yN(t)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return mN(t),r.invoke(s,o,a,c,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!Y6(c)&&e(),yN(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,qw(t),AI(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function qw(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function mN(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function yN(t){t._nesting--,AI(t)}var am=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new pt;onMicrotaskEmpty=new pt;onStable=new pt;onError=new pt;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function K6(t){return jk(t,"__ignore_ng_zone__")}function Y6(t){return jk(t,"__scheduler_tick__")}function jk(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var xI=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=ie({token:t,providedIn:"root",factory:()=>new t})}return t})(),Bk=[0,1,2,3],Uk=(()=>{class t{ngZone=j(Le);scheduler=j(fs);errorHandler=j(zr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){j(La,{optional:!0})}execute(){let n=this.sequences.size>0;n&&et(16),this.executing=!0;for(let r of Bk)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[r];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&et(17)}register(n){let{view:r}=n;r!==void 0?((r[Ca]??=[]).push(n),al(r),r[Ee]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Em.AFTER_NEXT_RENDER,n):n()}static \u0275prov=ie({token:t,providedIn:"root",factory:()=>new t})}return t})(),cm=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,s,o=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Ca];e&&(this.view[Ca]=e.filter(n=>n!==this))}};function nh(t,e){let n=e?.injector??j(ft);return yl("NgAfterNextRender"),Z6(t,n,e,!0)}function Q6(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function Z6(t,e,n,r){let i=e.get(xI);i.impl??=e.get(Uk);let s=e.get(La,null,{optional:!0}),o=n?.manualCleanup!==!0?e.get(bi):null,a=e.get(Bg,null,{optional:!0}),c=new cm(i.impl,Q6(t),a?.view,r,o,s?.snapshot(null));return i.impl.register(c),c}var RI=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var MI=new te("");function yo(t){return!!t&&typeof t.then=="function"}function NI(t){return!!t&&typeof t.subscribe=="function"}var kI=new te("");function wm(t){return lr([{provide:kI,multi:!0,useValue:t}])}var PI=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=j(kI,{optional:!0})??[];injector=j(ft);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=Lt(this.injector,i);if(yo(s))n.push(s);else if(NI(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),rh=new te("");function Hk(){qb(()=>{let t="";throw new X(600,t)})}function $k(t){return t.isBoundToModule}var X6=10;var vs=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=j(Yn);afterRenderManager=j(xI);zonelessEnabled=j(jg);rootEffectScheduler=j(pw);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Mt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=j(Ei);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Be(n=>!n))}constructor(){j(La,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=j(kt);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=ft.NULL){return this._injector.get(Le).run(()=>{et(10);let o=n instanceof _m;if(!this._injector.get(PI).done){let v="";throw new X(405,v)}let c;o?c=n:c=this._injector.get(eh).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let l=$k(c)?void 0:this._injector.get(Oa),d=r||c.selector,h=c.create(i,[],d,l),p=h.location.nativeElement,g=h.injector.get(MI,null);return g?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),qd(this.components,h),g?.unregisterApplication(p)}),this._loadComponent(h),et(11,h),h})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){et(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Em.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new X(101,!1);let n=xe(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,xe(n),this.afterTick.next(),et(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ka,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<X6;)et(14),this.synchronizeOnce(),et(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Bd(i))continue;let s=r&&!this.zonelessEnabled?0:1;yI(i,s),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Bd(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;qd(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(rh,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>qd(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new X(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function qd(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Va(t,e,n,r){let i=Fe(),s=Hd();if(mo(i,s,e)){let o=_n(),a=Fg();g3(a,i,t,e,n,r)}return Va}var OI=new te("",{providedIn:"root",factory:()=>!1}),FI=new te("",{providedIn:"root",factory:()=>J6}),J6=4e3;var Kfe=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function le(t,e,n){let r=Fe(),i=Hd();if(mo(r,i,e)){let s=_n(),o=Fg();dk(o,r,t,e,r[_t],n)}return le}function _N(t,e,n,r,i){gI(e,t,n,i?"class":"style",r)}function A(t,e,n,r){let i=Fe(),s=i[ve],o=t+an,a=s.firstCreatePass?wI(o,i,2,e,pI,Mg(),n,r):s.data[o];if(hk(a,i,t,e,e5),sl(a)){let c=i[ve];ym(c,i,a),nI(c,a,i)}return r!=null&&fI(i,a),A}function x(){let t=_n(),e=cn(),n=fk(e);return t.firstCreatePass&&II(t,n),SM(n)&&AM(),DM(),n.classesWithoutHost!=null&&Kz(n)&&_N(t,n,Fe(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&Yz(n)&&_N(t,n,Fe(),n.stylesWithoutHost,!1),x}function ne(t,e,n,r){return A(t,e,n,r),x(),ne}var e5=(t,e,n,r,i)=>($d(!0),tk(e[_t],r,HM()));function bs(t,e,n){let r=Fe(),i=r[ve],s=t+an,o=i.firstCreatePass?wI(s,r,8,"ng-container",pI,Mg(),e,n):i.data[s];if(hk(o,r,t,"ng-container",t5),sl(o)){let a=r[ve];ym(a,r,o),nI(a,o,r)}return n!=null&&fI(r,o),bs}function Es(){let t=_n(),e=cn(),n=fk(e);return t.firstCreatePass&&II(t,n),Es}var t5=(t,e,n,r,i)=>($d(!0),j4(e[_t],""));function ws(){return Fe()}var Ra=void 0;function n5(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var r5=["en",[["a","p"],["AM","PM"],Ra],[["AM","PM"],Ra,Ra],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ra,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ra,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ra,"{1} 'at' {0}",Ra],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",n5],Ew={};function Zn(t){let e=i5(t),n=vN(e);if(n)return n;let r=e.split("-")[0];if(n=vN(r),n)return n;if(r==="en")return r5;throw new X(701,!1)}function vN(t){return t in Ew||(Ew[t]=ps.ng&&ps.ng.common&&ps.ng.common.locales&&ps.ng.common.locales[t]),Ew[t]}var Tt=(function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t})(Tt||{});function i5(t){return t.toLowerCase().replace(/_/g,"-")}var ih="en-US";var s5=ih;function zk(t){typeof t=="string"&&(s5=t.toLowerCase().replace(/_/g,"-"))}function qe(t,e,n){let r=Fe(),i=_n(),s=cn();return Wk(i,r,r[_t],s,t,e,n),qe}function Wk(t,e,n,r,i,s,o){let a=!0,c=null;if((r.type&3||o)&&(c??=_w(r,e,s),t6(r,t,e,o,n,i,s,c)&&(a=!1)),a){let l=r.outputs?.[i],d=r.hostDirectiveOutputs?.[i];if(d&&d.length)for(let h=0;h<d.length;h+=2){let p=d[h],g=d[h+1];c??=_w(r,e,s),uN(r,e,p,g,i,c)}if(l&&l.length)for(let h of l)c??=_w(r,e,s),uN(r,e,h,i,i,c)}}function Ve(t=1){return UM(t)}function LI(t,e,n,r){T6(t,e,n,r)}function VI(t){let e=Fe(),n=_n(),r=ow();kg(r+1);let i=CI(n,r);if(t.dirty&&_M(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let s=A6(e,r);t.reset(s,c4),t.notifyOnChanges()}return!0}return!1}function jI(){return w6(Fe(),ow())}function BI(t){let e=MM();return Ag(e,an+t)}function $g(t,e){return t<<17|e<<2}function Fa(t){return t>>17&32767}function o5(t){return(t&2)==2}function a5(t,e){return t&131071|e<<17}function Gw(t){return t|2}function pl(t){return(t&131068)>>2}function ww(t,e){return t&-131069|e<<2}function c5(t){return(t&1)===1}function Kw(t){return t|1}function l5(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Fa(o),c=pl(o);t[r]=n;let l=!1,d;if(Array.isArray(n)){let h=n;d=h[1],(d===null||nl(h,d)>0)&&(l=!0)}else d=n;if(i)if(c!==0){let p=Fa(t[a+1]);t[r+1]=$g(p,a),p!==0&&(t[p+1]=ww(t[p+1],r)),t[a+1]=a5(t[a+1],r)}else t[r+1]=$g(a,0),a!==0&&(t[a+1]=ww(t[a+1],r)),a=r;else t[r+1]=$g(c,0),a===0?a=r:t[c+1]=ww(t[c+1],r),c=r;l&&(t[r+1]=Gw(t[r+1])),bN(t,d,r,!0),bN(t,d,r,!1),u5(e,d,t,r,s),o=$g(a,c),s?e.classBindings=o:e.styleBindings=o}function u5(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&nl(s,e)>=0&&(n[r+1]=Kw(n[r+1]))}function bN(t,e,n,r){let i=t[n+1],s=e===null,o=r?Fa(i):pl(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],l=t[o+1];d5(c,e)&&(a=!0,t[o+1]=r?Kw(l):Gw(l)),o=r?Fa(l):pl(l)}a&&(t[n+1]=r?Gw(i):Kw(i))}function d5(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?nl(t,e)>=0:!1}function Im(t,e,n){return qk(t,e,n,!1),Im}function sh(t,e){return qk(t,e,null,!0),sh}function qk(t,e,n,r){let i=Fe(),s=_n(),o=kM(2);if(s.firstUpdatePass&&f5(s,t,o,r),e!==Ii&&mo(i,o,e)){let a=s.data[xa()];_5(s,a,i,i[_t],t,i[o+1]=v5(e,n),r,o)}}function h5(t,e){return e>=t.expandoStartIndex}function f5(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[xa()],o=h5(t,n);b5(s,r)&&e===null&&!o&&(e=!1),e=p5(i,s,e,r),l5(i,s,e,n,o,r)}}function p5(t,e,n,r){let i=LM(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Iw(null,t,e,n,r),n=Zd(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Iw(i,t,e,n,r),s===null){let c=g5(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Iw(null,t,e,c[1],r),c=Zd(c,e.attrs,r),m5(t,e,r,c))}else s=y5(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function g5(t,e,n){let r=n?e.classBindings:e.styleBindings;if(pl(r)!==0)return t[Fa(r)]}function m5(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Fa(i)]=r}function y5(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Zd(r,o,n)}return Zd(r,e.attrs,n)}function Iw(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Zd(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Zd(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),cM(t,o,n?!0:e[++s]))}return t===void 0?null:t}function _5(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],d=c5(l)?EN(c,e,n,i,pl(l),o):void 0;if(!lm(d)){lm(s)||o5(l)&&(s=EN(c,null,n,i,a,o));let h=KE(xa(),n);s3(r,o,h,i,s)}}function EN(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),d=l?c[1]:c,h=d===null,p=n[i+1];p===Ii&&(p=h?ar:void 0);let g=h?Dg(p,r):d===r?p:void 0;if(l&&!lm(g)&&(g=Dg(c,r)),lm(g)&&(a=g,o))return a;let v=t[i+1];i=o?Fa(v):pl(v)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Dg(c,r))}return a}function lm(t){return t!==void 0}function v5(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=hs(Jd(t)))),t}function b5(t,e){return(t.flags&(e?8:16))!==0}function P(t,e=""){let n=Fe(),r=_n(),i=t+an,s=r.firstCreatePass?bI(r,i,1,e,null):r.data[i],o=E5(r,n,s,e,t);n[i]=o,Lg()&&dI(r,n,o,s),cl(s,!1)}var E5=(t,e,n,r,i)=>($d(!0),L4(e[_t],r));function w5(t,e,n,r=""){return mo(t,Hd(),n)?e+Md(n)+r:Ii}function Ar(t){return tt("",t),Ar}function tt(t,e,n){let r=Fe(),i=w5(r,t,e,n);return i!==Ii&&I5(r,xa(),i),tt}function I5(t,e,n){let r=KE(e,t);V4(t[_t],r,n)}function Un(t,e,n){dw(e)&&(e=e());let r=Fe(),i=Hd();if(mo(r,i,e)){let s=_n(),o=Fg();dk(o,r,t,e,r[_t],n)}return Un}function Xn(t,e){let n=dw(t);return n&&t.set(e),n}function Hn(t,e){let n=Fe(),r=_n(),i=cn();return Wk(r,n,n[_t],i,t,e),Hn}function T5(t,e,n){let r=_n();if(r.firstCreatePass){let i=vi(t);Yw(n,r.data,r.blueprint,i,!0),Yw(e,r.data,r.blueprint,i,!1)}}function Yw(t,e,n,r,i){if(t=yn(t),Array.isArray(t))for(let s=0;s<t.length;s++)Yw(t[s],e,n,r,i);else{let s=_n(),o=Fe(),a=cn(),c=va(t)?t:yn(t.provide),l=zE(t),d=a.providerIndexes&1048575,h=a.directiveStart,p=a.providerIndexes>>20;if(va(t)||!t.multi){let g=new Na(l,i,Z,null),v=Dw(c,e,i?d:d+p,h);v===-1?(Sw(Xg(a,o),s,c),Tw(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(g),o.push(g)):(n[v]=g,o[v]=g)}else{let g=Dw(c,e,d+p,h),v=Dw(c,e,d,d+p),S=g>=0&&n[g],C=v>=0&&n[v];if(i&&!C||!i&&!S){Sw(Xg(a,o),s,c);let k=S5(i?C5:D5,n.length,i,r,l,t);!i&&C&&(n[v].providerFactory=k),Tw(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(k),o.push(k)}else{let k=Gk(n[i?v:g],l,!i&&r);Tw(s,t,g>-1?g:v,k)}!i&&r&&C&&n[v].componentProviders++}}}function Tw(t,e,n,r){let i=va(e),s=fM(e);if(i||s){let c=(s?yn(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(n);d===-1?l.push(n,[r,c]):l[d+1].push(r,c)}else l.push(n,c)}}}function Gk(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Dw(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function D5(t,e,n,r,i){return Qw(this.multi,[])}function C5(t,e,n,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Kd(r,r[ve],this.providerFactory.index,i);o=c.slice(0,a),Qw(s,o);for(let l=a;l<c.length;l++)o.push(c[l])}else o=[],Qw(s,o);return o}function Qw(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function S5(t,e,n,r,i,s){let o=new Na(t,n,Z,null);return o.multi=[],o.index=e,o.componentProviders=0,Gk(o,i,r&&!n),o}function Di(t,e=[]){return n=>{n.providersResolver=(r,i)=>T5(r,i?i(t):t,e)}}function oh(t,e,n){let r=ll()+t,i=Fe();return i[r]===Ii?DI(i,r,n?e.call(n):e()):J3(i,r)}function ah(t,e,n,r){return Yk(Fe(),ll(),t,e,n,r)}function Xr(t,e,n,r,i){return Qk(Fe(),ll(),t,e,n,r,i)}function Kk(t,e){let n=t[e];return n===Ii?void 0:n}function Yk(t,e,n,r,i,s){let o=e+n;return mo(t,o,i)?DI(t,o+1,s?r.call(s,i):r(i)):Kk(t,o+1)}function Qk(t,e,n,r,i,s,o){let a=e+n;return e6(t,a,i,s)?DI(t,a+2,o?r.call(o,i,s):r(i,s)):Kk(t,a+2)}function Dt(t,e){let n=_n(),r,i=t+an;n.firstCreatePass?(r=A5(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=so(r.type,!0)),o,a=Vn(Z);try{let c=Zg(!1),l=s();return Zg(c),YE(n,Fe(),i,l),l}finally{Vn(a)}}function A5(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Ci(t,e,n){let r=t+an,i=Fe(),s=Ag(i,r);return Zk(i,r)?Yk(i,ll(),e,s.transform,n,s):s.transform(n)}function An(t,e,n,r){let i=t+an,s=Fe(),o=Ag(s,i);return Zk(s,i)?Qk(s,ll(),e,o.transform,n,r,o):o.transform(n,r)}function Zk(t,e){return t[ve].data[e].pure}var um=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},UI=(()=>{class t{compileModuleSync(n){return new sm(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=BE(n),s=JN(i.declarations).reduce((o,a)=>{let c=gs(a);return c&&o.push(new Pa(c)),o},[]);return new um(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var x5=(()=>{class t{zone=j(Le);changeDetectionScheduler=j(fs);applicationRef=j(vs);applicationErrorHandler=j(Yn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Xk({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Le(be(H({},Jk()),{scheduleInRootZone:n})),[{provide:Le,useFactory:t},{provide:co,multi:!0,useFactory:()=>{let r=j(x5,{optional:!0});return()=>r.initialize()}},{provide:co,multi:!0,useFactory:()=>{let r=j(R5);return()=>{r.initialize()}}},e===!0?{provide:hw,useValue:!0}:[],{provide:fw,useValue:n??Lk},{provide:Yn,useFactory:()=>{let r=j(Le),i=j(kt),s;return o=>{r.runOutsideAngular(()=>{i.destroyed&&!s?setTimeout(()=>{throw o}):(s??=i.get(zr),s.handleError(o))})}}}]}function Jk(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var R5=(()=>{class t{subscription=new wt;initialized=!1;zone=j(Le);pendingTasks=j(Ei);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Le.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Le.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var eP=(()=>{class t{applicationErrorHandler=j(Yn);appRef=j(vs);taskService=j(Ei);ngZone=j(Le);zonelessEnabled=j(jg);tracing=j(La,{optional:!0});disableScheduling=j(hw,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new wt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(om):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(j(fw,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof am||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?gN:Vk;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(om+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,gN(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function M5(){return typeof $localize<"u"&&$localize.locale||ih}var vl=new te("",{providedIn:"root",factory:()=>j(vl,{optional:!0,skipSelf:!0})||M5()});function ln(t){return QR(t)}function bl(t,e){return zp(t,e?.equal)}var tP=class{[Cn];constructor(e){this[Cn]=e}destroy(){this[Cn].destroy()}};var aP=Symbol("InputSignalNode#UNSET"),$5=be(H({},Wp),{transformFn:void 0,applyValueToInputSignal(t,e){Uc(t,e)}});function cP(t,e){let n=Object.create($5);n.value=t,n.transformFn=e?.transform;function r(){if(Vc(n),n.value===aP){let i=null;throw new X(-950,i)}return n.value}return r[Cn]=n,r}var Dm=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Xd(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},z5=new te("");z5.__NG_ELEMENT_ID__=t=>{let e=cn();if(e===null)throw new X(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new X(204,!1)};function nP(t,e){return cP(t,e)}function W5(t){return cP(aP,t)}var lP=(nP.required=W5,nP);var ja=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},QI=new ja("20.2.3");var HI=new te(""),q5=new te("");function ch(t){return!t.moduleRef}function G5(t){let e=ch(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Le);return n.run(()=>{ch(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Yn),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),ch(t)){let s=()=>e.destroy(),o=t.platformInjector.get(HI);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>t.moduleRef.destroy(),o=t.platformInjector.get(HI);o.add(s),t.moduleRef.onDestroy(()=>{qd(t.allPlatformModules,t.moduleRef),i.unsubscribe(),o.delete(s)})}return Y5(r,n,()=>{let s=e.get(Ei),o=s.add(),a=e.get(PI);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(vl,ih);if(zk(c||ih),!e.get(q5,!0))return ch(t)?e.get(vs):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(ch(t)){let d=e.get(vs);return t.rootComponent!==void 0&&d.bootstrap(t.rootComponent),d}else return K5?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void s.remove(o))})})}var K5;function Y5(t,e,n){try{let r=n();return yo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Tm=null;function Q5(t=[],e){return ft.create({name:e,providers:[{provide:kd,useValue:"platform"},{provide:HI,useValue:new Set([()=>Tm=null])},...t]})}function Z5(t=[]){if(Tm)return Tm;let e=Q5(t);return Tm=e,Hk(),X5(e),e}function X5(t){let e=t.get(hm,null);Lt(t,()=>{e?.forEach(n=>n())})}function Sm(){return!1}var Is=(()=>{class t{static __NG_ELEMENT_ID__=J5}return t})();function J5(t){return eW(cn(),Fe(),(t&16)===16)}function eW(t,e,n){if(ho(t)&&!n){let r=Dr(t.index,e);return new po(r,r)}else if(t.type&175){let r=e[Ir];return new po(r,e)}return null}var $I=class{constructor(){}supports(e){return TI(e)}create(e){return new zI(e)}},tW=(t,e)=>e,zI=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||tW}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<rP(r,i,s)?n:r,a=rP(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,d=c-i;if(l!=d){for(let p=0;p<l;p++){let g=p<s.length?s[p]:s[p]=0,v=g+p;d<=v&&v<l&&(s[p]=g+1)}let h=o.previousIndex;s[h]=d-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!TI(e))throw new X(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,xk(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new WI(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Cm),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Cm),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},WI=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,n){this.item=e,this.trackById=n}},qI=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Cm=class{map=new Map;put(e){let n=e.trackById,r=this.map.get(n);r||(r=new qI,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function rP(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var GI=class{constructor(){}supports(e){return e instanceof Map||vm(e)}create(){return new KI}},KI=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||vm(e)))throw new X(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{let s=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,n);let s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}let r=new YI(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}},YI=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(e){this.key=e}};function iP(){return new ZI([new $I])}var ZI=(()=>{class t{factories;static \u0275prov=ie({token:t,providedIn:"root",factory:iP});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:()=>{let r=j(t,{optional:!0,skipSelf:!0});return t.create(n,r||iP())}}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new X(901,!1)}}return t})();function sP(){return new XI([new GI])}var XI=(()=>{class t{static \u0275prov=ie({token:t,providedIn:"root",factory:sP});factories;constructor(n){this.factories=n}static create(n,r){if(r){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:()=>{let r=j(t,{optional:!0,skipSelf:!0});return t.create(n,r||sP())}}}find(n){let r=this.factories.find(i=>i.supports(n));if(r)return r;throw new X(901,!1)}}return t})();function uP(t){et(8);try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=Z5(r),s=[Xk({}),{provide:fs,useExisting:eP},zM,...n||[]],o=new Qd({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return G5({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{et(9)}}function _o(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function dP(t){let e=gs(t);if(!e)return null;let n=new Pa(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var pP=null;function xr(){return pP}function JI(t){pP??=t}var lh=class{},uh=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ie({token:t,factory:()=>j(gP),providedIn:"platform"})}return t})(),e0=new te(""),gP=(()=>{class t extends uh{_location;_history;_doc=j(Bt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xr().getBaseHref(this._doc)}onPopState(n){let r=xr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=xr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ie({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function Am(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function hP(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function Jr(t){return t&&t[0]!=="?"?`?${t}`:t}var ei=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ie({token:t,factory:()=>j(Rm),providedIn:"root"})}return t})(),xm=new te(""),Rm=(()=>{class t extends ei{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??j(Bt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Am(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Jr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Jr(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Jr(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(ae(uh),ae(xm,8))};static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),vo=(()=>{class t{_subject=new Mt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=iW(hP(fP(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Jr(r))}normalize(n){return t.stripTrailingSlash(rW(this._basePath,fP(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Jr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Jr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Jr;static joinWithSlash=Am;static stripTrailingSlash=hP;static \u0275fac=function(r){return new(r||t)(ae(ei))};static \u0275prov=ie({token:t,factory:()=>nW(),providedIn:"root"})}return t})();function nW(){return new vo(ae(ei))}function rW(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function fP(t){return t.replace(/\/index.html$/,"")}function iW(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var a0=(()=>{class t extends ei{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=Am(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Jr(s))||this._platformLocation.pathname;this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Jr(s))||this._platformLocation.pathname;this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(ae(uh),ae(xm,8))};static \u0275prov=ie({token:t,factory:t.\u0275fac})}return t})();var c0=(function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t})(c0||{});var xn=(function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t})(xn||{}),rt=(function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t})(rt||{}),Jn=(function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t})(Jn||{}),er={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function EP(t){return Zn(t)[Tt.LocaleId]}function wP(t,e,n){let r=Zn(t),i=[r[Tt.DayPeriodsFormat],r[Tt.DayPeriodsStandalone]],s=Rr(i,e);return Rr(s,n)}function IP(t,e,n){let r=Zn(t),i=[r[Tt.DaysFormat],r[Tt.DaysStandalone]],s=Rr(i,e);return Rr(s,n)}function TP(t,e,n){let r=Zn(t),i=[r[Tt.MonthsFormat],r[Tt.MonthsStandalone]],s=Rr(i,e);return Rr(s,n)}function DP(t,e){let r=Zn(t)[Tt.Eras];return Rr(r,e)}function dh(t,e){let n=Zn(t);return Rr(n[Tt.DateFormat],e)}function hh(t,e){let n=Zn(t);return Rr(n[Tt.TimeFormat],e)}function fh(t,e){let r=Zn(t)[Tt.DateTimeFormat];return Rr(r,e)}function Si(t,e){let n=Zn(t),r=n[Tt.NumberSymbols][e];if(typeof r>"u"){if(e===er.CurrencyDecimal)return n[Tt.NumberSymbols][er.Decimal];if(e===er.CurrencyGroup)return n[Tt.NumberSymbols][er.Group]}return r}function CP(t,e){return Zn(t)[Tt.NumberFormats][e]}function SP(t){if(!t[Tt.ExtraData])throw new X(2303,!1)}function AP(t){let e=Zn(t);return SP(e),(e[Tt.ExtraData][2]||[]).map(r=>typeof r=="string"?t0(r):[t0(r[0]),t0(r[1])])}function xP(t,e,n){let r=Zn(t);SP(r);let i=[r[Tt.ExtraData][0],r[Tt.ExtraData][1]],s=Rr(i,e)||[];return Rr(s,n)||[]}function Rr(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new X(2304,!1)}function t0(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var sW=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Mm={},oW=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function RP(t,e,n,r){let i=gW(t);e=Ts(n,e)||e;let o=[],a;for(;e;)if(a=oW.exec(e),a){o=o.concat(a.slice(1));let d=o.pop();if(!d)break;e=d}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=NP(r,c),i=pW(i,r));let l="";return o.forEach(d=>{let h=hW(d);l+=h?h(i,n,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Fm(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Ts(t,e){let n=EP(t);if(Mm[n]??={},Mm[n][e])return Mm[n][e];let r="";switch(e){case"shortDate":r=dh(t,Jn.Short);break;case"mediumDate":r=dh(t,Jn.Medium);break;case"longDate":r=dh(t,Jn.Long);break;case"fullDate":r=dh(t,Jn.Full);break;case"shortTime":r=hh(t,Jn.Short);break;case"mediumTime":r=hh(t,Jn.Medium);break;case"longTime":r=hh(t,Jn.Long);break;case"fullTime":r=hh(t,Jn.Full);break;case"short":let i=Ts(t,"shortTime"),s=Ts(t,"shortDate");r=Nm(fh(t,Jn.Short),[i,s]);break;case"medium":let o=Ts(t,"mediumTime"),a=Ts(t,"mediumDate");r=Nm(fh(t,Jn.Medium),[o,a]);break;case"long":let c=Ts(t,"longTime"),l=Ts(t,"longDate");r=Nm(fh(t,Jn.Long),[c,l]);break;case"full":let d=Ts(t,"fullTime"),h=Ts(t,"fullDate");r=Nm(fh(t,Jn.Full),[d,h]);break}return r&&(Mm[n][e]=r),r}function Nm(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function ti(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function aW(t,e){return ti(t,3).substring(0,e)}function Ut(t,e,n=0,r=!1,i=!1){return function(s,o){let a=cW(t,s);if((n>0||a>-n)&&(a+=n),t===3)a===0&&n===-12&&(a=12);else if(t===6)return aW(a,e);let c=Si(o,er.MinusSign);return ti(a,e,c,r,i)}}function cW(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new X(2301,!1)}}function st(t,e,n=xn.Format,r=!1){return function(i,s){return lW(i,s,t,e,n,r)}}function lW(t,e,n,r,i,s){switch(n){case 2:return TP(e,i,r)[t.getMonth()];case 1:return IP(e,i,r)[t.getDay()];case 0:let o=t.getHours(),a=t.getMinutes();if(s){let l=AP(e),d=xP(e,i,r),h=l.findIndex(p=>{if(Array.isArray(p)){let[g,v]=p,S=o>=g.hours&&a>=g.minutes,C=o<v.hours||o===v.hours&&a<v.minutes;if(g.hours<v.hours){if(S&&C)return!0}else if(S||C)return!0}else if(p.hours===o&&p.minutes===a)return!0;return!1});if(h!==-1)return d[h]}return wP(e,i,r)[o<12?0:1];case 3:return DP(e,r)[t.getFullYear()<=0?0:1];default:let c=n;throw new X(2302,!1)}}function km(t){return function(e,n,r){let i=-1*r,s=Si(n,er.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case 0:return(i>=0?"+":"")+ti(o,2,s)+ti(Math.abs(i%60),2,s);case 1:return"GMT"+(i>=0?"+":"")+ti(o,1,s);case 2:return"GMT"+(i>=0?"+":"")+ti(o,2,s)+":"+ti(Math.abs(i%60),2,s);case 3:return r===0?"Z":(i>=0?"+":"")+ti(o,2,s)+":"+ti(Math.abs(i%60),2,s);default:throw new X(2302,!1)}}}var uW=0,Om=4;function dW(t){let e=Fm(t,uW,1).getDay();return Fm(t,0,1+(e<=Om?Om:Om+7)-e)}function MP(t){let e=t.getDay(),n=e===0?-3:Om-e;return Fm(t.getFullYear(),t.getMonth(),t.getDate()+n)}function n0(t,e=!1){return function(n,r){let i;if(e){let s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();i=1+Math.floor((o+s)/7)}else{let s=MP(n),o=dW(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return ti(i,t,Si(r,er.MinusSign))}}function Pm(t,e=!1){return function(n,r){let s=MP(n).getFullYear();return ti(s,t,Si(r,er.MinusSign),e)}}var r0={};function hW(t){if(r0[t])return r0[t];let e;switch(t){case"G":case"GG":case"GGG":e=st(3,rt.Abbreviated);break;case"GGGG":e=st(3,rt.Wide);break;case"GGGGG":e=st(3,rt.Narrow);break;case"y":e=Ut(0,1,0,!1,!0);break;case"yy":e=Ut(0,2,0,!0,!0);break;case"yyy":e=Ut(0,3,0,!1,!0);break;case"yyyy":e=Ut(0,4,0,!1,!0);break;case"Y":e=Pm(1);break;case"YY":e=Pm(2,!0);break;case"YYY":e=Pm(3);break;case"YYYY":e=Pm(4);break;case"M":case"L":e=Ut(1,1,1);break;case"MM":case"LL":e=Ut(1,2,1);break;case"MMM":e=st(2,rt.Abbreviated);break;case"MMMM":e=st(2,rt.Wide);break;case"MMMMM":e=st(2,rt.Narrow);break;case"LLL":e=st(2,rt.Abbreviated,xn.Standalone);break;case"LLLL":e=st(2,rt.Wide,xn.Standalone);break;case"LLLLL":e=st(2,rt.Narrow,xn.Standalone);break;case"w":e=n0(1);break;case"ww":e=n0(2);break;case"W":e=n0(1,!0);break;case"d":e=Ut(2,1);break;case"dd":e=Ut(2,2);break;case"c":case"cc":e=Ut(7,1);break;case"ccc":e=st(1,rt.Abbreviated,xn.Standalone);break;case"cccc":e=st(1,rt.Wide,xn.Standalone);break;case"ccccc":e=st(1,rt.Narrow,xn.Standalone);break;case"cccccc":e=st(1,rt.Short,xn.Standalone);break;case"E":case"EE":case"EEE":e=st(1,rt.Abbreviated);break;case"EEEE":e=st(1,rt.Wide);break;case"EEEEE":e=st(1,rt.Narrow);break;case"EEEEEE":e=st(1,rt.Short);break;case"a":case"aa":case"aaa":e=st(0,rt.Abbreviated);break;case"aaaa":e=st(0,rt.Wide);break;case"aaaaa":e=st(0,rt.Narrow);break;case"b":case"bb":case"bbb":e=st(0,rt.Abbreviated,xn.Standalone,!0);break;case"bbbb":e=st(0,rt.Wide,xn.Standalone,!0);break;case"bbbbb":e=st(0,rt.Narrow,xn.Standalone,!0);break;case"B":case"BB":case"BBB":e=st(0,rt.Abbreviated,xn.Format,!0);break;case"BBBB":e=st(0,rt.Wide,xn.Format,!0);break;case"BBBBB":e=st(0,rt.Narrow,xn.Format,!0);break;case"h":e=Ut(3,1,-12);break;case"hh":e=Ut(3,2,-12);break;case"H":e=Ut(3,1);break;case"HH":e=Ut(3,2);break;case"m":e=Ut(4,1);break;case"mm":e=Ut(4,2);break;case"s":e=Ut(5,1);break;case"ss":e=Ut(5,2);break;case"S":e=Ut(6,1);break;case"SS":e=Ut(6,2);break;case"SSS":e=Ut(6,3);break;case"Z":case"ZZ":case"ZZZ":e=km(0);break;case"ZZZZZ":e=km(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=km(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=km(2);break;default:return null}return r0[t]=e,e}function NP(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function fW(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function pW(t,e,n){let i=t.getTimezoneOffset(),s=NP(e,i);return fW(t,-1*(s-i))}function gW(t){if(mP(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,s=1,o=1]=t.split("-").map(a=>+a);return Fm(i,s-1,o)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(sW))return mW(r)}let e=new Date(t);if(!mP(e))throw new X(2302,!1);return e}function mW(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,c=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return s.call(e,o,a,c,l),e}function mP(t){return t instanceof Date&&!isNaN(t.valueOf())}var yW=/^(\d+)?\.((\d+)(-(\d+))?)?$/,yP=22,Lm=".",ph="0",_W=";",vW=",",i0="#";function bW(t,e,n,r,i,s,o=!1){let a="",c=!1;if(!isFinite(t))a=Si(n,er.Infinity);else{let l=IW(t);o&&(l=wW(l));let d=e.minInt,h=e.minFrac,p=e.maxFrac;if(s){let O=s.match(yW);if(O===null)throw new X(2306,!1);let F=O[1],z=O[3],W=O[5];F!=null&&(d=s0(F)),z!=null&&(h=s0(z)),W!=null?p=s0(W):z!=null&&h>p&&(p=h)}TW(l,h,p);let g=l.digits,v=l.integerLen,S=l.exponent,C=[];for(c=g.every(O=>!O);v<d;v++)g.unshift(0);for(;v<0;v++)g.unshift(0);v>0?C=g.splice(v,g.length):(C=g,g=[0]);let k=[];for(g.length>=e.lgSize&&k.unshift(g.splice(-e.lgSize,g.length).join(""));g.length>e.gSize;)k.unshift(g.splice(-e.gSize,g.length).join(""));g.length&&k.unshift(g.join("")),a=k.join(Si(n,r)),C.length&&(a+=Si(n,i)+C.join("")),S&&(a+=Si(n,er.Exponential)+"+"+S)}return t<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function kP(t,e,n){let r=CP(e,c0.Decimal),i=EW(r,Si(e,er.MinusSign));return bW(t,i,e,er.Group,er.Decimal,n)}function EW(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(_W),i=r[0],s=r[1],o=i.indexOf(Lm)!==-1?i.split(Lm):[i.substring(0,i.lastIndexOf(ph)+1),i.substring(i.lastIndexOf(ph)+1)],a=o[0],c=o[1]||"";n.posPre=a.substring(0,a.indexOf(i0));for(let d=0;d<c.length;d++){let h=c.charAt(d);h===ph?n.minFrac=n.maxFrac=d+1:h===i0?n.maxFrac=d+1:n.posSuf+=h}let l=a.split(vW);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){let d=i.length-n.posPre.length-n.posSuf.length,h=s.indexOf(i0);n.negPre=s.substring(0,h).replace(/'/g,""),n.negSuf=s.slice(h+d).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function wW(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function IW(t){let e=Math.abs(t)+"",n=0,r,i,s,o,a;for((i=e.indexOf(Lm))>-1&&(e=e.replace(Lm,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===ph;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===ph;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>yP&&(r=r.splice(0,yP-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function TW(t,e,n){if(e>n)throw new X(2307,!1);let r=t.digits,i=r.length-t.integerLen,s=Math.min(Math.max(e,i),n),o=s+t.integerLen,a=r[o];if(o>0){r.splice(Math.max(t.integerLen,o));for(let h=o;h<r.length;h++)r[h]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let h=1;h<o;h++)r[h]=0}if(a>=5)if(o-1<0){for(let h=0;h>o;h--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let c=s!==0,l=e+t.integerLen,d=r.reduceRight(function(h,p,g,v){return p=p+h,v[g]=p<10?p:p-10,c&&(v[g]===0&&g>=l?v.pop():c=!1),p>=10?1:0},0);d&&(r.unshift(d),t.integerLen++)}function s0(t){let e=parseInt(t);if(isNaN(e))throw new X(2305,!1);return e}var o0=/\s+/,_P=[],Ba=(()=>{class t{_ngEl;_renderer;initialClasses=_P;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(o0):_P}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(o0):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(o0).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||t)(Z(Zt),Z(hr))};static \u0275dir=Ze({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();var Vm=class{$implicit;ngForOf;index;count;constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},bo=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Vm(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),vP(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);vP(s,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(Z(_s),Z(go),Z(ZI))};static \u0275dir=Ze({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function vP(t,e){t.context.$implicit=e.item}var Ua=(()=>{class t{_viewContainer;_context=new jm;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){bP(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){bP(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(Z(_s),Z(go))};static \u0275dir=Ze({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),jm=class{$implicit=null;ngIf=null};function bP(t,e){if(t&&!t.createEmbeddedView)throw new X(2020,!1)}var l0=(()=>{class t{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(n,r,i){this._ngEl=n,this._differs=r,this._renderer=i}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){let n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,r){let[i,s]=n.split("."),o=i.indexOf("-")===-1?void 0:Qr.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(n){n.forEachRemovedItem(r=>this._setStyle(r.key,null)),n.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),n.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static \u0275fac=function(r){return new(r||t)(Z(Zt),Z(XI),Z(hr))};static \u0275dir=Ze({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return t})();function u0(t,e){return new X(2100,!1)}var DW=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,Ha=(()=>{class t{transform(n){if(n==null)return null;if(typeof n!="string")throw u0(t,n);return n.replace(DW,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static \u0275fac=function(r){return new(r||t)};static \u0275pipe=th({name:"titlecase",type:t,pure:!0})}return t})();var CW="mediumDate",PP=new te(""),OP=new te(""),$a=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,s){if(n==null||n===""||n!==n)return null;try{let o=r??this.defaultOptions?.dateFormat??CW,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return RP(n,o,s||this.locale,a)}catch(o){throw u0(t,o.message)}}static \u0275fac=function(r){return new(r||t)(Z(vl,16),Z(PP,24),Z(OP,24))};static \u0275pipe=th({name:"date",type:t,pure:!0})}return t})();var gh=(()=>{class t{_locale;constructor(n){this._locale=n}transform(n,r,i){if(!SW(n))return null;i||=this._locale;try{let s=AW(n);return kP(s,i,r)}catch(s){throw u0(t,s.message)}}static \u0275fac=function(r){return new(r||t)(Z(vl,16))};static \u0275pipe=th({name:"number",type:t,pure:!0})}return t})();function SW(t){return!(t==null||t===""||t!==t)}function AW(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new X(2309,!1);return t}var Mr=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ti({type:t});static \u0275inj=Wr({})}return t})();function d0(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var mh=class{};var f0="browser";function wl(t){return t===f0}var FP=(()=>{class t{static \u0275prov=ie({token:t,providedIn:"root",factory:()=>new h0(j(Bt),window)})}return t})(),h0=class{document;window;offset=()=>[0,0];constructor(e,n){this.document=e,this.window=n}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,n){this.window.scrollTo(be(H({},n),{left:e[0],top:e[1]}))}scrollToAnchor(e,n){let r=xW(this.document,e);r&&(this.scrollToElement(r,n),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(Ea(2400,!1))}}scrollToElement(e,n){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,s=r.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(be(H({},n),{left:i-o[0],top:s-o[1]}))}};function xW(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var Um=new te(""),_0=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,s){return this._findPluginFor(r).addEventListener(n,r,i,s)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new X(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(ae(Um),ae(Le))};static \u0275prov=ie({token:t,factory:t.\u0275fac})}return t})(),_h=class{_doc;constructor(e){this._doc=e}manager},p0="ng-app-id";function LP(t){for(let e of t)e.remove()}function VP(t,e){let n=e.createElement("style");return n.textContent=t,n}function RW(t,e,n,r){let i=t.head?.querySelectorAll(`style[${p0}="${e}"],link[${p0}="${e}"]`);if(i)for(let s of i)s.removeAttribute(p0),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&n.set(s.textContent,{usage:0,elements:[s]})}function m0(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var v0=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,RW(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,VP);r?.forEach(i=>this.addUsage(i,this.external,m0))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let s=r.get(n);s?s.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(LP(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])LP(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,VP(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,m0(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(ae(Bt),ae(dm),ae(fm,8),ae(dr))};static \u0275prov=ie({token:t,factory:t.\u0275fac})}return t})(),g0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},b0=/%COMP%/g;var BP="%COMP%",MW=`_nghost-${BP}`,NW=`_ngcontent-${BP}`,kW=!0,PW=new te("",{providedIn:"root",factory:()=>kW});function OW(t){return NW.replace(b0,t)}function FW(t){return MW.replace(b0,t)}function UP(t,e){return e.map(n=>n.replace(b0,t))}var E0=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;animationDisabled;maxAnimationTimeout;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;registry;constructor(n,r,i,s,o,a,c,l=null,d,h,p=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.animationDisabled=d,this.maxAnimationTimeout=h,this.tracingService=p,this.platformIsServer=!1,this.defaultRenderer=new vh(n,o,c,this.platformIsServer,this.tracingService,this.registry=Vg(),this.maxAnimationTimeout)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof Bm?i.applyToHost(n):i instanceof bh&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer,p=this.tracingService;switch(r.encapsulation){case ms.Emulated:s=new Bm(c,l,r,this.appId,d,o,a,h,p,this.registry,this.animationDisabled,this.maxAnimationTimeout);break;case ms.ShadowDom:return new y0(c,l,n,r,o,a,this.nonce,h,p,this.registry,this.maxAnimationTimeout);default:s=new bh(c,l,r,d,o,a,h,p,this.registry,this.animationDisabled,this.maxAnimationTimeout);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(ae(_0),ae(v0),ae(dm),ae(PW),ae(Bt),ae(dr),ae(Le),ae(fm),ae(OI),ae(FI),ae(La,8))};static \u0275prov=ie({token:t,factory:t.\u0275fac})}return t})(),vh=class{eventManager;doc;ngZone;platformIsServer;tracingService;registry;maxAnimationTimeout;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,s,o,a){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=s,this.registry=o,this.maxAnimationTimeout=a}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(g0[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(jP(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(jP(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){let{elements:r}=this.registry;if(r){r.animate(n,()=>n.remove(),this.maxAnimationTimeout);return}n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new X(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=g0[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=g0[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Qr.DashCase|Qr.Important)?e.style.setProperty(n,r,i&Qr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Qr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=xr().getGlobalEventTarget(this.doc,e),!e))throw new X(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,n,s)),this.eventManager.addEventListener(e,n,s,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function jP(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var y0=class extends vh{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,s,o,a,c,l,d,h){super(e,s,o,c,l,d,h),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let p=i.styles;p=UP(i.id,p);for(let v of p){let S=document.createElement("style");a&&S.setAttribute("nonce",a),S.textContent=v,this.shadowRoot.appendChild(S)}let g=i.getExternalStyles?.();if(g)for(let v of g){let S=m0(v,s);a&&S.setAttribute("nonce",a),this.shadowRoot.appendChild(S)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},bh=class extends vh{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;_animationDisabled;constructor(e,n,r,i,s,o,a,c,l,d,h,p){super(e,s,o,a,c,l,h),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this._animationDisabled=d;let g=r.styles;this.styles=p?UP(p,g):g,this.styleUrls=r.getExternalStyles?.(p)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){if(this.removeStylesOnCompDestroy){if(!this._animationDisabled&&this.registry.elements){this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)},this.maxAnimationTimeout)});return}this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}},Bm=class extends bh{contentAttr;hostAttr;constructor(e,n,r,i,s,o,a,c,l,d,h,p){let g=i+"-"+r.id;super(e,n,r,s,o,a,c,l,d,h,p,g),this.contentAttr=OW(g),this.hostAttr=FW(g)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Hm=class t extends lh{supportsDOMEvents=!0;static makeCurrent(){JI(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=LW();return n==null?null:VW(n)}resetBaseElement(){Eh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return d0(document.cookie,e)}},Eh=null;function LW(){return Eh=Eh||document.head.querySelector("base"),Eh?Eh.getAttribute("href"):null}function VW(t){return new URL(t,document.baseURI).pathname}var jW=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ie({token:t,factory:t.\u0275fac})}return t})(),$P=(()=>{class t extends _h{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,s){return n.addEventListener(r,i,s),()=>this.removeEventListener(n,r,i,s)}removeEventListener(n,r,i,s){return n.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||t)(ae(Bt))};static \u0275prov=ie({token:t,factory:t.\u0275fac})}return t})(),HP=["alt","control","meta","shift"],BW={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},UW={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},zP=(()=>{class t extends _h{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,s){let o=t.parseEventName(r),a=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xr().onAndCancel(n,o.domEventName,a,s))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=t._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),HP.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(n,r){let i=BW[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),HP.forEach(o=>{if(o!==i){let a=UW[o];a(n)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(ae(Bt))};static \u0275prov=ie({token:t,factory:t.\u0275fac})}return t})();function w0(t,e){let n=H({rootComponent:t},HW(e));return uP(n)}function HW(t){return{appProviders:[...GW,...t?.providers??[]],platformProviders:qW}}function $W(){Hm.makeCurrent()}function zW(){return new zr}function WW(){return Jw(document),document}var qW=[{provide:dr,useValue:f0},{provide:hm,useValue:$W,multi:!0},{provide:Bt,useFactory:WW}];var GW=[{provide:kd,useValue:"root"},{provide:zr,useFactory:zW},{provide:Um,useClass:$P,multi:!0,deps:[Bt]},{provide:Um,useClass:zP,multi:!0,deps:[Bt]},E0,v0,_0,{provide:ka,useExisting:E0},{provide:mh,useClass:jW},[]];var WP=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(ae(Bt))};static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Ae="primary",Ph=Symbol("RouteTitle"),S0=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function qa(t){return new S0(t)}function JP(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function YW(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ai(t[n],e[n]))return!1;return!0}function Ai(t,e){let n=t?A0(t):void 0,r=e?A0(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!e1(t[i],e[i]))return!1;return!0}function A0(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function e1(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function t1(t){return t.length>0?t[t.length-1]:null}function Ds(t){return aE(t)?t:yo(t)?lt(Promise.resolve(t)):pe(t)}var QW={exact:r1,subset:i1},n1={exact:ZW,subset:XW,ignored:()=>!0};function qP(t,e,n){return QW[n.paths](t.root,e.root,n.matrixParams)&&n1[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function ZW(t,e){return Ai(t,e)}function r1(t,e,n){if(!za(t.segments,e.segments)||!Wm(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!r1(t.children[r],e.children[r],n))return!1;return!0}function XW(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>e1(t[n],e[n]))}function i1(t,e,n){return s1(t,e,e.segments,n)}function s1(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!za(i,n)||e.hasChildren()||!Wm(i,n,r))}else if(t.segments.length===n.length){if(!za(t.segments,n)||!Wm(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!i1(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!za(t.segments,i)||!Wm(t.segments,i,r)||!t.children[Ae]?!1:s1(t.children[Ae],e,s,r)}}function Wm(t,e,n){return e.every((r,i)=>n1[n](t[i].parameters,r.parameters))}var Ri=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ge([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=qa(this.queryParams),this._queryParamMap}toString(){return tq.serialize(this)}},Ge=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qm(this)}},Eo=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=qa(this.parameters),this._parameterMap}toString(){return a1(this)}};function JW(t,e){return za(t,e)&&t.every((n,r)=>Ai(n.parameters,e[r].parameters))}function za(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function eq(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Ae&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Ae&&(n=n.concat(e(i,r)))}),n}var Ga=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=ie({token:t,factory:()=>new wo,providedIn:"root"})}return t})(),wo=class{parse(e){let n=new R0(e);return new Ri(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${wh(e.root,!0)}`,r=iq(e.queryParams),i=typeof e.fragment=="string"?`#${nq(e.fragment)}`:"";return`${n}${r}${i}`}},tq=new wo;function qm(t){return t.segments.map(e=>a1(e)).join("/")}function wh(t,e){if(!t.hasChildren())return qm(t);if(e){let n=t.children[Ae]?wh(t.children[Ae],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==Ae&&r.push(`${i}:${wh(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=eq(t,(r,i)=>i===Ae?[wh(t.children[Ae],!1)]:[`${i}:${wh(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Ae]!=null?`${qm(t)}/${n[0]}`:`${qm(t)}/(${n.join("//")})`}}function o1(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $m(t){return o1(t).replace(/%3B/gi,";")}function nq(t){return encodeURI(t)}function x0(t){return o1(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Gm(t){return decodeURIComponent(t)}function GP(t){return Gm(t.replace(/\+/g,"%20"))}function a1(t){return`${x0(t.path)}${rq(t.parameters)}`}function rq(t){return Object.entries(t).map(([e,n])=>`;${x0(e)}=${x0(n)}`).join("")}function iq(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${$m(n)}=${$m(i)}`).join("&"):`${$m(n)}=${$m(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var sq=/^[^\/()?;#]+/;function I0(t){let e=t.match(sq);return e?e[0]:""}var oq=/^[^\/()?;=#]+/;function aq(t){let e=t.match(oq);return e?e[0]:""}var cq=/^[^=?&#]+/;function lq(t){let e=t.match(cq);return e?e[0]:""}var uq=/^[^&#]+/;function dq(t){let e=t.match(uq);return e?e[0]:""}var R0=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ge([],{}):new Ge([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Ae]=new Ge(e,n)),r}parseSegment(){let e=I0(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new X(4009,!1);return this.capture(e),new Eo(Gm(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=aq(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=I0(this.remaining);i&&(r=i,this.capture(r))}e[Gm(n)]=Gm(r)}parseQueryParam(e){let n=lq(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=dq(this.remaining);o&&(r=o,this.capture(r))}let i=GP(n),s=GP(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=I0(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new X(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ae);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[Ae]:new Ge([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new X(4011,!1)}};function c1(t){return t.segments.length>0?new Ge([],{[Ae]:t}):t}function l1(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=l1(i);if(r===Ae&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new Ge(t.segments,e);return hq(n)}function hq(t){if(t.numberOfChildren===1&&t.children[Ae]){let e=t.children[Ae];return new Ge(t.segments.concat(e.segments),e.children)}return t}function Io(t){return t instanceof Ri}function u1(t,e,n=null,r=null){let i=d1(t);return h1(i,e,n,r)}function d1(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new Ge(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=c1(r);return e??i}function h1(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return T0(i,i,i,n,r);let s=fq(e);if(s.toRoot())return T0(i,i,new Ge([],{}),n,r);let o=pq(s,i,t),a=o.processChildren?Th(o.segmentGroup,o.index,s.commands):p1(o.segmentGroup,o.index,s.commands);return T0(i,o.segmentGroup,a,n,r)}function Km(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ch(t){return typeof t=="object"&&t!=null&&t.outlets}function T0(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let o;t===e?o=n:o=f1(t,e,n);let a=c1(l1(o));return new Ri(a,s,i)}function f1(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=f1(s,e,n)}),new Ge(t.segments,r)}var Ym=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Km(r[0]))throw new X(4003,!1);let i=r.find(Ch);if(i&&i!==t1(r))throw new X(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function fq(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Ym(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Ym(n,e,r)}var Dl=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function pq(t,e,n){if(t.isAbsolute)return new Dl(e,!0,0);if(!n)return new Dl(e,!1,NaN);if(n.parent===null)return new Dl(n,!0,0);let r=Km(t.commands[0])?0:1,i=n.segments.length-1+r;return gq(n,i,t.numberOfDoubleDots)}function gq(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new X(4005,!1);i=r.segments.length}return new Dl(r,!1,i-s)}function mq(t){return Ch(t[0])?t[0].outlets:{[Ae]:t}}function p1(t,e,n){if(t??=new Ge([],{}),t.segments.length===0&&t.hasChildren())return Th(t,e,n);let r=yq(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new Ge(t.segments.slice(0,r.pathIndex),{});return s.children[Ae]=new Ge(t.segments.slice(r.pathIndex),t.children),Th(s,0,i)}else return r.match&&i.length===0?new Ge(t.segments,{}):r.match&&!t.hasChildren()?M0(t,e,n):r.match?Th(t,0,i):M0(t,e,n)}function Th(t,e,n){if(n.length===0)return new Ge(t.segments,{});{let r=mq(n),i={};if(Object.keys(r).some(s=>s!==Ae)&&t.children[Ae]&&t.numberOfChildren===1&&t.children[Ae].segments.length===0){let s=Th(t.children[Ae],e,n);return new Ge(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=p1(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Ge(t.segments,i)}}function yq(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Ch(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!YP(c,l,o))return s;r+=2}else{if(!YP(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function M0(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Ch(s)){let c=_q(s.outlets);return new Ge(r,c)}if(i===0&&Km(n[0])){let c=t.segments[e];r.push(new Eo(c.path,KP(n[0]))),i++;continue}let o=Ch(s)?s.outlets[Ae]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Km(a)?(r.push(new Eo(o,KP(a))),i+=2):(r.push(new Eo(o,{})),i++)}return new Ge(r,{})}function _q(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=M0(new Ge([],{}),0,r))}),e}function KP(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function YP(t,e,n){return t==n.path&&Ai(e,n.parameters)}var Cl="imperative",Xt=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(Xt||{}),pr=class{id;url;constructor(e,n){this.id=e,this.url=n}},To=class extends pr{type=Xt.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},gr=class extends pr{urlAfterRedirects;type=Xt.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},$n=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})($n||{}),Al=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(Al||{}),xi=class extends pr{reason;code;type=Xt.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Mi=class extends pr{reason;code;type=Xt.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},xl=class extends pr{error;target;type=Xt.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Sh=class extends pr{urlAfterRedirects;state;type=Xt.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qm=class extends pr{urlAfterRedirects;state;type=Xt.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zm=class extends pr{urlAfterRedirects;state;shouldActivate;type=Xt.GuardsCheckEnd;constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Xm=class extends pr{urlAfterRedirects;state;type=Xt.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jm=class extends pr{urlAfterRedirects;state;type=Xt.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ey=class{route;type=Xt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ty=class{route;type=Xt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ny=class{snapshot;type=Xt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ry=class{snapshot;type=Xt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},iy=class{snapshot;type=Xt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sy=class{snapshot;type=Xt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Rl=class{routerEvent;position;anchor;type=Xt.Scroll;constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ah=class{},Ml=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function vq(t){return!(t instanceof Ah)&&!(t instanceof Ml)}function bq(t,e){return t.providers&&!t._injector&&(t._injector=_l(t.providers,e,`Route: ${t.path}`)),t._injector??e}function ni(t){return t.outlet||Ae}function Eq(t,e){let n=t.filter(r=>ni(r)===e);return n.push(...t.filter(r=>ni(r)!==e)),n}function Pl(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var oy=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Pl(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Ka(this.rootInjector)}},Ka=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new oy(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(ae(kt))};static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ay=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=N0(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=N0(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=k0(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return k0(e,this._root).map(n=>n.value)}};function N0(t,e){if(t===e.value)return e;for(let n of e.children){let r=N0(t,n);if(r)return r}return null}function k0(t,e){if(t===e.value)return[e];for(let n of e.children){let r=k0(t,n);if(r.length)return r.unshift(e),r}return[]}var fr=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Tl(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var xh=class extends ay{snapshot;constructor(e,n){super(e),this.snapshot=n,U0(this,e)}toString(){return this.snapshot.toString()}};function g1(t){let e=wq(t),n=new It([new Eo("",{})]),r=new It({}),i=new It({}),s=new It({}),o=new It(""),a=new Ni(n,r,s,o,i,Ae,t,e.root);return a.snapshot=e.root,new xh(new fr(a,[]),e)}function wq(t){let e={},n={},r={},s=new Wa([],e,r,"",n,Ae,t,null,{});return new Rh("",new fr(s,[]))}var Ni=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Be(l=>l[Ph]))??pe(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Be(e=>qa(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Be(e=>qa(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function cy(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:H(H({},e.params),t.params),data:H(H({},e.data),t.data),resolve:H(H(H(H({},t.data),e.data),i?.data),t._resolvedData)}:r={params:H({},t.params),data:H({},t.data),resolve:H(H({},t.data),t._resolvedData??{})},i&&y1(i)&&(r.resolve[Ph]=i.title),r}var Wa=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ph]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=qa(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=qa(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Rh=class extends ay{url;constructor(e,n){super(n),this.url=e,U0(this,n)}toString(){return m1(this._root)}};function U0(t,e){e.value._routerState=t,e.children.forEach(n=>U0(t,n))}function m1(t){let e=t.children.length>0?` { ${t.children.map(m1).join(", ")} } `:"";return`${t.value}${e}`}function D0(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ai(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Ai(e.params,n.params)||t.paramsSubject.next(n.params),YW(e.url,n.url)||t.urlSubject.next(n.url),Ai(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function P0(t,e){let n=Ai(t.params,e.params)&&JW(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||P0(t.parent,e.parent))}function y1(t){return typeof t.title=="string"||t.title===null}var _1=new te(""),Oh=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ae;activateEvents=new pt;deactivateEvents=new pt;attachEvents=new pt;detachEvents=new pt;routerOutletData=lP(void 0);parentContexts=j(Ka);location=j(_s);changeDetector=j(Is);inputBinder=j(Fh,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new X(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new X(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new X(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new X(4013,!1);this._activatedRoute=n;let i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new O0(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ze({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Sr]})}return t})(),O0=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Ni?this.route:e===Ka?this.childContexts:e===_1?this.outletData:this.parent.get(e,n)}},Fh=new te(""),H0=(()=>{class t{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,i=Id([r.queryParams,r.params,r.data]).pipe(Ln(([s,o,a],c)=>(a=H(H(H({},s),o),a),c===0?pe(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let o=dP(r.component);if(!o){this.unsubscribeFromRouteData(n);return}for(let{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(n,i)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ie({token:t,factory:t.\u0275fac})}return t})(),$0=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Bn({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&ne(0,"router-outlet")},dependencies:[Oh],encapsulation:2})}return t})();function z0(t){let e=t.children&&t.children.map(z0),n=e?be(H({},t),{children:e}):H({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ae&&(n.component=$0),n}function Iq(t,e,n){let r=Mh(t,e._root,n?n._root:void 0);return new xh(r,e)}function Mh(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Tq(t,e,n);return new fr(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Mh(t,a)),o}}let r=Dq(e.value),i=e.children.map(s=>Mh(t,s));return new fr(r,i)}}function Tq(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Mh(t,r,i);return Mh(t,r)})}function Dq(t){return new Ni(new It(t.url),new It(t.params),new It(t.queryParams),new It(t.fragment),new It(t.data),t.outlet,t.component,t)}var Nl=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},v1="ngNavigationCancelingError";function ly(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Io(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=b1(!1,$n.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function b1(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[v1]=!0,n.cancellationCode=e,n}function Cq(t){return E1(t)&&Io(t.url)}function E1(t){return!!t&&t[v1]}var Sq=(t,e,n,r)=>Be(i=>(new F0(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),F0=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),D0(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Tl(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Tl(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Tl(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Tl(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new sy(s.value.snapshot))}),e.children.length&&this.forwardEvent(new ry(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(D0(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),D0(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},uy=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Sl=class{component;route;constructor(e,n){this.component=e,this.route=n}};function Aq(t,e,n){let r=t._root,i=e?e._root:null;return Ih(r,i,n,[r.value])}function xq(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ol(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!AE(t)?t:e.get(t):r}function Ih(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Tl(e);return t.children.forEach(o=>{Rq(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Dh(a,n.getContext(o),i)),i}function Rq(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=Mq(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new uy(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ih(t,e,a?a.children:null,r,i):Ih(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Sl(a.outlet.component,o))}else o&&Dh(e,a,i),i.canActivateChecks.push(new uy(r)),s.component?Ih(t,null,a?a.children:null,r,i):Ih(t,null,n,r,i);return i}function Mq(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!za(t.url,e.url);case"pathParamsOrQueryParamsChange":return!za(t.url,e.url)||!Ai(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!P0(t,e)||!Ai(t.queryParams,e.queryParams);case"paramsChange":default:return!P0(t,e)}}function Dh(t,e,n){let r=Tl(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Dh(o,e.children.getContext(s),n):Dh(o,null,n):Dh(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Sl(e.outlet.component,i)):n.canDeactivateChecks.push(new Sl(null,i)):n.canDeactivateChecks.push(new Sl(null,i))}function Lh(t){return typeof t=="function"}function Nq(t){return typeof t=="boolean"}function kq(t){return t&&Lh(t.canLoad)}function Pq(t){return t&&Lh(t.canActivate)}function Oq(t){return t&&Lh(t.canActivateChild)}function Fq(t){return t&&Lh(t.canDeactivate)}function Lq(t){return t&&Lh(t.canMatch)}function w1(t){return t instanceof as||t?.name==="EmptyError"}var zm=Symbol("INITIAL_VALUE");function kl(){return Ln(t=>Id(t.map(e=>e.pipe(ls(1),hE(zm)))).pipe(Be(e=>{for(let n of e)if(n!==!0){if(n===zm)return zm;if(n===!1||Vq(n))return n}return!0}),Kn(e=>e!==zm),ls(1)))}function Vq(t){return Io(t)||t instanceof Nl}function jq(t,e){return Nt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?pe(be(H({},n),{guardsResult:!0})):Bq(o,r,i,t).pipe(Nt(a=>a&&Nq(a)?Uq(r,s,t,e):pe(a)),Be(a=>be(H({},n),{guardsResult:a})))})}function Bq(t,e,n,r){return lt(t).pipe(Nt(i=>qq(i.component,i.route,n,e,r)),us(i=>i!==!0,!0))}function Uq(t,e,n,r){return lt(e).pipe(ro(i=>Jc($q(i.route.parent,r),Hq(i.route,r),Wq(t,i.path,n),zq(t,i.route,n))),us(i=>i!==!0,!0))}function Hq(t,e){return t!==null&&e&&e(new iy(t)),pe(!0)}function $q(t,e){return t!==null&&e&&e(new ny(t)),pe(!0)}function zq(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return pe(!0);let i=r.map(s=>Td(()=>{let o=Pl(e)??n,a=Ol(s,o),c=Pq(a)?a.canActivate(e,t):Lt(o,()=>a(e,t));return Ds(c).pipe(us())}));return pe(i).pipe(kl())}function Wq(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>xq(o)).filter(o=>o!==null).map(o=>Td(()=>{let a=o.guards.map(c=>{let l=Pl(o.node)??n,d=Ol(c,l),h=Oq(d)?d.canActivateChild(r,t):Lt(l,()=>d(r,t));return Ds(h).pipe(us())});return pe(a).pipe(kl())}));return pe(s).pipe(kl())}function qq(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return pe(!0);let o=s.map(a=>{let c=Pl(e)??i,l=Ol(a,c),d=Fq(l)?l.canDeactivate(t,e,n,r):Lt(c,()=>l(t,e,n,r));return Ds(d).pipe(us())});return pe(o).pipe(kl())}function Gq(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return pe(!0);let s=i.map(o=>{let a=Ol(o,t),c=kq(a)?a.canLoad(e,n):Lt(t,()=>a(e,n));return Ds(c)});return pe(s).pipe(kl(),I1(r))}function I1(t){return eE(sn(e=>{if(typeof e!="boolean")throw ly(t,e)}),Be(e=>e===!0))}function Kq(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return pe(!0);let s=i.map(o=>{let a=Ol(o,t),c=Lq(a)?a.canMatch(e,n):Lt(t,()=>a(e,n));return Ds(c)});return pe(s).pipe(kl(),I1(r))}var Nh=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},kh=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Il(t){return Xc(new Nh(t))}function Yq(t){return Xc(new X(4e3,!1))}function Qq(t){return Xc(b1(!1,$n.GuardRejected))}var L0=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return pe(r);if(i.numberOfChildren>1||!i.children[Ae])return Yq(`${e.redirectTo}`);i=i.children[Ae]}}applyRedirectCommands(e,n,r,i,s){return Zq(n,i,s).pipe(Be(o=>{if(o instanceof Ri)throw new kh(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new kh(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Ri(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Ge(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new X(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function Zq(t,e,n){if(typeof t=="string")return pe(t);let r=t,{queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,params:l,data:d,title:h}=e;return Ds(Lt(n,()=>r({params:l,data:d,queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,title:h})))}var V0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Xq(t,e,n,r,i){let s=T1(t,e,n);return s.matched?(r=bq(e,r),Kq(r,e,n,i).pipe(Be(o=>o===!0?s:H({},V0)))):pe(s)}function T1(t,e,n){if(e.path==="**")return Jq(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?H({},V0):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||JP)(n,t,e);if(!i)return H({},V0);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?H(H({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Jq(t){return{matched:!0,parameters:t.length>0?t1(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function QP(t,e,n,r){return n.length>0&&n8(t,n,r)?{segmentGroup:new Ge(e,t8(r,new Ge(n,t.children))),slicedSegments:[]}:n.length===0&&r8(t,n,r)?{segmentGroup:new Ge(t.segments,e8(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ge(t.segments,t.children),slicedSegments:n}}function e8(t,e,n,r){let i={};for(let s of n)if(hy(t,e,s)&&!r[ni(s)]){let o=new Ge([],{});i[ni(s)]=o}return H(H({},r),i)}function t8(t,e){let n={};n[Ae]=e;for(let r of t)if(r.path===""&&ni(r)!==Ae){let i=new Ge([],{});n[ni(r)]=i}return n}function n8(t,e,n){return n.some(r=>hy(t,e,r)&&ni(r)!==Ae)}function r8(t,e,n){return n.some(r=>hy(t,e,r))}function hy(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function i8(t,e,n){return e.length===0&&!t.children[n]}var j0=class{};function s8(t,e,n,r,i,s,o="emptyOnly"){return new B0(t,e,n,r,i,o,s).recognize()}var o8=31,B0=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new L0(this.urlSerializer,this.urlTree)}noMatchError(e){return new X(4002,`'${e.segmentGroup}'`)}recognize(){let e=QP(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Be(({children:n,rootSnapshot:r})=>{let i=new fr(r,n),s=new Rh("",i),o=u1(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new Wa([],Object.freeze({}),Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ae,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ae,n).pipe(Be(r=>({children:r,rootSnapshot:n})),cs(r=>{if(r instanceof kh)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Nh?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(Be(o=>o instanceof fr?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return lt(s).pipe(ro(o=>{let a=r.children[o],c=Eq(n,o);return this.processSegmentGroup(e,c,a,o,i)}),dE((o,a)=>(o.push(...a),o)),io(null),uE(),Nt(o=>{if(o===null)return Il(r);let a=D1(o);return a8(a),pe(a)}))}processSegment(e,n,r,i,s,o,a){return lt(n).pipe(ro(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,s,o,a).pipe(cs(l=>{if(l instanceof Nh)return pe(null);throw l}))),us(c=>!!c),cs(c=>{if(w1(c))return i8(r,i,s)?pe(new j0):Il(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,c){return ni(r)!==o&&(o===Ae||!hy(i,s,r))?Il(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,c):Il(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:h,remainingSegments:p}=T1(n,i,s);if(!c)return Il(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>o8&&(this.allowRedirects=!1));let g=new Wa(s,l,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,ZP(i),ni(i),i.component??i._loadedComponent??null,i,XP(i)),v=cy(g,a,this.paramsInheritanceStrategy);return g.params=Object.freeze(v.params),g.data=Object.freeze(v.data),this.applyRedirects.applyRedirectCommands(d,i.redirectTo,h,g,e).pipe(Ln(C=>this.applyRedirects.lineralizeSegments(i,C)),Nt(C=>this.processSegment(e,r,n,C.concat(p),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=Xq(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Ln(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ln(({routes:l})=>{let d=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:g}=c,v=new Wa(p,h,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,ZP(r),ni(r),r.component??r._loadedComponent??null,r,XP(r)),S=cy(v,o,this.paramsInheritanceStrategy);v.params=Object.freeze(S.params),v.data=Object.freeze(S.data);let{segmentGroup:C,slicedSegments:k}=QP(n,p,g,l);if(k.length===0&&C.hasChildren())return this.processChildren(d,l,C,v).pipe(Be(F=>new fr(v,F)));if(l.length===0&&k.length===0)return pe(new fr(v,[]));let O=ni(r)===s;return this.processSegment(d,l,C,k,O?Ae:s,!0,v).pipe(Be(F=>new fr(v,F instanceof fr?[F]:[])))}))):Il(n)))}getChildConfig(e,n,r){return n.children?pe({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?pe({routes:n._loadedRoutes,injector:n._loadedInjector}):Gq(e,n,r,this.urlSerializer).pipe(Nt(i=>i?this.configLoader.loadChildren(e,n).pipe(sn(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):Qq(n))):pe({routes:[],injector:e})}};function a8(t){t.sort((e,n)=>e.value.outlet===Ae?-1:n.value.outlet===Ae?1:e.value.outlet.localeCompare(n.value.outlet))}function c8(t){let e=t.value.routeConfig;return e&&e.path===""}function D1(t){let e=[],n=new Set;for(let r of t){if(!c8(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=D1(r.children);e.push(new fr(r.value,i))}return e.filter(r=>!n.has(r))}function ZP(t){return t.data||{}}function XP(t){return t.resolve||{}}function l8(t,e,n,r,i,s){return Nt(o=>s8(t,e,n,r,o.extractedUrl,i,s).pipe(Be(({state:a,tree:c})=>be(H({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function u8(t,e){return Nt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return pe(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of C1(c))o.add(l);let a=0;return lt(o).pipe(ro(c=>s.has(c)?d8(c,r,t,e):(c.data=cy(c,c.parent,t).resolve,pe(void 0))),sn(()=>a++),el(1),Nt(c=>a===o.size?pe(n):qn))})}function C1(t){let e=t.children.map(n=>C1(n)).flat();return[t,...e]}function d8(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!y1(i)&&(s[Ph]=i.title),Td(()=>(t.data=cy(t,t.parent,n).resolve,h8(s,t,e,r).pipe(Be(o=>(t._resolvedData=o,t.data=H(H({},t.data),o),null)))))}function h8(t,e,n,r){let i=A0(t);if(i.length===0)return pe({});let s={};return lt(i).pipe(Nt(o=>f8(t[o],e,n,r).pipe(us(),sn(a=>{if(a instanceof Nl)throw ly(new wo,a);s[o]=a}))),el(1),Be(()=>s),cs(o=>w1(o)?qn:Xc(o)))}function f8(t,e,n,r){let i=Pl(e)??r,s=Ol(t,i),o=s.resolve?s.resolve(e,n):Lt(i,()=>s(e,n));return Ds(o)}function C0(t){return Ln(e=>{let n=t(e);return n?lt(n).pipe(Be(()=>e)):pe(e)})}var W0=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Ae);return r}getResolvedTitleForRoute(n){return n.data[Ph]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ie({token:t,factory:()=>j(S1),providedIn:"root"})}return t})(),S1=(()=>{class t extends W0{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(ae(WP))};static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Do=new te("",{providedIn:"root",factory:()=>({})}),Ya=new te(""),fy=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=j(UI);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return pe(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Ds(Lt(n,()=>r.loadComponent())).pipe(Be(x1),Ln(R1),sn(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Dd(()=>{this.componentLoaders.delete(r)})),s=new Kc(i,()=>new Mt).pipe(Gc());return this.componentLoaders.set(r,s),s}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return pe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=A1(r,this.compiler,n,this.onLoadEndListener).pipe(Dd(()=>{this.childrenLoaders.delete(r)})),o=new Kc(s,()=>new Mt).pipe(Gc());return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function A1(t,e,n,r){return Ds(Lt(n,()=>t.loadChildren())).pipe(Be(x1),Ln(R1),Nt(i=>i instanceof bm||Array.isArray(i)?pe(i):lt(e.compileModuleAsync(i))),Be(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Ya,[],{optional:!0,self:!0}).flat()),{routes:o.map(z0),injector:s}}))}function p8(t){return t&&typeof t=="object"&&"default"in t}function x1(t){return p8(t)?t.default:t}function R1(t){return pe(t)}var py=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=ie({token:t,factory:()=>j(g8),providedIn:"root"})}return t})(),g8=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),q0=new te(""),G0=new te("");function M1(t,e,n){let r=t.get(G0),i=t.get(Bt);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),m8(t)));a.ready.catch(l=>{});let{onViewTransitionCreated:c}=r;return c&&Lt(t,()=>c({transition:a,from:e,to:n})),o}function m8(t){return new Promise(e=>{nh({read:()=>setTimeout(e)},{injector:t})})}var K0=new te(""),gy=(()=>{class t{currentNavigation=Cr(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Mt;transitionAbortWithErrorSubject=new Mt;configLoader=j(fy);environmentInjector=j(kt);destroyRef=j(bi);urlSerializer=j(Ga);rootContexts=j(Ka);location=j(vo);inputBindingEnabled=j(Fh,{optional:!0})!==null;titleStrategy=j(W0);options=j(Do,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=j(py);createViewTransition=j(q0,{optional:!0});navigationErrorHandler=j(K0,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>pe(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new ey(i)),r=i=>this.events.next(new ty(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;ln(()=>{this.transitions?.next(be(H({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new It(null),this.transitions.pipe(Kn(r=>r!==null),Ln(r=>{let i=!1;return pe(r).pipe(Ln(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",$n.SupersededByNewNavigation),qn;this.currentTransition=r,this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?be(H({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>s.abortController.abort()});let o=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!o&&a!=="reload")return this.events.next(new Mi(s.id,this.urlSerializer.serialize(s.rawUrl),"",Al.IgnoredSameUrlNavigation)),s.resolve(!1),qn;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return pe(s).pipe(Ln(c=>(this.events.next(new To(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?qn:Promise.resolve(c))),l8(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),sn(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(d=>(d.finalUrl=c.urlAfterRedirects,d));let l=new Sh(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(o&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:c,extractedUrl:l,source:d,restoredState:h,extras:p}=s,g=new To(c,this.urlSerializer.serialize(l),d,h);this.events.next(g);let v=g1(this.rootComponentType).snapshot;return this.currentTransition=r=be(H({},s),{targetSnapshot:v,urlAfterRedirects:l,extras:be(H({},p),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(S=>(S.finalUrl=l,S)),pe(r)}else return this.events.next(new Mi(s.id,this.urlSerializer.serialize(s.extractedUrl),"",Al.IgnoredByUrlHandlingStrategy)),s.resolve(!1),qn}),sn(s=>{let o=new Qm(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(o)}),Be(s=>(this.currentTransition=r=be(H({},s),{guards:Aq(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),jq(this.environmentInjector,s=>this.events.next(s)),sn(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw ly(this.urlSerializer,s.guardsResult);let o=new Zm(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(o)}),Kn(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",$n.GuardRejected),!1)),C0(s=>{if(s.guards.canActivateChecks.length!==0)return pe(s).pipe(sn(o=>{let a=new Xm(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),Ln(o=>{let a=!1;return pe(o).pipe(u8(this.paramsInheritanceStrategy,this.environmentInjector),sn({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(o,"",$n.NoDataFromResolver)}}))}),sn(o=>{let a=new Jm(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}))}),C0(s=>{let o=a=>{let c=[];if(a.routeConfig?.loadComponent){let l=Pl(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(sn(d=>{a.component=d}),Be(()=>{})))}for(let l of a.children)c.push(...o(l));return c};return Id(o(s.targetSnapshot.root)).pipe(io(null),ls(1))}),C0(()=>this.afterPreactivation()),Ln(()=>{let{currentSnapshot:s,targetSnapshot:o}=r,a=this.createViewTransition?.(this.environmentInjector,s.root,o.root);return a?lt(a).pipe(Be(()=>r)):pe(r)}),Be(s=>{let o=Iq(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=be(H({},s),{targetRouterState:o}),this.currentNavigation.update(a=>(a.targetRouterState=o,a)),r}),sn(()=>{this.events.next(new Ah)}),Sq(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),ls(1),mg(new Re(s=>{let o=r.abortController.signal,a=()=>s.next();return o.addEventListener("abort",a),()=>o.removeEventListener("abort",a)}).pipe(Kn(()=>!i&&!r.targetRouterState),sn(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",$n.Aborted)}))),sn({next:s=>{i=!0,this.lastSuccessfulNavigation=ln(this.currentNavigation),this.events.next(new gr(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),mg(this.transitionAbortWithErrorSubject.pipe(sn(s=>{throw s}))),Dd(()=>{i||this.cancelNavigationTransition(r,"",$n.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),cs(s=>{if(this.destroyed)return r.resolve(!1),qn;if(i=!0,E1(s))this.events.next(new xi(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),Cq(s)?this.events.next(new Ml(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let o=new xl(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let a=Lt(this.environmentInjector,()=>this.navigationErrorHandler?.(o));if(a instanceof Nl){let{message:c,cancellationCode:l}=ly(this.urlSerializer,a);this.events.next(new xi(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new Ml(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(o),s}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return qn}))}))}cancelNavigationTransition(n,r,i){let s=new xi(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=ln(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function y8(t){return t!==Cl}var N1=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=ie({token:t,factory:()=>j(_8),providedIn:"root"})}return t})(),dy=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},_8=(()=>{class t extends dy{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Zr(t)))(i||t)}})();static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),k1=(()=>{class t{urlSerializer=j(Ga);options=j(Do,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=j(vo);urlHandlingStrategy=j(py);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ri;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let s=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,o=i??s;return o instanceof Ri?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=g1(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ie({token:t,factory:()=>j(v8),providedIn:"root"})}return t})(),v8=(()=>{class t extends k1{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof To?this.updateStateMemento():n instanceof Mi?this.commitTransition(r):n instanceof Sh?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Ah?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof xi&&n.code!==$n.SupersededByNewNavigation&&n.code!==$n.Redirect?this.restoreHistory(r):n instanceof xl?this.restoreHistory(r,!0):n instanceof gr&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(n)||s){let a=this.browserPageId,c=H(H({},o),this.generateNgRouterState(i,a));this.location.replaceState(n,"",c)}else{let a=H(H({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===n.finalUrl&&s===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Zr(t)))(i||t)}})();static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function my(t,e){t.events.pipe(Kn(n=>n instanceof gr||n instanceof xi||n instanceof xl||n instanceof Mi),Be(n=>n instanceof gr||n instanceof Mi?0:(n instanceof xi?n.code===$n.Redirect||n.code===$n.SupersededByNewNavigation:!1)?2:1),Kn(n=>n!==2),ls(1)).subscribe(()=>{e()})}var b8={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},E8={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Pt=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=j(RI);stateManager=j(k1);options=j(Do,{optional:!0})||{};pendingTasks=j(Ei);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=j(gy);urlSerializer=j(Ga);location=j(vo);urlHandlingStrategy=j(py);injector=j(kt);_events=new Mt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=j(N1);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=j(Ya,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!j(Fh,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new wt;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=ln(this.navigationTransitions.currentNavigation);if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof xi&&r.code!==$n.Redirect&&r.code!==$n.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof gr)this.navigated=!0;else if(r instanceof Ml){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=H({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||y8(i.source)},o);this.scheduleNavigation(a,Cl,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}vq(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Cl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=H({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s).catch(c=>{this.disposed||this.injector.get(Yn)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return ln(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(z0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=H(H({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let p=i?i.snapshot:this.routerState.snapshot.root;h=d1(p)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),h=this.currentUrlTree.root}return h1(h,n,d,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Io(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Cl,null,r)}navigate(n,r={skipLocationChange:!1}){return w8(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=H({},b8):r===!1?i=H({},E8):i=r,Io(n))return qP(this.currentUrlTree,n,i);let s=this.parseUrl(n);return qP(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((h,p)=>{a=h,c=p});let d=this.pendingTasks.add();return my(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function w8(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new X(4008,!1)}var Co=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Cr(null);get href(){return ln(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Mt;applicationErrorHandler=j(Yn);options=j(Do,{optional:!0});constructor(n,r,i,s,o,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.reactiveHref.set(j(new Dm("href"),{optional:!0}));let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof gr&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Io(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,n,r):i.removeAttribute(s,n)}get urlTree(){return this.routerLinkInput===null?null:Io(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(Z(Pt),Z(Ni),Xd("tabindex"),Z(hr),Z(Zt),Z(ei))};static \u0275dir=Ze({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&qe("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&Va("href",i.reactiveHref(),iI)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",_o],skipLocationChange:[2,"skipLocationChange","skipLocationChange",_o],replaceUrl:[2,"replaceUrl","replaceUrl",_o],routerLink:"routerLink"},features:[Sr]})}return t})(),Q0=(()=>{class t{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new pt;constructor(n,r,i,s,o){this.router=n,this.element=r,this.renderer=i,this.cdr=s,this.link=o,this.routerEventsSubscription=n.events.subscribe(a=>{a instanceof gr&&this.update()})}ngAfterContentInit(){pe(this.links.changes,pe(null)).pipe(no()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=lt(n).pipe(no()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){let r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){let r=I8(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let s=i.urlTree;return s?n.isActive(s,r):!1}}hasActiveLinks(){let n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static \u0275fac=function(r){return new(r||t)(Z(Pt),Z(Zt),Z(hr),Z(Is),Z(Co,8))};static \u0275dir=Ze({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(r&1&&LI(s,Co,5),r&2){let o;VI(o=jI())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Sr]})}return t})();function I8(t){return!!t.paths}var Vh=class{};var P1=(()=>{class t{router;injector;preloadingStrategy;loader;subscription;constructor(n,r,i,s){this.router=n,this.injector=r,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Kn(n=>n instanceof gr),ro(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=_l(s.providers,n,`Route: ${s.path}`));let o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return lt(i).pipe(no())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(n,r):i=pe(null);let s=i.pipe(Nt(o=>o===null?pe(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(n,r);return lt([s,o]).pipe(no())}else return s})}static \u0275fac=function(r){return new(r||t)(ae(Pt),ae(kt),ae(Vh),ae(fy))};static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),O1=new te(""),T8=(()=>{class t{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Cl;restoredId=0;store={};constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof To?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof gr?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Mi&&n.code===Al.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Rl&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(async()=>{await new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Rl(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){EI()};static \u0275prov=ie({token:t,factory:t.\u0275fac})}return t})();function Z0(t,...e){return lr([{provide:Ya,multi:!0,useValue:t},[],{provide:Ni,useFactory:F1,deps:[Pt]},{provide:rh,multi:!0,useFactory:L1},e.map(n=>n.\u0275providers)])}function F1(t){return t.routerState.root}function jh(t,e){return{\u0275kind:t,\u0275providers:e}}function L1(){let t=j(ft);return e=>{let n=t.get(vs);if(e!==n.components[0])return;let r=t.get(Pt),i=t.get(V1);t.get(X0)===1&&r.initialNavigation(),t.get(U1,null,{optional:!0})?.setUpPreloading(),t.get(O1,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var V1=new te("",{factory:()=>new Mt}),X0=new te("",{providedIn:"root",factory:()=>1});function j1(){let t=[{provide:eI,useValue:!0},{provide:X0,useValue:0},wm(()=>{let e=j(ft);return e.get(e0,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(Pt),s=e.get(V1);my(i,()=>{r(!0)}),e.get(gy).afterPreactivation=()=>(r(!0),s.closed?pe(void 0):s),i.initialNavigation()}))})];return jh(2,t)}function B1(){let t=[wm(()=>{j(Pt).setUpLocationChangeListener()}),{provide:X0,useValue:2}];return jh(3,t)}var U1=new te("");function H1(t){return jh(0,[{provide:U1,useExisting:P1},{provide:Vh,useExisting:t}])}function $1(){return jh(8,[H0,{provide:Fh,useExisting:H0}])}function z1(t){yl("NgRouterViewTransitions");let e=[{provide:q0,useValue:M1},{provide:G0,useValue:H({skipNextTransition:!!t?.skipInitialTransition},t)}];return jh(9,e)}var W1=[vo,{provide:Ga,useClass:wo},Pt,Ka,{provide:Ni,useFactory:F1,deps:[Pt]},fy,[]],Bh=(()=>{class t{constructor(){}static forRoot(n,r){return{ngModule:t,providers:[W1,[],{provide:Ya,multi:!0,useValue:n},[],r?.errorHandler?{provide:K0,useValue:r.errorHandler}:[],{provide:Do,useValue:r||{}},r?.useHash?C8():S8(),D8(),r?.preloadingStrategy?H1(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?A8(r):[],r?.bindToComponentInputs?$1().\u0275providers:[],r?.enableViewTransitions?z1().\u0275providers:[],x8()]}}static forChild(n){return{ngModule:t,providers:[{provide:Ya,multi:!0,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ti({type:t});static \u0275inj=Wr({})}return t})();function D8(){return{provide:O1,useFactory:()=>{let t=j(FP),e=j(Le),n=j(Do),r=j(gy),i=j(Ga);return n.scrollOffset&&t.setOffset(n.scrollOffset),new T8(i,r,t,e,n)}}}function C8(){return{provide:ei,useClass:a0}}function S8(){return{provide:ei,useClass:Rm}}function A8(t){return[t.initialNavigation==="disabled"?B1().\u0275providers:[],t.initialNavigation==="enabledBlocking"?j1().\u0275providers:[]]}var Y0=new te("");function x8(){return[{provide:Y0,useFactory:L1},{provide:rh,multi:!0,useExisting:Y0}]}var tO=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(Z(hr),Z(Zt))};static \u0275dir=Ze({type:t})}return t})(),Ty=(()=>{class t extends tO{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Zr(t)))(i||t)}})();static \u0275dir=Ze({type:t,features:[Qn]})}return t})(),Kh=new te("");var R8={provide:Kh,useExisting:cr(()=>Ao),multi:!0};function M8(){let t=xr()?xr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var N8=new te(""),Ao=(()=>{class t extends tO{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!M8())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(Z(hr),Z(Zt),Z(N8,8))};static \u0275dir=Ze({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&qe("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[Di([R8]),Qn]})}return t})();function k8(t){return t==null||P8(t)===0}function P8(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var Dy=new te(""),nO=new te("");function O8(t){return e=>{if(e.value==null||t==null)return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function F8(t){return k8(t.value)?{required:!0}:null}function q1(t){return null}function rO(t){return t!=null}function iO(t){return yo(t)?lt(t):t}function sO(t){let e={};return t.forEach(n=>{e=n!=null?H(H({},e),n):e}),Object.keys(e).length===0?null:e}function oO(t,e){return e.map(n=>n(t))}function L8(t){return!t.validate}function aO(t){return t.map(e=>L8(e)?e:n=>e.validate(n))}function V8(t){if(!t)return null;let e=t.filter(rO);return e.length==0?null:function(n){return sO(oO(n,e))}}function nT(t){return t!=null?V8(aO(t)):null}function j8(t){if(!t)return null;let e=t.filter(rO);return e.length==0?null:function(n){let r=oO(n,e).map(iO);return cE(r).pipe(Be(sO))}}function rT(t){return t!=null?j8(aO(t)):null}function G1(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function B8(t){return t._rawValidators}function U8(t){return t._rawAsyncValidators}function J0(t){return t?Array.isArray(t)?t:[t]:[]}function _y(t,e){return Array.isArray(t)?t.includes(e):t===e}function K1(t,e){let n=J0(e);return J0(t).forEach(i=>{_y(n,i)||n.push(i)}),n}function Y1(t,e){return J0(e).filter(n=>!_y(t,n))}var vy=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=nT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=rT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Vl=class extends vy{name;get formDirective(){return null}get path(){return null}},Gh=class extends vy{_parent=null;name=null;valueAccessor=null},by=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},H8={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},rIe=be(H({},H8),{"[class.ng-submitted]":"isSubmitted"}),jl=(()=>{class t extends by{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(Z(Gh,2))};static \u0275dir=Ze({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&sh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Qn]})}return t})(),Bl=(()=>{class t extends by{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(Z(Vl,10))};static \u0275dir=Ze({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&sh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Qn]})}return t})();var Hh="VALID",yy="INVALID",Fl="PENDING",$h="DISABLED",So=class{},Ey=class extends So{value;source;constructor(e,n){super(),this.value=e,this.source=n}},Wh=class extends So{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},qh=class extends So{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},Ll=class extends So{status;source;constructor(e,n){super(),this.status=e,this.source=n}},eT=class extends So{source;constructor(e){super(),this.source=e}},tT=class extends So{source;constructor(e){super(),this.source=e}};function cO(t){return(Cy(t)?t.validators:t)||null}function $8(t){return Array.isArray(t)?nT(t):t||null}function lO(t,e){return(Cy(e)?e.asyncValidators:t)||null}function z8(t){return Array.isArray(t)?rT(t):t||null}function Cy(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function W8(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new X(1e3,"");if(!r[n])throw new X(1001,"")}function q8(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new X(1002,"")})}var wy=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ln(this.statusReactive)}set status(e){ln(()=>this.statusReactive.set(e))}_status=bl(()=>this.statusReactive());statusReactive=Cr(void 0);get valid(){return this.status===Hh}get invalid(){return this.status===yy}get pending(){return this.status==Fl}get disabled(){return this.status===$h}get enabled(){return this.status!==$h}errors;get pristine(){return ln(this.pristineReactive)}set pristine(e){ln(()=>this.pristineReactive.set(e))}_pristine=bl(()=>this.pristineReactive());pristineReactive=Cr(!0);get dirty(){return!this.pristine}get touched(){return ln(this.touchedReactive)}set touched(e){ln(()=>this.touchedReactive.set(e))}_touched=bl(()=>this.touchedReactive());touchedReactive=Cr(!1);get untouched(){return!this.touched}_events=new Mt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(K1(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(K1(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Y1(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Y1(e,this._rawAsyncValidators))}hasValidator(e){return _y(this._rawValidators,e)}hasAsyncValidator(e){return _y(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(be(H({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new qh(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new qh(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(be(H({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Wh(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Wh(!0,r))}markAsPending(e={}){this.status=Fl;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ll(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(be(H({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=$h,this.errors=null,this._forEachChild(i=>{i.disable(be(H({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ey(this.value,r)),this._events.next(new Ll(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(be(H({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Hh,this._forEachChild(r=>{r.enable(be(H({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(be(H({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Hh||this.status===Fl)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ey(this.value,n)),this._events.next(new Ll(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(be(H({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?$h:Hh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Fl,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=iO(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ll(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new pt,this.statusChanges=new pt}_calculateStatus(){return this._allControlsDisabled()?$h:this.errors?yy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Fl)?Fl:this._anyControlsHaveStatus(yy)?yy:Hh}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Wh(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new qh(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Cy(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=$8(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=z8(this._rawAsyncValidators)}},Iy=class extends wy{constructor(e,n,r){super(cO(n),lO(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){q8(this,!0,e),Object.keys(e).forEach(r=>{W8(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var iT=new te("",{providedIn:"root",factory:()=>sT}),sT="always";function G8(t,e){return[...e.path,t]}function uO(t,e,n=sT){dO(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),Y8(t,e),Z8(t,e),Q8(t,e),K8(t,e)}function Q1(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function K8(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function dO(t,e){let n=B8(t);e.validator!==null?t.setValidators(G1(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=U8(t);e.asyncValidator!==null?t.setAsyncValidators(G1(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Q1(e._rawValidators,i),Q1(e._rawAsyncValidators,i)}function Y8(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&hO(t,e)})}function Q8(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&hO(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function hO(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Z8(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function X8(t,e){t==null,dO(t,e)}function J8(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function eG(t){return Object.getPrototypeOf(t.constructor)===Ty}function tG(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function nG(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===Ao?n=s:eG(s)?r=s:i=s}),i||r||n||null}var rG={provide:Vl,useExisting:cr(()=>Qa)},zh=Promise.resolve(),Qa=(()=>{class t extends Vl{callSetDisabledState;get submitted(){return ln(this.submittedReactive)}_submitted=bl(()=>this.submittedReactive());submittedReactive=Cr(!1);_directives=new Set;form;ngSubmit=new pt;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new Iy({},nT(n),rT(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){zh.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),uO(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){zh.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){zh.then(()=>{let r=this._findContainer(n.path),i=new Iy({});X8(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){zh.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){zh.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),tG(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new eT(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1),this.form._events.next(new tT(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||t)(Z(Dy,10),Z(nO,10),Z(iT,8))};static \u0275dir=Ze({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&qe("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Di([rG]),Qn]})}return t})();function Z1(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function X1(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var iG=class extends wy{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(cO(n),lO(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Cy(n)&&(n.nonNullable||n.initialValueIsDefault)&&(X1(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Z1(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Z1(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){X1(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var sG={provide:Gh,useExisting:cr(()=>Za)},J1=Promise.resolve(),Za=(()=>{class t extends Gh{_changeDetectorRef;callSetDisabledState;control=new iG;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new pt;constructor(n,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=nG(this,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),J8(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){uO(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){J1.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&_o(r);J1.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?G8(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(Z(Vl,9),Z(Dy,10),Z(nO,10),Z(Kh,10),Z(Is,8),Z(iT,8))};static \u0275dir=Ze({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Di([sG]),Qn,Sr]})}return t})();var Ul=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ze({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})(),oG={provide:Kh,useExisting:cr(()=>oT),multi:!0},oT=(()=>{class t extends Ty{writeValue(n){let r=n??"";this.setProperty("value",r)}registerOnChange(n){this.onChange=r=>{n(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Zr(t)))(i||t)}})();static \u0275dir=Ze({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&qe("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Di([oG]),Qn]})}return t})();var aG={provide:Kh,useExisting:cr(()=>Hl),multi:!0};function fO(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function cG(t){return t.split(":")[0]}var Hl=(()=>{class t extends Ty{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=j(vs).injector;destroyRef=j(bi);cdr=j(Is);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,nh({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let r=this._getOptionId(n),i=fO(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=cG(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Zr(t)))(i||t)}})();static \u0275dir=Ze({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&qe("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Di([aG]),Qn]})}return t})(),Sy=(()=>{class t{_element;_renderer;_select;id;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(fO(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||t)(Z(Zt),Z(hr),Z(Hl,9))};static \u0275dir=Ze({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})(),lG={provide:Kh,useExisting:cr(()=>pO),multi:!0};function eO(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function uG(t){return t.split(":")[0]}var pO=(()=>{class t extends Ty{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let c=o[a],l=this._getOptionValue(c.value);i.push(l)}}else{let o=r.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=uG(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Zr(t)))(i||t)}})();static \u0275dir=Ze({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&qe("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Di([lG]),Qn]})}return t})(),Ay=(()=>{class t{_element;_renderer;_select;id;_value;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(eO(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(eO(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||t)(Z(Zt),Z(hr),Z(pO,9))};static \u0275dir=Ze({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})();function dG(t){return typeof t=="number"?t:parseFloat(t)}var gO=(()=>{class t{_validator=q1;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):q1,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ze({type:t,features:[Sr]})}return t})();var hG={provide:Dy,useExisting:cr(()=>aT),multi:!0},aT=(()=>{class t extends gO{min;inputName="min";normalizeInput=n=>dG(n);createValidator=n=>O8(n);static \u0275fac=(()=>{let n;return function(i){return(n||(n=Zr(t)))(i||t)}})();static \u0275dir=Ze({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Va("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[Di([hG]),Qn]})}return t})(),fG={provide:Dy,useExisting:cr(()=>Xa),multi:!0};var Xa=(()=>{class t extends gO{required;inputName="required";normalizeInput=_o;createValidator=n=>F8;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Zr(t)))(i||t)}})();static \u0275dir=Ze({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Va("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Di([fG]),Qn]})}return t})();var pG=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ti({type:t});static \u0275inj=Wr({})}return t})();var $l=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:iT,useValue:n.callSetDisabledState??sT}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ti({type:t});static \u0275inj=Wr({imports:[pG]})}return t})();var MT={};c$(MT,{FirebaseError:()=>Rn,SDK_VERSION:()=>mr,_DEFAULT_ENTRY_NAME:()=>Oi,_addComponent:()=>Zl,_addOrOverwriteComponent:()=>RT,_apps:()=>xo,_clearComponents:()=>y9,_components:()=>Ql,_getProvider:()=>Fi,_isFirebaseApp:()=>zO,_isFirebaseServerApp:()=>vn,_registerComponent:()=>Mn,_removeServiceInstance:()=>$O,_serverApps:()=>Yl,deleteApp:()=>sf,getApp:()=>Li,getApps:()=>rf,initializeApp:()=>Xl,initializeServerApp:()=>WO,onLog:()=>Ly,registerVersion:()=>ze,setLogLevel:()=>Vy});var mO=()=>{};var vO=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},gG=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},xy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4,p=(a&15)<<2|l>>6,g=l&63;c||(g=64,o||(p=64)),r.push(n[d],n[h],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(vO(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):gG(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||h==null)throw new uT;let p=s<<2|a>>4;if(r.push(p),l!==64){let g=a<<4&240|l>>2;if(r.push(g),h!==64){let v=l<<6&192|h;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},uT=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},mG=function(t){let e=vO(t);return xy.encodeByteArray(e,!0)},Qh=function(t){return mG(t).replace(/\./g,"")},Zh=function(t){try{return xy.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Xh(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!yG(n)||(t[n]=Xh(t[n],e[n]));return t}function yG(t){return t!=="__proto__"}function Jh(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var _G=()=>Jh().__FIREBASE_DEFAULTS__,vG=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},bG=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Zh(t[1]);return e&&JSON.parse(e)},Ry=()=>{try{return mO()||_G()||vG()||bG()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hT=t=>{var e,n;return(n=(e=Ry())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},My=t=>{let e=hT(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},fT=()=>{var t;return(t=Ry())===null||t===void 0?void 0:t.config},pT=t=>{var e;return(e=Ry())===null||e===void 0?void 0:e[`_${t}`]};var Ja=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function ri(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zl(t){return(await fetch(t,{credentials:"include"})).ok}function Ny(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Qh(JSON.stringify(n)),Qh(JSON.stringify(o)),""].join(".")}var Yh={};function EG(){let t={prod:[],emulator:[]};for(let e of Object.keys(Yh))Yh[e]?t.emulator.push(e):t.prod.push(e);return t}function wG(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var yO=!1;function Wl(t,e){if(typeof window>"u"||typeof document>"u"||!ri(window.location.host)||Yh[t]===e||Yh[t]||yO)return;Yh[t]=e;function n(p){return`__firebase__banner__${p}`}let r="__firebase__banner",s=EG().prod.length>0;function o(){let p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function l(){let p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{yO=!0,o()},p}function d(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function h(){let p=wG(r),g=n("text"),v=document.getElementById(g)||document.createElement("span"),S=n("learnmore"),C=document.getElementById(S)||document.createElement("a"),k=n("preprendIcon"),O=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){let F=p.element;a(F),d(C,S);let z=l();c(O,k),F.append(O,v,C,z),document.body.appendChild(F)}s?(v.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function IG(){var t;let e=(t=Ry())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EO(){return typeof window<"u"||gT()}function gT(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function wO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IO(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function TO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DO(){let t=dn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function CO(){return!IG()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ef(){try{return typeof indexedDB=="object"}catch{return!1}}function SO(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var TG="FirebaseError",Rn=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=TG,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tr.prototype.create)}},tr=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?DG(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Rn(i,a,r)}};function DG(t,e){return t.replace(CG,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var CG=/\{\$([^}]+)}/g;function mT(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function AO(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ki(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(_O(s)&&_O(o)){if(!ki(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function _O(t){return t!==null&&typeof t=="object"}function ql(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Gl(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Kl(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function ky(t,e){let n=new dT(t,e);return n.subscribe.bind(n)}var dT=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");SG(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=lT),i.error===void 0&&(i.error=lT),i.complete===void 0&&(i.complete=lT);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function SG(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function lT(){}var cIe=14400*1e3;function ot(t){return t&&t._delegate?t._delegate:t}var Jt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ec="[DEFAULT]";var yT=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Ja;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xG(e))try{this.getOrInitializeService({instanceIdentifier:ec})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ec){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ec){return this.instances.has(e)}getOptions(e=ec){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:AG(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ec){return this.component?this.component.multipleInstances?e:ec:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function AG(t){return t===ec?void 0:t}function xG(t){return t.instantiationMode==="EAGER"}var tf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new yT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var _T=[],Oe=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(Oe||{}),xO={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},RG=Oe.INFO,MG={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},NG=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=MG[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Nr=class{constructor(e){this.name=e,this._logLevel=RG,this._logHandler=NG,this._userLogHandler=null,_T.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}};function RO(t){_T.forEach(e=>{e.setLogLevel(t)})}function MO(t,e){for(let n of _T){let r=null;e&&e.level&&(r=xO[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{let a=o.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");s>=(r??i.logLevel)&&t({level:Oe[s].toLowerCase(),message:a,args:o,type:i.name})}}}var kG=(t,e)=>e.some(n=>t instanceof n),NO,kO;function PG(){return NO||(NO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OG(){return kO||(kO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var PO=new WeakMap,bT=new WeakMap,OO=new WeakMap,vT=new WeakMap,wT=new WeakMap;function FG(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Pi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&PO.set(n,t)}).catch(()=>{}),wT.set(e,t),e}function LG(t){if(bT.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});bT.set(t,e)}var ET={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return bT.get(t);if(e==="objectStoreNames")return t.objectStoreNames||OO.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function FO(t){ET=t(ET)}function VG(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Py(this),e,...n);return OO.set(r,e.sort?e.sort():[e]),Pi(r)}:OG().includes(t)?function(...e){return t.apply(Py(this),e),Pi(PO.get(this))}:function(...e){return Pi(t.apply(Py(this),e))}}function jG(t){return typeof t=="function"?VG(t):(t instanceof IDBTransaction&&LG(t),kG(t,PG())?new Proxy(t,ET):t)}function Pi(t){if(t instanceof IDBRequest)return FG(t);if(vT.has(t))return vT.get(t);let e=jG(t);return e!==t&&(vT.set(t,e),wT.set(e,t)),e}var Py=t=>wT.get(t);function VO(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=Pi(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Pi(o.result),c.oldVersion,c.newVersion,Pi(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var BG=["get","getKey","getAll","getAllKeys","count"],UG=["put","add","delete","clear"],IT=new Map;function LO(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(IT.get(e))return IT.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=UG.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||BG.includes(n)))return;let s=async function(o,...a){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&c.done]))[0]};return IT.set(e,s),s}FO(t=>be(H({},t),{get:(e,n,r)=>LO(e,n)||t.get(e,n,r),has:(e,n)=>!!LO(e,n)||t.has(e,n)}));var DT=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HG(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function HG(t){let e=t.getComponent();return e?.type==="VERSION"}var Oy="@firebase/app",CT="0.13.2";var Cs=new Nr("@firebase/app"),$G="@firebase/app-compat",zG="@firebase/analytics-compat",WG="@firebase/analytics",qG="@firebase/app-check-compat",GG="@firebase/app-check",KG="@firebase/auth",YG="@firebase/auth-compat",QG="@firebase/database",ZG="@firebase/data-connect",XG="@firebase/database-compat",JG="@firebase/functions",e9="@firebase/functions-compat",t9="@firebase/installations",n9="@firebase/installations-compat",r9="@firebase/messaging",i9="@firebase/messaging-compat",s9="@firebase/performance",o9="@firebase/performance-compat",a9="@firebase/remote-config",c9="@firebase/remote-config-compat",l9="@firebase/storage",u9="@firebase/storage-compat",d9="@firebase/firestore",h9="@firebase/ai",f9="@firebase/firestore-compat",p9="firebase",g9="11.10.0";var Oi="[DEFAULT]",m9={[Oy]:"fire-core",[$G]:"fire-core-compat",[WG]:"fire-analytics",[zG]:"fire-analytics-compat",[GG]:"fire-app-check",[qG]:"fire-app-check-compat",[KG]:"fire-auth",[YG]:"fire-auth-compat",[QG]:"fire-rtdb",[ZG]:"fire-data-connect",[XG]:"fire-rtdb-compat",[JG]:"fire-fn",[e9]:"fire-fn-compat",[t9]:"fire-iid",[n9]:"fire-iid-compat",[r9]:"fire-fcm",[i9]:"fire-fcm-compat",[s9]:"fire-perf",[o9]:"fire-perf-compat",[a9]:"fire-rc",[c9]:"fire-rc-compat",[l9]:"fire-gcs",[u9]:"fire-gcs-compat",[d9]:"fire-fst",[f9]:"fire-fst-compat",[h9]:"fire-vertex","fire-js":"fire-js",[p9]:"fire-js-all"};var xo=new Map,Yl=new Map,Ql=new Map;function Zl(t,e){try{t.container.addComponent(e)}catch(n){Cs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function RT(t,e){t.container.addOrOverwriteComponent(e)}function Mn(t){let e=t.name;if(Ql.has(e))return Cs.debug(`There were multiple attempts to register component ${e}.`),!1;Ql.set(e,t);for(let n of xo.values())Zl(n,t);for(let n of Yl.values())Zl(n,t);return!0}function Fi(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function $O(t,e,n=Oi){Fi(t,e).clearInstance(n)}function zO(t){return t.options!==void 0}function vn(t){return t==null?!1:t.settings!==void 0}function y9(){Ql.clear()}var _9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kr=new tr("app","Firebase",_9);var Fy=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw kr.create("app-deleted",{appName:this._name})}};function jO(t,e){let n=Zh(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}let i=JSON.parse(n).exp*1e3,s=new Date().getTime();i-s<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}var ST=class extends Fy{constructor(e,n,r,i){let s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{let a=e;super(a.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},n),this._serverConfig.authIdToken&&jO(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&jO(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,ze(Oy,CT,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){sf(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw kr.create("server-app-deleted")}};var mr=g9;function Xl(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Oi,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw kr.create("bad-app-name",{appName:String(i)});if(n||(n=fT()),!n)throw kr.create("no-options");let s=xo.get(i);if(s){if(ki(n,s.options)&&ki(r,s.config))return s;throw kr.create("duplicate-app",{appName:i})}let o=new tf(i);for(let c of Ql.values())o.addComponent(c);let a=new Fy(n,r,o);return xo.set(i,a),a}function WO(t,e){if(EO()&&!gT())throw kr.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!0);let n;zO(t)?n=t.options:n=t;let r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;let i=l=>[...l].reduce((d,h)=>Math.imul(31,d)+h.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw kr.create("finalization-registry-not-supported",{});let s=""+i(JSON.stringify(r)),o=Yl.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;let a=new tf(s);for(let l of Ql.values())a.addComponent(l);let c=new ST(n,e,s,a);return Yl.set(s,c),c}function Li(t=Oi){let e=xo.get(t);if(!e&&t===Oi&&fT())return Xl();if(!e)throw kr.create("no-app",{appName:t});return e}function rf(){return Array.from(xo.values())}async function sf(t){let e=!1,n=t.name;xo.has(n)?(e=!0,xo.delete(n)):Yl.has(n)&&t.decRefCount()<=0&&(Yl.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function ze(t,e,n){var r;let i=(r=m9[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cs.warn(a.join(" "));return}Mn(new Jt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function Ly(t,e){if(t!==null&&typeof t!="function")throw kr.create("invalid-log-argument");MO(t,e)}function Vy(t){RO(t)}var v9="firebase-heartbeat-database",b9=1,nf="firebase-heartbeat-store",TT=null;function qO(){return TT||(TT=VO(v9,b9,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(nf)}catch(n){console.warn(n)}}}}).catch(t=>{throw kr.create("idb-open",{originalErrorMessage:t.message})})),TT}async function E9(t){try{let n=(await qO()).transaction(nf),r=await n.objectStore(nf).get(GO(t));return await n.done,r}catch(e){if(e instanceof Rn)Cs.warn(e.message);else{let n=kr.create("idb-get",{originalErrorMessage:e?.message});Cs.warn(n.message)}}}async function BO(t,e){try{let r=(await qO()).transaction(nf,"readwrite");await r.objectStore(nf).put(e,GO(t)),await r.done}catch(n){if(n instanceof Rn)Cs.warn(n.message);else{let r=kr.create("idb-set",{originalErrorMessage:n?.message});Cs.warn(r.message)}}}function GO(t){return`${t.name}!${t.options.appId}`}var w9=1024,I9=30,AT=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new xT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=UO();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>I9){let o=D9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Cs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=UO(),{heartbeatsToSend:r,unsentEntries:i}=T9(this._heartbeatsCache.heartbeats),s=Qh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Cs.warn(n),""}}};function UO(){return new Date().toISOString().substring(0,10)}function T9(t,e=w9){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),HO(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),HO(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var xT=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ef()?SO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await E9(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return BO(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return BO(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function HO(t){return Qh(JSON.stringify({version:2,heartbeats:t})).length}function D9(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function C9(t){Mn(new Jt("platform-logger",e=>new DT(e),"PRIVATE")),Mn(new Jt("heartbeat",e=>new AT(e),"PRIVATE")),ze(Oy,CT,t),ze(Oy,CT,"esm2017"),ze("fire-js","")}C9("");var S9="firebase",A9="11.10.0";ze(S9,A9,"app");function KO(t){t===void 0&&(t=j(ft));let e=t.get(ul);return n=>new Re(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let a=n.subscribe({next:c=>{r.next(c),o()},complete:()=>{r.complete(),o()},error:c=>{r.error(c),o()}});return a.add(()=>{r.unsubscribe(),o()}),a})}var Vi=new ja("ANGULARFIRE2_VERSION");function nc(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Ro=(t,e)=>{let n=e?[e]:rf(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Jl=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(Jl||{}),YO=Sm()&&typeof Zone<"u"?Jl.WARN:Jl.SILENT;var jy=class{zone;delegate;constructor(e,n=oE){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,n,r)}},ji=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=j(Le);this.outsideAngular=n.runOutsideAngular(()=>new jy(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new jy(typeof Zone>"u"?void 0:Zone.current,sE))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),QO=!1;function x9(t,e){!QO&&(YO>Jl.SILENT||Sm())&&(QO=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),YO>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function R9(t){let e=j(Le,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function tc(t){let e=j(Le,{optional:!0});return e?e.run(()=>t()):t()}var M9=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),Lt(n,()=>tc(()=>t.apply(void 0,r)))),at=(t,e,n)=>(n||=e?Jl.WARN:Jl.VERBOSE,function(){let r,i=arguments,s,o,a;try{s=j(ji),o=j(ul),a=j(kt)}catch{return x9(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=tc(()=>o.add())),i[l]=M9(i[l],r,a));let c=R9(()=>t.apply(this,i));return e?c instanceof Re?c.pipe(to(s.outsideAngular),eo(s.insideAngular),KO(a)):c instanceof Promise?tc(()=>{let l=o.add();return new Promise((d,h)=>{c.then(p=>Lt(a,()=>tc(()=>d(p))),p=>Lt(a,()=>tc(()=>h(p)))).finally(l)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:tc(()=>c):c instanceof Re?c.pipe(to(s.outsideAngular),eo(s.insideAngular)):tc(()=>c)});var ii=class{constructor(e){return e}},Ss=class{constructor(){return rf()}};function N9(t){return t&&t.length===1?t[0]:new ii(Li())}var NT=new te("angularfire2._apps"),k9={provide:ii,useFactory:N9,deps:[[new Qt,NT]]},P9={provide:Ss,deps:[[new Qt,NT]]};function O9(t){return(e,n)=>{let r=n.get(dr);ze("angularfire",Vi.full,"core"),ze("angularfire",Vi.full,"app"),ze("angular",QI.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new ii(i)}}function ZO(t,...e){return lr([k9,P9,{provide:NT,useFactory:O9(t),multi:!0,deps:[Le,ft,ji,...e]}])}var XO=at(Xl,!0);var F9=new Map,L9={activated:!1,tokenObservers:[]},V9={initialized:!1,enabled:!1};function si(t){return F9.get(t)||Object.assign({},L9)}function nF(){return V9}var j9="https://content-firebaseappcheck.googleapis.com/v1";var B9="exchangeDebugToken",JO={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},JIe=1440*60*1e3;var OT=class{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Ja,this.pending.promise.catch(n=>{}),await U9(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Ja,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function U9(t){return new Promise(e=>{setTimeout(e,t)})}var H9={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Mo=new tr("appCheck","AppCheck",H9);function rF(t){if(!si(t).activated)throw Mo.create("use-before-activation",{appName:t.name})}async function iF({url:t,body:e},n){let r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){let h=await i.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}let s={method:"POST",body:JSON.stringify(e),headers:r},o;try{o=await fetch(t,s)}catch(h){throw Mo.create("fetch-network-error",{originalErrorMessage:h?.message})}if(o.status!==200)throw Mo.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(h){throw Mo.create("fetch-parse-error",{originalErrorMessage:h?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw Mo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(c[1])*1e3,d=Date.now();return{token:a.token,expireTimeMillis:d+l,issuedAtTimeMillis:d}}function sF(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${j9}/projects/${n}/apps/${r}:${B9}?key=${i}`,body:{debug_token:e}}}var $9="firebase-app-check-database",z9=1,FT="firebase-app-check-store";var By=null;function W9(){return By||(By=new Promise((t,e)=>{try{let n=indexedDB.open($9,z9);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Mo.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(FT,{keyPath:"compositeKey"})}}}catch(n){e(Mo.create("storage-open",{originalErrorMessage:n?.message}))}}),By)}function q9(t,e){return G9(K9(t),e)}async function G9(t,e){let r=(await W9()).transaction(FT,"readwrite"),s=r.objectStore(FT).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var l;a(Mo.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})}function K9(t){return`${t.options.appId}-${t.name}`}var of=new Nr("@firebase/app-check");function kT(t,e){return ef()?q9(t,e).catch(n=>{of.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function oF(){return nF().enabled}async function aF(){let t=nF();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var Y9={error:"UNKNOWN_ERROR"};function Q9(t){return xy.encodeString(JSON.stringify(t),!1)}async function LT(t,e=!1,n=!1){let r=t.app;rF(r);let i=si(r),s=i.token,o;if(s&&!af(s)&&(i.token=void 0,s=void 0),!s){let l=await i.cachedTokenPromise;l&&(af(l)?s=l:await kT(r,void 0))}if(!e&&s&&af(s))return{token:s.token};let a=!1;if(oF())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=iF(sF(r,await aF()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=await i.exchangeTokenPromise;return await kT(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?of.warn(l.message):n&&of.error(l),PT(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=await si(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?of.warn(l.message):n&&of.error(l),o=l}let c;return s?o?af(s)?c={token:s.token,internalError:o}:c=PT(o):(c={token:s.token},i.token=s,await kT(r,s)):c=PT(o),a&&e7(r,c),c}async function Z9(t){let e=t.app;rF(e);let{provider:n}=si(e);if(oF()){let r=await aF(),{token:i}=await iF(sF(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await n.getToken();return{token:r}}}function X9(t,e,n,r){let{app:i}=t,s=si(i),o={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&af(s.token)){let a=s.token;Promise.resolve().then(()=>{n({token:a.token}),eF(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>eF(t))}function cF(t,e){let n=si(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function eF(t){let{app:e}=t,n=si(e),r=n.tokenRefresher;r||(r=J9(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function J9(t){let{app:e}=t;return new OT(async()=>{let n=si(e),r;if(n.token?r=await LT(t,!0):r=await LT(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let n=si(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},JO.RETRIAL_MIN_WAIT,JO.RETRIAL_MAX_WAIT)}function e7(t,e){let n=si(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function af(t){return t.expireTimeMillis-Date.now()>0}function PT(t){return{token:Q9(Y9),error:t}}var VT=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=si(this.app);for(let n of e)cF(this.app,n.next);return Promise.resolve()}};function t7(t,e){return new VT(t,e)}function n7(t){return{getToken:e=>LT(t,e),getLimitedUseToken:()=>Z9(t),addTokenListener:e=>X9(t,"INTERNAL",e),removeTokenListener:e=>cF(t.app,e)}}var r7="@firebase/app-check",i7="0.10.1";var s7="app-check",tF="app-check-internal";function o7(){Mn(new Jt(s7,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return t7(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(tF).initialize()})),Mn(new Jt(tF,t=>{let e=t.getProvider("app-check").getImmediate();return n7(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ze(r7,i7)}o7();var a7="app-check";var No=class{constructor(){return Ro(a7)}};var c7=["localhost","0.0.0.0","127.0.0.1"],d0e=typeof window<"u"&&c7.includes(window.location.hostname);function DF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var CF=DF,SF=new tr("auth","Firebase",DF());var qy=new Nr("@firebase/auth");function l7(t,...e){qy.logLevel<=Oe.WARN&&qy.warn(`Auth (${mr}): ${t}`,...e)}function Hy(t,...e){qy.logLevel<=Oe.ERROR&&qy.error(`Auth (${mr}): ${t}`,...e)}function Pr(t,...e){throw oD(t,...e)}function oi(t,...e){return oD(t,...e)}function sD(t,e,n){let r=Object.assign(Object.assign({},CF()),{[e]:n});return new tr("auth","Firebase",r).create(e,{appName:t.name})}function Oo(t){return sD(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function u7(t,e,n){let r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Pr(t,"argument-error"),sD(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function oD(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return SF.create(t,...e)}function _e(t,e,...n){if(!t)throw oD(e,...n)}function As(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Hy(e),new Error(e)}function Rs(t,e){t||As(e)}function UT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function d7(){return lF()==="http:"||lF()==="https:"}function lF(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function h7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(d7()||IO()||"connection"in navigator)?navigator.onLine:!0}function f7(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var rc=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Rs(n>e,"Short delay should be less than long delay!"),this.isMobile=bO()||TO()}get(){return h7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function aD(t,e){Rs(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Gy=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;As("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;As("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;As("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var p7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var g7=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],m7=new rc(3e4,6e4);function sc(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Fo(t,e,n,r,i={}){return AF(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=ql(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);let l=Object.assign({method:e,headers:c},s);return wO()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&ri(t.emulatorConfig.host)&&(l.credentials="include"),Gy.fetch()(await xF(t,t.config.apiHost,n,a),l)})}async function AF(t,e,n){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},p7),e);try{let i=new HT(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw Uy(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Uy(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Uy(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Uy(t,"user-disabled",o);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw sD(t,d,l);Pr(t,d)}}catch(i){if(i instanceof Rn)throw i;Pr(t,"network-request-failed",{message:String(i)})}}async function o_(t,e,n,r,i={}){let s=await Fo(t,e,n,r,i);return"mfaPendingCredential"in s&&Pr(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function xF(t,e,n,r){let i=`${e}${n}?${r}`,s=t,o=s.config.emulator?aD(t.config,i):`${t.config.apiScheme}://${i}`;return g7.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function y7(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var HT=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(oi(this.auth,"network-request-failed")),m7.get())})}};function Uy(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=oi(t,e,r);return i.customData._tokenResponse=n,i}function uF(t){return t!==void 0&&t.enterprise!==void 0}var $T=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return y7(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};async function _7(t,e){return Fo(t,"GET","/v2/recaptchaConfig",sc(t,e))}async function v7(t,e){return Fo(t,"POST","/v1/accounts:delete",e)}async function Ky(t,e){return Fo(t,"POST","/v1/accounts:lookup",e)}function lf(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cD(t,e=!1){let n=ot(t),r=await n.getIdToken(e),i=lD(r);_e(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:lf(jT(i.auth_time)),issuedAtTime:lf(jT(i.iat)),expirationTime:lf(jT(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function jT(t){return Number(t)*1e3}function lD(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Hy("JWT malformed, contained fewer than 3 sections"),null;try{let i=Zh(n);return i?JSON.parse(i):(Hy("Failed to decode base64 JWT payload"),null)}catch(i){return Hy("Caught error parsing JWT payload as JSON",i?.toString()),null}}function dF(t){let e=lD(t);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function df(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Rn&&b7(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function b7({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var zT=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var hf=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=lf(this.lastLoginAt),this.creationTime=lf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Yy(t){var e;let n=t.auth,r=await t.getIdToken(),i=await df(t,Ky(n,{idToken:r}));_e(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?RF(s.providerUserInfo):[],a=E7(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,d=c?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new hf(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function uD(t){let e=ot(t);await Yy(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function E7(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function RF(t){return t.map(e=>{var{providerId:n}=e,r=tg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function w7(t,e){let n=await AF(t,{},async()=>{let r=ql({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await xF(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return t.emulatorConfig&&ri(t.emulatorConfig.host)&&(c.credentials="include"),Gy.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function I7(t,e){return Fo(t,"POST","/v2/accounts:revokeToken",sc(t,e))}var uf=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){_e(e.length!==0,"internal-error");let n=dF(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:s}=await w7(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(_e(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(_e(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(_e(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return As("not implemented")}};function ko(t,e){_e(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Po=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=tg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new hf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let n=await df(this,this.stsTokenManager.getToken(this.auth,e));return _e(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return cD(this,e)}reload(){return uD(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Yy(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vn(this.auth.app))return Promise.reject(Oo(this.auth));let e=await this.getIdToken();return await df(this,v7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,d;let h=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,S=(a=n.tenantId)!==null&&a!==void 0?a:void 0,C=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,k=(l=n.createdAt)!==null&&l!==void 0?l:void 0,O=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:F,emailVerified:z,isAnonymous:W,providerData:K,stsTokenManager:I}=n;_e(F&&I,e,"internal-error");let _=uf.fromJSON(this.name,I);_e(typeof F=="string",e,"internal-error"),ko(h,e.name),ko(p,e.name),_e(typeof z=="boolean",e,"internal-error"),_e(typeof W=="boolean",e,"internal-error"),ko(g,e.name),ko(v,e.name),ko(S,e.name),ko(C,e.name),ko(k,e.name),ko(O,e.name);let E=new t({uid:F,auth:e,email:p,emailVerified:z,displayName:h,isAnonymous:W,photoURL:v,phoneNumber:g,tenantId:S,stsTokenManager:_,createdAt:k,lastLoginAt:O});return K&&Array.isArray(K)&&(E.providerData=K.map(w=>Object.assign({},w))),C&&(E._redirectEventId=C),E}static async _fromIdTokenResponse(e,n,r=!1){let i=new uf;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Yy(s),s}static async _fromGetAccountInfoResponse(e,n,r){let i=n.users[0];_e(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?RF(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new uf;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new hf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c}};var hF=new Map;function xs(t){Rs(t instanceof Function,"Expected a class definition");let e=hF.get(t);return e?(Rs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,hF.set(t,e),e)}var T7=(()=>{class t{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,r){this.storage[n]=r}async _get(n){let r=this.storage[n];return r===void 0?null:r}async _remove(n){delete this.storage[n]}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),WT=T7;function $y(t,e,n){return`firebase:${t}:${e}:${n}`}var Qy=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=$y(this.userKey,i.apiKey,s),this.fullPersistenceKey=$y("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await Ky(this.auth,{idToken:e}).catch(()=>{});return n?Po._fromGetAccountInfoResponse(this.auth,n,e):null}return Po._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new t(xs(WT),e,r);let i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),s=i[0]||xs(WT),o=$y(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let d=await l._get(o);if(d){let h;if(typeof d=="string"){let p=await Ky(e,{idToken:d}).catch(()=>{});if(!p)break;h=await Po._fromGetAccountInfoResponse(e,p,d)}else h=Po._fromJSON(e,d);l!==s&&(a=h),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new t(s,e,r))}};function fF(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(MF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FF(e))return"Blackberry";if(LF(e))return"Webos";if(NF(e))return"Safari";if((e.includes("chrome/")||kF(e))&&!e.includes("edge/"))return"Chrome";if(OF(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function MF(t=dn()){return/firefox\//i.test(t)}function NF(t=dn()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kF(t=dn()){return/crios\//i.test(t)}function PF(t=dn()){return/iemobile/i.test(t)}function OF(t=dn()){return/android/i.test(t)}function FF(t=dn()){return/blackberry/i.test(t)}function LF(t=dn()){return/webos/i.test(t)}function dD(t=dn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function D7(t=dn()){var e;return dD(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function C7(){return DO()&&document.documentMode===10}function VF(t=dn()){return dD(t)||OF(t)||LF(t)||FF(t)||/windows phone/i.test(t)||PF(t)}function jF(t,e=[]){let n;switch(t){case"Browser":n=fF(dn());break;case"Worker":n=`${fF(dn())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${mr}/${r}`}var qT=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function S7(t,e={}){return Fo(t,"GET","/v2/passwordPolicy",sc(t,e))}var A7=6,GT=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:A7,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var KT=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zy(this),this.idTokenSubscription=new Zy(this),this.beforeStateQueue=new qT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=SF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=xs(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Qy.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await Ky(this,{idToken:e}),r=await Po._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(vn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Yy(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=f7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vn(this.app))return Promise.reject(Oo(this));let n=e?ot(e):null;return n&&_e(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vn(this.app)?Promise.reject(Oo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vn(this.app)?Promise.reject(Oo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await S7(this),n=new GT(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new tr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await I7(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&xs(e)||this._popupRedirectResolver;_e(n,this,"argument-error"),this.redirectPersistenceManager=await Qy.create(this,[xs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&l7(`Error while retrieving App Check token: ${n.error}`),n?.token}};function oc(t){return ot(t)}var Zy=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=ky(n=>this.observer=n)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var a_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function x7(t){a_=t}function BF(t){return a_.loadJS(t)}function R7(){return a_.recaptchaEnterpriseScript}function M7(){return a_.gapiScript}function UF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var YT=class{constructor(){this.enterprise=new QT}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},QT=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var N7="recaptcha-enterprise",HF="NO_RECAPTCHA",ZT=class{constructor(e){this.type=N7,this.auth=oc(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{_7(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new $T(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})})}function i(s,o,a){let c=window.grecaptcha;uF(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(HF)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new YT().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&uF(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=R7();c.length!==0&&(c+=a),BF(c).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}};async function cf(t,e,n,r=!1,i=!1){let s=new ZT(t),o;if(i)o=HF;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}let a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function pF(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=await cf(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=await cf(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){let a=await cf(t,e,n);return r(t,a).catch(async c=>{var l;if(((l=t._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let d=await cf(t,e,n,!1,!0);return r(t,d)}return Promise.reject(c)})}else{let a=await cf(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}function hD(t,e){let n=Fi(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(ki(s,e??{}))return i;Pr(i,"already-initialized")}return n.initialize({options:e})}function k7(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(xs);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function fD(t,e,n){let r=oc(t);_e(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=$F(e),{host:o,port:a}=P7(e),c=a===null?"":`:${a}`,l={url:`${s}//${o}${c}/`},d=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){_e(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),_e(ki(l,r.config.emulator)&&ki(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,ri(o)?(zl(`${s}//${o}${c}`),Wl("Auth",!0)):i||O7()}function $F(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function P7(t){let e=$F(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:gF(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:gF(o)}}}function gF(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function O7(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var tu=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return As("not implemented")}_getIdTokenResponse(e){return As("not implemented")}_linkToIdToken(e,n){return As("not implemented")}_getReauthenticationResolver(e){return As("not implemented")}};async function F7(t,e){return Fo(t,"POST","/v1/accounts:signUp",e)}async function L7(t,e){return o_(t,"POST","/v1/accounts:signInWithPassword",sc(t,e))}async function V7(t,e){return o_(t,"POST","/v1/accounts:signInWithEmailLink",sc(t,e))}async function j7(t,e){return o_(t,"POST","/v1/accounts:signInWithEmailLink",sc(t,e))}var ff=class t extends tu{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pF(e,n,"signInWithPassword",L7,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return V7(e,{email:this._email,oobCode:this._password});default:Pr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pF(e,r,"signUpPassword",F7,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return j7(e,{idToken:n,email:this._email,oobCode:this._password});default:Pr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function eu(t,e){return o_(t,"POST","/v1/accounts:signInWithIdp",sc(t,e))}var B7="http://localhost",Xy=class t extends tu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Pr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=tg(n,["providerId","signInMethod"]);if(!r||!i)return null;let o=new t(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let n=this.buildRequest();return eu(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,eu(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,eu(e,n)}buildRequest(){let e={requestUri:B7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ql(n)}return e}};function U7(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function H7(t){let e=Gl(Kl(t)).link,n=e?Gl(Kl(e)).deep_link_id:null,r=Gl(Kl(t)).deep_link_id;return(r?Gl(Kl(r)).link:null)||r||n||e||t}var Jy=class t{constructor(e){var n,r,i,s,o,a;let c=Gl(Kl(e)),l=(n=c.apiKey)!==null&&n!==void 0?n:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,h=U7((i=c.mode)!==null&&i!==void 0?i:null);_e(l&&d&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=d,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=H7(e);try{return new t(n)}catch{return null}}};var zF=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return ff._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Jy.parseLink(r);return _e(i,"argument-error"),ff._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),pf=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var e_=class extends pf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var pD=(()=>{class t extends e_{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return Xy._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com";return t})();var gf=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){let s=await Po._fromIdTokenResponse(e,r,i),o=mF(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);let i=mF(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})}};function mF(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var XT=class t extends Rn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function WF(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?XT._fromErrorAndOperation(t,s,e,r):s})}async function $7(t,e,n=!1){let r=await df(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return gf._forOperation(t,"link",r)}async function z7(t,e,n=!1){let{auth:r}=t;if(vn(r.app))return Promise.reject(Oo(r));let i="reauthenticate";try{let s=await df(t,WF(r,i,e,t),n);_e(s.idToken,r,"internal-error");let o=lD(s.idToken);_e(o,r,"internal-error");let{sub:a}=o;return _e(t.uid===a,r,"user-mismatch"),gf._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Pr(r,"user-mismatch"),s}}async function qF(t,e,n=!1){if(vn(t.app))return Promise.reject(Oo(t));let r="signIn",i=await WF(t,r,e),s=await gf._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function gD(t,e){return qF(oc(t),e)}async function W7(t){let e=oc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function mD(t,e,n){return vn(t.app)?Promise.reject(Oo(t)):gD(ot(t),zF.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&W7(t),r})}function yD(t,e,n,r){return ot(t).onIdTokenChanged(e,n,r)}function _D(t,e,n){return ot(t).beforeAuthStateChanged(e,n)}function vD(t,e,n,r){return ot(t).onAuthStateChanged(e,n,r)}function bD(t){return ot(t).signOut()}var t_="__sak";var n_=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(t_,"1"),this.storage.removeItem(t_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var q7=1e3,G7=10,K7=(()=>{class t extends n_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VF(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);C7()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,G7):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},q7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(n,r){await super._set(n,r),this.localCache[n]=JSON.stringify(r)}async _get(n){let r=await super._get(n);return this.localCache[n]=JSON.stringify(r),r}async _remove(n){await super._remove(n),delete this.localCache[n]}}return t.type="LOCAL",t})(),GF=K7;var Y7=(()=>{class t extends n_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),ED=Y7;function Q7(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}var Z7=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}async handleEvent(n){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(async d=>d(r.origin,o)),l=await Q7(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function wD(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var JT=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=wD("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){let p=h;if(p.data.eventId===l)switch(p.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function Bi(){return window}function X7(t){Bi().location.href=t}function KF(){return typeof Bi().WorkerGlobalScope<"u"&&typeof Bi().importScripts=="function"}async function J7(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eK(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function tK(){return KF()?self:null}var YF="firebaseLocalStorageDb",nK=1,r_="firebaseLocalStorage",QF="fbase_key",ic=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function c_(t,e){return t.transaction([r_],e?"readwrite":"readonly").objectStore(r_)}function rK(){let t=indexedDB.deleteDatabase(YF);return new ic(t).toPromise()}function eD(){let t=indexedDB.open(YF,nK);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(r_,{keyPath:QF})}catch(i){n(i)}}),t.addEventListener("success",async()=>{let r=t.result;r.objectStoreNames.contains(r_)?e(r):(r.close(),await rK(),e(await eD()))})})}async function yF(t,e,n){let r=c_(t,!0).put({[QF]:e,value:n});return new ic(r).toPromise()}async function iK(t,e){let n=c_(t,!1).get(e),r=await new ic(n).toPromise();return r===void 0?null:r.value}function _F(t,e){let n=c_(t,!0).delete(e);return new ic(n).toPromise()}var sK=800,oK=3,aK=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await eD(),this.db)}async _withRetries(n){let r=0;for(;;)try{let i=await this._openDb();return await n(i)}catch(i){if(r++>oK)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return KF()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Z7._getInstance(tK()),this.receiver._subscribe("keyChanged",async(n,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(n,r)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await J7(),!this.activeServiceWorker)return;this.sender=new JT(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(n){if(!(!this.sender||!this.activeServiceWorker||eK()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let n=await eD();return await yF(n,t_,"1"),await _F(n,t_),!0}catch{}return!1}async _withPendingWrite(n){this.pendingWrites++;try{await n()}finally{this.pendingWrites--}}async _set(n,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>yF(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)))}async _get(n){let r=await this._withRetries(i=>iK(i,n));return this.localCache[n]=r,r}async _remove(n){return this._withPendingWrite(async()=>(await this._withRetries(r=>_F(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)))}async _poll(){let n=await this._withRetries(s=>{let o=c_(s,!1).getAll();return new ic(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),ZF=aK;var v0e=UF("rcb"),b0e=new rc(3e4,6e4);function XF(t,e){return e?xs(e):(_e(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var mf=class extends tu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return eu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return eu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return eu(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function cK(t){return qF(t.auth,new mf(t),t.bypassAuthState)}function lK(t){let{auth:e,user:n}=t;return _e(n,e,"internal-error"),z7(n,new mf(t),t.bypassAuthState)}async function uK(t){let{auth:e,user:n}=t;return _e(n,e,"internal-error"),$7(n,new mf(t),t.bypassAuthState)}var i_=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cK;case"linkViaPopup":case"linkViaRedirect":return uK;case"reauthViaPopup":case"reauthViaRedirect":return lK;default:Pr(this.auth,"internal-error")}}resolve(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var dK=new rc(2e3,1e4);async function ID(t,e,n){if(vn(t.app))return Promise.reject(oi(t,"operation-not-supported-in-this-environment"));let r=oc(t);u7(t,e,pf);let i=XF(r,n);return new hK(r,"signInViaPopup",e,i).executeNotNull()}var hK=(()=>{class t extends i_{constructor(n,r,i,s,o){super(n,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}async executeNotNull(){let n=await this.execute();return _e(n,this.auth,"internal-error"),n}async onExecution(){Rs(this.filter.length===1,"Popup operations only handle one event");let n=wD();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var n;return((n=this.authWindow)===null||n===void 0?void 0:n.associatedEvent)||null}cancel(){this.reject(oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){let n=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,dK.get())};n()}}t.currentPopupAction=null;return t})(),fK="pendingRedirect",zy=new Map,tD=class extends i_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=zy.get(this.auth._key());if(!e){try{let r=await pK(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}zy.set(this.auth._key(),e)}return this.bypassAuthState||zy.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function pK(t,e){let n=yK(e),r=mK(t);if(!await r._isAvailable())return!1;let i=await r._get(n)==="true";return await r._remove(n),i}function gK(t,e){zy.set(t._key(),e)}function mK(t){return xs(t._redirectPersistence)}function yK(t){return $y(fK,t.config.apiKey,t.name)}async function _K(t,e,n=!1){if(vn(t.app))return Promise.reject(Oo(t));let r=oc(t),i=XF(r,e),o=await new tD(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var vK=600*1e3,nD=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bK(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!JF(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(oi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vK&&this.cachedEventUids.clear(),this.cachedEventUids.has(vF(e))}saveEventToCache(e){this.cachedEventUids.add(vF(e)),this.lastProcessedEventTime=Date.now()}};function vF(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function JF({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function bK(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JF(t);default:return!1}}async function EK(t,e={}){return Fo(t,"GET","/v1/projects",e)}var wK=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IK=/^https?/;async function TK(t){if(t.config.emulator)return;let{authorizedDomains:e}=await EK(t);for(let n of e)try{if(DK(n))return}catch{}Pr(t,"unauthorized-domain")}function DK(t){let e=UT(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!IK.test(n))return!1;if(wK.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var CK=new rc(3e4,6e4);function bF(){let t=Bi().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function SK(t){return new Promise((e,n)=>{var r,i,s;function o(){bF(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bF(),n(oi(t,"network-request-failed"))},timeout:CK.get()})}if(!((i=(r=Bi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Bi().gapi)===null||s===void 0)&&s.load)o();else{let a=UF("iframefcb");return Bi()[a]=()=>{gapi.load?o():n(oi(t,"network-request-failed"))},BF(`${M7()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Wy=null,e})}var Wy=null;function AK(t){return Wy=Wy||SK(t),Wy}var xK=new rc(5e3,15e3),RK="__/auth/iframe",MK="emulator/auth/iframe",NK={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kK=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PK(t){let e=t.config;_e(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?aD(e,MK):`https://${t.config.authDomain}/${RK}`,r={apiKey:e.apiKey,appName:t.name,v:mr},i=kK.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ql(r).slice(1)}`}async function OK(t){let e=await AK(t),n=Bi().gapi;return _e(n,t,"internal-error"),e.open({where:document.body,url:PK(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:NK,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=oi(t,"network-request-failed"),a=Bi().setTimeout(()=>{s(o)},xK.get());function c(){Bi().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}var FK={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LK=500,VK=600,jK="_blank",BK="http://localhost",s_=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function UK(t,e,n,r=LK,i=VK){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},FK),{width:r.toString(),height:i.toString(),top:s,left:o}),l=dn().toLowerCase();n&&(a=kF(l)?jK:n),MF(l)&&(e=e||BK,c.scrollbars="yes");let d=Object.entries(c).reduce((p,[g,v])=>`${p}${g}=${v},`,"");if(D7(l)&&a!=="_self")return HK(e||"",a),new s_(null);let h=window.open(e||"",a,d);_e(h,t,"popup-blocked");try{h.focus()}catch{}return new s_(h)}function HK(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var $K="__/auth/handler",zK="emulator/auth/handler",WK=encodeURIComponent("fac");async function EF(t,e,n,r,i,s){_e(t.config.authDomain,t,"auth-domain-config-required"),_e(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:mr,eventId:i};if(e instanceof pf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",AO(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,h]of Object.entries(s||{}))o[d]=h}if(e instanceof e_){let d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=await t._getAppCheckToken(),l=c?`#${WK}=${encodeURIComponent(c)}`:"";return`${qK(t)}?${ql(a).slice(1)}${l}`}function qK({config:t}){return t.emulator?aD(t,zK):`https://${t.authDomain}/${$K}`}var BT="webStorageSupport",rD=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ED,this._completeRedirectFn=_K,this._overrideRedirectResult=gK}async _openPopup(e,n,r,i){var s;Rs((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=await EF(e,n,r,UT(),i);return UK(e,o,wD())}async _openRedirect(e,n,r,i){await this._originValidation(e);let s=await EF(e,n,r,UT(),i);return X7(s),new Promise(()=>{})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Rs(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){let n=await OK(e),r=new nD(e);return n.register("authEvent",i=>(_e(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(BT,{type:BT},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[BT];o!==void 0&&n(!!o),Pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=TK(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return VF()||NF()||dD()}},eL=rD;var wF="@firebase/auth",IF="1.10.8";var iD=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function GK(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KK(t){Mn(new Jt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;_e(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jF(t)},l=new KT(r,i,s,c);return k7(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Mn(new Jt("auth-internal",e=>{let n=oc(e.getProvider("auth").getImmediate());return(r=>new iD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ze(wF,IF,GK(t)),ze(wF,IF,"esm2017")}var YK=300,QK=pT("authIdTokenMaxAge")||YK,TF=null,ZK=t=>async e=>{let n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>QK)return;let i=n?.token;TF!==i&&(TF=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function TD(t=Li()){let e=Fi(t,"auth");if(e.isInitialized())return e.getImmediate();let n=hD(t,{popupRedirectResolver:eL,persistence:[ZF,GF,ED]}),r=pT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=ZK(s.toString());_D(n,o,()=>o(n.currentUser)),yD(n,a=>o(a))}}let i=hT("auth");return i&&fD(n,`http://${i}`),n}function XK(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}x7({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=oi("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",XK().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KK("Browser");var tL="auth",en=class{constructor(e){return e}},ac=class{constructor(){return Ro(tL)}};var DD=new te("angularfire2.auth-instances");function BY(t,e){let n=nc(tL,t,e);return n&&new en(n)}function UY(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new en(r)}}var HY={provide:ac,deps:[[new Qt,DD]]},$Y={provide:en,useFactory:BY,deps:[[new Qt,DD],ii]};function nL(t,...e){return ze("angularfire",Vi.full,"auth"),lr([$Y,HY,{provide:DD,useFactory:UY(t),multi:!0,deps:[Le,ft,ji,Ss,[new Qt,No],...e]}])}var rL=at(TD,!0);var Ui=at(vD,!0);var iL=at(mD,!0,2);var sL=at(ID,!0,2);var l_=at(bD,!0,2);var oL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},aL={};var Ms,CD;(function(){var t;function e(I,_){function E(){}E.prototype=_.prototype,I.D=_.prototype,I.prototype=new E,I.prototype.constructor=I,I.C=function(w,T,D){for(var b=Array(arguments.length-2),He=2;He<arguments.length;He++)b[He-2]=arguments[He];return _.prototype[T].apply(w,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,_,E){E||(E=0);var w=Array(16);if(typeof _=="string")for(var T=0;16>T;++T)w[T]=_.charCodeAt(E++)|_.charCodeAt(E++)<<8|_.charCodeAt(E++)<<16|_.charCodeAt(E++)<<24;else for(T=0;16>T;++T)w[T]=_[E++]|_[E++]<<8|_[E++]<<16|_[E++]<<24;_=I.g[0],E=I.g[1],T=I.g[2];var D=I.g[3],b=_+(D^E&(T^D))+w[0]+3614090360&4294967295;_=E+(b<<7&4294967295|b>>>25),b=D+(T^_&(E^T))+w[1]+3905402710&4294967295,D=_+(b<<12&4294967295|b>>>20),b=T+(E^D&(_^E))+w[2]+606105819&4294967295,T=D+(b<<17&4294967295|b>>>15),b=E+(_^T&(D^_))+w[3]+3250441966&4294967295,E=T+(b<<22&4294967295|b>>>10),b=_+(D^E&(T^D))+w[4]+4118548399&4294967295,_=E+(b<<7&4294967295|b>>>25),b=D+(T^_&(E^T))+w[5]+1200080426&4294967295,D=_+(b<<12&4294967295|b>>>20),b=T+(E^D&(_^E))+w[6]+2821735955&4294967295,T=D+(b<<17&4294967295|b>>>15),b=E+(_^T&(D^_))+w[7]+4249261313&4294967295,E=T+(b<<22&4294967295|b>>>10),b=_+(D^E&(T^D))+w[8]+1770035416&4294967295,_=E+(b<<7&4294967295|b>>>25),b=D+(T^_&(E^T))+w[9]+2336552879&4294967295,D=_+(b<<12&4294967295|b>>>20),b=T+(E^D&(_^E))+w[10]+4294925233&4294967295,T=D+(b<<17&4294967295|b>>>15),b=E+(_^T&(D^_))+w[11]+2304563134&4294967295,E=T+(b<<22&4294967295|b>>>10),b=_+(D^E&(T^D))+w[12]+1804603682&4294967295,_=E+(b<<7&4294967295|b>>>25),b=D+(T^_&(E^T))+w[13]+4254626195&4294967295,D=_+(b<<12&4294967295|b>>>20),b=T+(E^D&(_^E))+w[14]+2792965006&4294967295,T=D+(b<<17&4294967295|b>>>15),b=E+(_^T&(D^_))+w[15]+1236535329&4294967295,E=T+(b<<22&4294967295|b>>>10),b=_+(T^D&(E^T))+w[1]+4129170786&4294967295,_=E+(b<<5&4294967295|b>>>27),b=D+(E^T&(_^E))+w[6]+3225465664&4294967295,D=_+(b<<9&4294967295|b>>>23),b=T+(_^E&(D^_))+w[11]+643717713&4294967295,T=D+(b<<14&4294967295|b>>>18),b=E+(D^_&(T^D))+w[0]+3921069994&4294967295,E=T+(b<<20&4294967295|b>>>12),b=_+(T^D&(E^T))+w[5]+3593408605&4294967295,_=E+(b<<5&4294967295|b>>>27),b=D+(E^T&(_^E))+w[10]+38016083&4294967295,D=_+(b<<9&4294967295|b>>>23),b=T+(_^E&(D^_))+w[15]+3634488961&4294967295,T=D+(b<<14&4294967295|b>>>18),b=E+(D^_&(T^D))+w[4]+3889429448&4294967295,E=T+(b<<20&4294967295|b>>>12),b=_+(T^D&(E^T))+w[9]+568446438&4294967295,_=E+(b<<5&4294967295|b>>>27),b=D+(E^T&(_^E))+w[14]+3275163606&4294967295,D=_+(b<<9&4294967295|b>>>23),b=T+(_^E&(D^_))+w[3]+4107603335&4294967295,T=D+(b<<14&4294967295|b>>>18),b=E+(D^_&(T^D))+w[8]+1163531501&4294967295,E=T+(b<<20&4294967295|b>>>12),b=_+(T^D&(E^T))+w[13]+2850285829&4294967295,_=E+(b<<5&4294967295|b>>>27),b=D+(E^T&(_^E))+w[2]+4243563512&4294967295,D=_+(b<<9&4294967295|b>>>23),b=T+(_^E&(D^_))+w[7]+1735328473&4294967295,T=D+(b<<14&4294967295|b>>>18),b=E+(D^_&(T^D))+w[12]+2368359562&4294967295,E=T+(b<<20&4294967295|b>>>12),b=_+(E^T^D)+w[5]+4294588738&4294967295,_=E+(b<<4&4294967295|b>>>28),b=D+(_^E^T)+w[8]+2272392833&4294967295,D=_+(b<<11&4294967295|b>>>21),b=T+(D^_^E)+w[11]+1839030562&4294967295,T=D+(b<<16&4294967295|b>>>16),b=E+(T^D^_)+w[14]+4259657740&4294967295,E=T+(b<<23&4294967295|b>>>9),b=_+(E^T^D)+w[1]+2763975236&4294967295,_=E+(b<<4&4294967295|b>>>28),b=D+(_^E^T)+w[4]+1272893353&4294967295,D=_+(b<<11&4294967295|b>>>21),b=T+(D^_^E)+w[7]+4139469664&4294967295,T=D+(b<<16&4294967295|b>>>16),b=E+(T^D^_)+w[10]+3200236656&4294967295,E=T+(b<<23&4294967295|b>>>9),b=_+(E^T^D)+w[13]+681279174&4294967295,_=E+(b<<4&4294967295|b>>>28),b=D+(_^E^T)+w[0]+3936430074&4294967295,D=_+(b<<11&4294967295|b>>>21),b=T+(D^_^E)+w[3]+3572445317&4294967295,T=D+(b<<16&4294967295|b>>>16),b=E+(T^D^_)+w[6]+76029189&4294967295,E=T+(b<<23&4294967295|b>>>9),b=_+(E^T^D)+w[9]+3654602809&4294967295,_=E+(b<<4&4294967295|b>>>28),b=D+(_^E^T)+w[12]+3873151461&4294967295,D=_+(b<<11&4294967295|b>>>21),b=T+(D^_^E)+w[15]+530742520&4294967295,T=D+(b<<16&4294967295|b>>>16),b=E+(T^D^_)+w[2]+3299628645&4294967295,E=T+(b<<23&4294967295|b>>>9),b=_+(T^(E|~D))+w[0]+4096336452&4294967295,_=E+(b<<6&4294967295|b>>>26),b=D+(E^(_|~T))+w[7]+1126891415&4294967295,D=_+(b<<10&4294967295|b>>>22),b=T+(_^(D|~E))+w[14]+2878612391&4294967295,T=D+(b<<15&4294967295|b>>>17),b=E+(D^(T|~_))+w[5]+4237533241&4294967295,E=T+(b<<21&4294967295|b>>>11),b=_+(T^(E|~D))+w[12]+1700485571&4294967295,_=E+(b<<6&4294967295|b>>>26),b=D+(E^(_|~T))+w[3]+2399980690&4294967295,D=_+(b<<10&4294967295|b>>>22),b=T+(_^(D|~E))+w[10]+4293915773&4294967295,T=D+(b<<15&4294967295|b>>>17),b=E+(D^(T|~_))+w[1]+2240044497&4294967295,E=T+(b<<21&4294967295|b>>>11),b=_+(T^(E|~D))+w[8]+1873313359&4294967295,_=E+(b<<6&4294967295|b>>>26),b=D+(E^(_|~T))+w[15]+4264355552&4294967295,D=_+(b<<10&4294967295|b>>>22),b=T+(_^(D|~E))+w[6]+2734768916&4294967295,T=D+(b<<15&4294967295|b>>>17),b=E+(D^(T|~_))+w[13]+1309151649&4294967295,E=T+(b<<21&4294967295|b>>>11),b=_+(T^(E|~D))+w[4]+4149444226&4294967295,_=E+(b<<6&4294967295|b>>>26),b=D+(E^(_|~T))+w[11]+3174756917&4294967295,D=_+(b<<10&4294967295|b>>>22),b=T+(_^(D|~E))+w[2]+718787259&4294967295,T=D+(b<<15&4294967295|b>>>17),b=E+(D^(T|~_))+w[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(T+(b<<21&4294967295|b>>>11))&4294967295,I.g[2]=I.g[2]+T&4294967295,I.g[3]=I.g[3]+D&4294967295}r.prototype.u=function(I,_){_===void 0&&(_=I.length);for(var E=_-this.blockSize,w=this.B,T=this.h,D=0;D<_;){if(T==0)for(;D<=E;)i(this,I,D),D+=this.blockSize;if(typeof I=="string"){for(;D<_;)if(w[T++]=I.charCodeAt(D++),T==this.blockSize){i(this,w),T=0;break}}else for(;D<_;)if(w[T++]=I[D++],T==this.blockSize){i(this,w),T=0;break}}this.h=T,this.o+=_},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;var E=8*this.o;for(_=I.length-8;_<I.length;++_)I[_]=E&255,E/=256;for(this.u(I),I=Array(16),_=E=0;4>_;++_)for(var w=0;32>w;w+=8)I[E++]=this.g[_]>>>w&255;return I};function s(I,_){var E=a;return Object.prototype.hasOwnProperty.call(E,I)?E[I]:E[I]=_(I)}function o(I,_){this.h=_;for(var E=[],w=!0,T=I.length-1;0<=T;T--){var D=I[T]|0;w&&D==_||(E[T]=D,w=!1)}this.g=E}var a={};function c(I){return-128<=I&&128>I?s(I,function(_){return new o([_|0],0>_?-1:0)}):new o([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return h;if(0>I)return C(l(-I));for(var _=[],E=1,w=0;I>=E;w++)_[w]=I/E|0,E*=4294967296;return new o(_,0)}function d(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return C(d(I.substring(1),_));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(_,8)),w=h,T=0;T<I.length;T+=8){var D=Math.min(8,I.length-T),b=parseInt(I.substring(T,T+D),_);8>D?(D=l(Math.pow(_,D)),w=w.j(D).add(l(b))):(w=w.j(E),w=w.add(l(b)))}return w}var h=c(0),p=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(S(this))return-C(this).m();for(var I=0,_=1,E=0;E<this.g.length;E++){var w=this.i(E);I+=(0<=w?w:4294967296+w)*_,_*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(v(this))return"0";if(S(this))return"-"+C(this).toString(I);for(var _=l(Math.pow(I,6)),E=this,w="";;){var T=z(E,_).g;E=k(E,T.j(_));var D=((0<E.g.length?E.g[0]:E.h)>>>0).toString(I);if(E=T,v(E))return D+w;for(;6>D.length;)D="0"+D;w=D+w}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function v(I){if(I.h!=0)return!1;for(var _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function S(I){return I.h==-1}t.l=function(I){return I=k(this,I),S(I)?-1:v(I)?0:1};function C(I){for(var _=I.g.length,E=[],w=0;w<_;w++)E[w]=~I.g[w];return new o(E,~I.h).add(p)}t.abs=function(){return S(this)?C(this):this},t.add=function(I){for(var _=Math.max(this.g.length,I.g.length),E=[],w=0,T=0;T<=_;T++){var D=w+(this.i(T)&65535)+(I.i(T)&65535),b=(D>>>16)+(this.i(T)>>>16)+(I.i(T)>>>16);w=b>>>16,D&=65535,b&=65535,E[T]=b<<16|D}return new o(E,E[E.length-1]&-2147483648?-1:0)};function k(I,_){return I.add(C(_))}t.j=function(I){if(v(this)||v(I))return h;if(S(this))return S(I)?C(this).j(C(I)):C(C(this).j(I));if(S(I))return C(this.j(C(I)));if(0>this.l(g)&&0>I.l(g))return l(this.m()*I.m());for(var _=this.g.length+I.g.length,E=[],w=0;w<2*_;w++)E[w]=0;for(w=0;w<this.g.length;w++)for(var T=0;T<I.g.length;T++){var D=this.i(w)>>>16,b=this.i(w)&65535,He=I.i(T)>>>16,ge=I.i(T)&65535;E[2*w+2*T]+=b*ge,O(E,2*w+2*T),E[2*w+2*T+1]+=D*ge,O(E,2*w+2*T+1),E[2*w+2*T+1]+=b*He,O(E,2*w+2*T+1),E[2*w+2*T+2]+=D*He,O(E,2*w+2*T+2)}for(w=0;w<_;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=_;w<2*_;w++)E[w]=0;return new o(E,0)};function O(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function F(I,_){this.g=I,this.h=_}function z(I,_){if(v(_))throw Error("division by zero");if(v(I))return new F(h,h);if(S(I))return _=z(C(I),_),new F(C(_.g),C(_.h));if(S(_))return _=z(I,C(_)),new F(C(_.g),_.h);if(30<I.g.length){if(S(I)||S(_))throw Error("slowDivide_ only works with positive integers.");for(var E=p,w=_;0>=w.l(I);)E=W(E),w=W(w);var T=K(E,1),D=K(w,1);for(w=K(w,2),E=K(E,2);!v(w);){var b=D.add(w);0>=b.l(I)&&(T=T.add(E),D=b),w=K(w,1),E=K(E,1)}return _=k(I,T.j(_)),new F(T,_)}for(T=h;0<=I.l(_);){for(E=Math.max(1,Math.floor(I.m()/_.m())),w=Math.ceil(Math.log(E)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),D=l(E),b=D.j(_);S(b)||0<b.l(I);)E-=w,D=l(E),b=D.j(_);v(D)&&(D=p),T=T.add(D),I=k(I,b)}return new F(T,I)}t.A=function(I){return z(this,I).h},t.and=function(I){for(var _=Math.max(this.g.length,I.g.length),E=[],w=0;w<_;w++)E[w]=this.i(w)&I.i(w);return new o(E,this.h&I.h)},t.or=function(I){for(var _=Math.max(this.g.length,I.g.length),E=[],w=0;w<_;w++)E[w]=this.i(w)|I.i(w);return new o(E,this.h|I.h)},t.xor=function(I){for(var _=Math.max(this.g.length,I.g.length),E=[],w=0;w<_;w++)E[w]=this.i(w)^I.i(w);return new o(E,this.h^I.h)};function W(I){for(var _=I.g.length+1,E=[],w=0;w<_;w++)E[w]=I.i(w)<<1|I.i(w-1)>>>31;return new o(E,I.h)}function K(I,_){var E=_>>5;_%=32;for(var w=I.g.length-E,T=[],D=0;D<w;D++)T[D]=0<_?I.i(D+E)>>>_|I.i(D+E+1)<<32-_:I.i(D+E);return new o(T,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,CD=aL.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,Ms=aL.Integer=o}).apply(typeof oL<"u"?oL:typeof self<"u"?self:typeof window<"u"?window:{});var u_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ns={};var SD,zY,ru,AD,yf,d_,xD,RD,MD;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof u_=="object"&&u_];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var y=0;y<u.length-1;y++){var M=u[y];if(!(M in m))break e;m=m[M]}u=u[u.length-1],y=m[u],f=f(y),f!=y&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var m=0,y=!1,M={next:function(){if(!y&&m<u.length){var V=m++;return{value:f(V,u[V]),done:!1}}return y=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,m){return m})}});var o=o||{},a=this||self;function c(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function l(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function d(u,f,m){return u.call.apply(u.bind,arguments)}function h(u,f,m){if(!u)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,y),u.apply(f,M)}}return function(){return u.apply(f,arguments)}}function p(u,f,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function g(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var y=m.slice();return y.push.apply(y,arguments),u.apply(this,y)}}function v(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(y,M,V){for(var Q=Array(arguments.length-2),it=2;it<arguments.length;it++)Q[it-2]=arguments[it];return f.prototype[M].apply(y,Q)}}function S(u){let f=u.length;if(0<f){let m=Array(f);for(let y=0;y<f;y++)m[y]=u[y];return m}return[]}function C(u,f){for(let m=1;m<arguments.length;m++){let y=arguments[m];if(c(y)){let M=u.length||0,V=y.length||0;u.length=M+V;for(let Q=0;Q<V;Q++)u[M+Q]=y[Q]}else u.push(y)}}class k{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function O(u){return/^[\s\xa0]*$/.test(u)}function F(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function z(u){return z[" "](u),u}z[" "]=function(){};var W=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function K(u,f,m){for(let y in u)f.call(m,u[y],y,u)}function I(u,f){for(let m in u)f.call(void 0,u[m],m,u)}function _(u){let f={};for(let m in u)f[m]=u[m];return f}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(u,f){let m,y;for(let M=1;M<arguments.length;M++){y=arguments[M];for(m in y)u[m]=y[m];for(let V=0;V<E.length;V++)m=E[V],Object.prototype.hasOwnProperty.call(y,m)&&(u[m]=y[m])}}function T(u){var f=1;u=u.split(":");let m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function D(u){a.setTimeout(()=>{throw u},0)}function b(){var u=N;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class He{constructor(){this.h=this.g=null}add(f,m){let y=ge.get();y.set(f,m),this.h?this.h.next=y:this.g=y,this.h=y}}var ge=new k(()=>new oe,u=>u.reset());class oe{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let J,R=!1,N=new He,se=()=>{let u=a.Promise.resolve(void 0);J=()=>{u.then(he)}};var he=()=>{for(var u;u=b();){try{u.h.call(u.g)}catch(m){D(m)}var f=ge;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}R=!1};function ke(){this.s=this.s,this.C=this.C}ke.prototype.s=!1,ke.prototype.ma=function(){this.s||(this.s=!0,this.N())},ke.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var rn=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u})();function Rt(u,f){if(ue.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,y=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(W){e:{try{z(f.nodeName);var M=!0;break e}catch{}M=!1}M||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Gt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Rt.aa.h.call(this)}}v(Rt,ue);var Gt={2:"touch",3:"pen",4:"mouse"};Rt.prototype.h=function(){Rt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var gn="closure_listenable_"+(1e6*Math.random()|0),Y=0;function G(u,f,m,y,M){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!y,this.ha=M,this.key=++Y,this.da=this.fa=!1}function L(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function q(u){this.src=u,this.g={},this.h=0}q.prototype.add=function(u,f,m,y,M){var V=u.toString();u=this.g[V],u||(u=this.g[V]=[],this.h++);var Q=ye(u,f,y,M);return-1<Q?(f=u[Q],m||(f.fa=!1)):(f=new G(f,this.src,V,!!y,M),f.fa=m,u.push(f)),f};function de(u,f){var m=f.type;if(m in u.g){var y=u.g[m],M=Array.prototype.indexOf.call(y,f,void 0),V;(V=0<=M)&&Array.prototype.splice.call(y,M,1),V&&(L(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function ye(u,f,m,y){for(var M=0;M<u.length;++M){var V=u[M];if(!V.da&&V.listener==f&&V.capture==!!m&&V.ha==y)return M}return-1}var ce="closure_lm_"+(1e6*Math.random()|0),we={};function Ce(u,f,m,y,M){if(y&&y.once)return Je(u,f,m,y,M);if(Array.isArray(f)){for(var V=0;V<f.length;V++)Ce(u,f[V],m,y,M);return null}return m=oa(m),u&&u[gn]?u.K(f,m,l(y)?!!y.capture:!!y,M):Se(u,f,m,!1,y,M)}function Se(u,f,m,y,M,V){if(!f)throw Error("Invalid event type");var Q=l(M)?!!M.capture:!!M,it=Rc(u);if(it||(u[ce]=it=new q(u)),m=it.add(f,m,y,Q,V),m.proxy)return m;if(y=nt(),m.proxy=y,y.src=u,y.listener=m,u.addEventListener)rn||(M=Q),M===void 0&&(M=!1),u.addEventListener(f.toString(),y,M);else if(u.attachEvent)u.attachEvent(es(f.toString()),y);else if(u.addListener&&u.removeListener)u.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return m}function nt(){function u(m){return f.call(u.src,u.listener,m)}let f=Zu;return u}function Je(u,f,m,y,M){if(Array.isArray(f)){for(var V=0;V<f.length;V++)Je(u,f[V],m,y,M);return null}return m=oa(m),u&&u[gn]?u.L(f,m,l(y)?!!y.capture:!!y,M):Se(u,f,m,!0,y,M)}function jr(u,f,m,y,M){if(Array.isArray(f))for(var V=0;V<f.length;V++)jr(u,f[V],m,y,M);else y=l(y)?!!y.capture:!!y,m=oa(m),u&&u[gn]?(u=u.i,f=String(f).toString(),f in u.g&&(V=u.g[f],m=ye(V,m,y,M),-1<m&&(L(V[m]),Array.prototype.splice.call(V,m,1),V.length==0&&(delete u.g[f],u.h--)))):u&&(u=Rc(u))&&(f=u.g[f.toString()],u=-1,f&&(u=ye(f,m,y,M)),(m=-1<u?f[u]:null)&&zn(m))}function zn(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[gn])de(f.i,u);else{var m=u.type,y=u.proxy;f.removeEventListener?f.removeEventListener(m,y,u.capture):f.detachEvent?f.detachEvent(es(m),y):f.addListener&&f.removeListener&&f.removeListener(y),(m=Rc(f))?(de(m,u),m.h==0&&(m.src=null,f[ce]=null)):L(u)}}}function es(u){return u in we?we[u]:we[u]="on"+u}function Zu(u,f){if(u.da)u=!0;else{f=new Rt(f,this);var m=u.listener,y=u.ha||u.src;u.fa&&zn(u),u=m.call(y,f)}return u}function Rc(u){return u=u[ce],u instanceof q?u:null}var Xu="__closure_events_fn_"+(1e9*Math.random()>>>0);function oa(u){return typeof u=="function"?u:(u[Xu]||(u[Xu]=function(f){return u.handleEvent(f)}),u[Xu])}function Kt(){ke.call(this),this.i=new q(this),this.M=this,this.F=null}v(Kt,ke),Kt.prototype[gn]=!0,Kt.prototype.removeEventListener=function(u,f,m,y){jr(this,u,f,m,y)};function bt(u,f){var m,y=u.F;if(y)for(m=[];y;y=y.F)m.push(y);if(u=u.M,y=f.type||f,typeof f=="string")f=new ue(f,u);else if(f instanceof ue)f.target=f.target||u;else{var M=f;f=new ue(y,u),w(f,M)}if(M=!0,m)for(var V=m.length-1;0<=V;V--){var Q=f.g=m[V];M=aa(Q,y,!0,f)&&M}if(Q=f.g=u,M=aa(Q,y,!0,f)&&M,M=aa(Q,y,!1,f)&&M,m)for(V=0;V<m.length;V++)Q=f.g=m[V],M=aa(Q,y,!1,f)&&M}Kt.prototype.N=function(){if(Kt.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],y=0;y<m.length;y++)L(m[y]);delete u.g[f],u.h--}}this.F=null},Kt.prototype.K=function(u,f,m,y){return this.i.add(String(u),f,!1,m,y)},Kt.prototype.L=function(u,f,m,y){return this.i.add(String(u),f,!0,m,y)};function aa(u,f,m,y){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var M=!0,V=0;V<f.length;++V){var Q=f[V];if(Q&&!Q.da&&Q.capture==m){var it=Q.listener,mn=Q.ha||Q.src;Q.fa&&de(u.i,Q),M=it.call(mn,y)!==!1&&M}}return M&&!y.defaultPrevented}function ca(u,f,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function Ju(u){u.g=ca(()=>{u.g=null,u.i&&(u.i=!1,Ju(u))},u.l);let f=u.h;u.h=null,u.m.apply(null,f)}class mp extends ke{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Ju(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Br(u){ke.call(this),this.h=u,this.g={}}v(Br,ke);var Wn=[];function sr(u){K(u.g,function(f,m){this.g.hasOwnProperty(m)&&zn(f)},u),u.g={}}Br.prototype.N=function(){Br.aa.N.call(this),sr(this)},Br.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fb=a.JSON.stringify,kH=a.JSON.parse,PH=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function pb(){}pb.prototype.h=null;function lx(u){return u.h||(u.h=u.i())}function ux(){}var ed={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gb(){ue.call(this,"d")}v(gb,ue);function mb(){ue.call(this,"c")}v(mb,ue);var la={},dx=null;function yp(){return dx=dx||new Kt}la.La="serverreachability";function hx(u){ue.call(this,la.La,u)}v(hx,ue);function td(u){let f=yp();bt(f,new hx(f))}la.STAT_EVENT="statevent";function fx(u,f){ue.call(this,la.STAT_EVENT,u),this.stat=f}v(fx,ue);function On(u){let f=yp();bt(f,new fx(f,u))}la.Ma="timingevent";function px(u,f){ue.call(this,la.Ma,u),this.size=f}v(px,ue);function nd(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function rd(){this.g=!0}rd.prototype.xa=function(){this.g=!1};function OH(u,f,m,y,M,V){u.info(function(){if(u.g)if(V)for(var Q="",it=V.split("&"),mn=0;mn<it.length;mn++){var We=it[mn].split("=");if(1<We.length){var In=We[0];We=We[1];var Tn=In.split("_");Q=2<=Tn.length&&Tn[1]=="type"?Q+(In+"="+We+"&"):Q+(In+"=redacted&")}}else Q=null;else Q=V;return"XMLHTTP REQ ("+y+") [attempt "+M+"]: "+f+`
`+m+`
`+Q})}function FH(u,f,m,y,M,V,Q){u.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+M+"]: "+f+`
`+m+`
`+V+" "+Q})}function Mc(u,f,m,y){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+VH(u,m)+(y?" "+y:"")})}function LH(u,f){u.info(function(){return"TIMEOUT: "+f})}rd.prototype.info=function(){};function VH(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var y=m[u];if(!(2>y.length)){var M=y[1];if(Array.isArray(M)&&!(1>M.length)){var V=M[0];if(V!="noop"&&V!="stop"&&V!="close")for(var Q=1;Q<M.length;Q++)M[Q]=""}}}}return fb(m)}catch{return f}}var _p={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gx={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},yb;function vp(){}v(vp,pb),vp.prototype.g=function(){return new XMLHttpRequest},vp.prototype.i=function(){return{}},yb=new vp;function Qs(u,f,m,y){this.j=u,this.i=f,this.l=m,this.R=y||1,this.U=new Br(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mx}function mx(){this.i=null,this.g="",this.h=!1}var yx={},_b={};function vb(u,f,m){u.L=1,u.v=Ip(ts(f)),u.m=m,u.P=!0,_x(u,null)}function _x(u,f){u.F=Date.now(),bp(u),u.A=ts(u.v);var m=u.A,y=u.R;Array.isArray(y)||(y=[String(y)]),Nx(m.i,"t",y),u.C=0,m=u.j.J,u.h=new mx,u.g=Qx(u.j,m?f:null,!u.m),0<u.O&&(u.M=new mp(p(u.Y,u,u.g),u.O)),f=u.U,m=u.g,y=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(Wn[0]=M.toString()),M=Wn);for(var V=0;V<M.length;V++){var Q=Ce(m,M[V],y||f.handleEvent,!1,f.h||f);if(!Q)break;f.g[Q.key]=Q}f=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),td(),OH(u.i,u.u,u.A,u.l,u.R,u.m)}Qs.prototype.ca=function(u){u=u.target;let f=this.M;f&&ns(u)==3?f.j():this.Y(u)},Qs.prototype.Y=function(u){try{if(u==this.g)e:{let Tn=ns(this.g);var f=this.g.Ba();let Pc=this.g.Z();if(!(3>Tn)&&(Tn!=3||this.g&&(this.h.h||this.g.oa()||jx(this.g)))){this.J||Tn!=4||f==7||(f==8||0>=Pc?td(3):td(2)),bb(this);var m=this.g.Z();this.X=m;t:if(vx(this)){var y=jx(this.g);u="";var M=y.length,V=ns(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ua(this),id(this);var Q="";break t}this.h.i=new a.TextDecoder}for(f=0;f<M;f++)this.h.h=!0,u+=this.h.i.decode(y[f],{stream:!(V&&f==M-1)});y.length=0,this.h.g+=u,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=m==200,FH(this.i,this.u,this.A,this.l,this.R,Tn,m),this.o){if(this.T&&!this.K){t:{if(this.g){var it,mn=this.g;if((it=mn.g?mn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(it)){var We=it;break t}}We=null}if(m=We)Mc(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Eb(this,m);else{this.o=!1,this.s=3,On(12),ua(this),id(this);break e}}if(this.P){m=!0;let Ur;for(;!this.J&&this.C<Q.length;)if(Ur=jH(this,Q),Ur==_b){Tn==4&&(this.s=4,On(14),m=!1),Mc(this.i,this.l,null,"[Incomplete Response]");break}else if(Ur==yx){this.s=4,On(15),Mc(this.i,this.l,Q,"[Invalid Chunk]"),m=!1;break}else Mc(this.i,this.l,Ur,null),Eb(this,Ur);if(vx(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tn!=4||Q.length!=0||this.h.h||(this.s=1,On(16),m=!1),this.o=this.o&&m,!m)Mc(this.i,this.l,Q,"[Invalid Chunked Response]"),ua(this),id(this);else if(0<Q.length&&!this.W){this.W=!0;var In=this.j;In.g==this&&In.ba&&!In.M&&(In.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),Sb(In),In.M=!0,On(11))}}else Mc(this.i,this.l,Q,null),Eb(this,Q);Tn==4&&ua(this),this.o&&!this.J&&(Tn==4?qx(this.j,this):(this.o=!1,bp(this)))}else n$(this.g),m==400&&0<Q.indexOf("Unknown SID")?(this.s=3,On(12)):(this.s=0,On(13)),ua(this),id(this)}}}catch{}finally{}};function vx(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function jH(u,f){var m=u.C,y=f.indexOf(`
`,m);return y==-1?_b:(m=Number(f.substring(m,y)),isNaN(m)?yx:(y+=1,y+m>f.length?_b:(f=f.slice(y,y+m),u.C=y+m,f)))}Qs.prototype.cancel=function(){this.J=!0,ua(this)};function bp(u){u.S=Date.now()+u.I,bx(u,u.I)}function bx(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=nd(p(u.ba,u),f)}function bb(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Qs.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(LH(this.i,this.A),this.L!=2&&(td(),On(17)),ua(this),this.s=2,id(this)):bx(this,this.S-u)};function id(u){u.j.G==0||u.J||qx(u.j,u)}function ua(u){bb(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,sr(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Eb(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||wb(m.h,u))){if(!u.K&&wb(m.h,u)&&m.G==3){try{var y=m.Da.g.parse(f)}catch{y=null}if(Array.isArray(y)&&y.length==3){var M=y;if(M[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Ap(m),Cp(m);else break e;Cb(m),On(18)}}else m.za=M[1],0<m.za-m.T&&37500>M[2]&&m.F&&m.v==0&&!m.C&&(m.C=nd(p(m.Za,m),6e3));if(1>=Ix(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else ha(m,11)}else if((u.K||m.g==u)&&Ap(m),!O(f))for(M=m.Da.g.parse(f),f=0;f<M.length;f++){let We=M[f];if(m.T=We[0],We=We[1],m.G==2)if(We[0]=="c"){m.K=We[1],m.ia=We[2];let In=We[3];In!=null&&(m.la=In,m.j.info("VER="+m.la));let Tn=We[4];Tn!=null&&(m.Aa=Tn,m.j.info("SVER="+m.Aa));let Pc=We[5];Pc!=null&&typeof Pc=="number"&&0<Pc&&(y=1.5*Pc,m.L=y,m.j.info("backChannelRequestTimeoutMs_="+y)),y=m;let Ur=u.g;if(Ur){let Rp=Ur.g?Ur.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rp){var V=y.h;V.g||Rp.indexOf("spdy")==-1&&Rp.indexOf("quic")==-1&&Rp.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Ib(V,V.h),V.h=null))}if(y.D){let Ab=Ur.g?Ur.g.getResponseHeader("X-HTTP-Session-Id"):null;Ab&&(y.ya=Ab,ct(y.I,y.D,Ab))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),y=m;var Q=u;if(y.qa=Yx(y,y.J?y.ia:null,y.W),Q.K){Tx(y.h,Q);var it=Q,mn=y.L;mn&&(it.I=mn),it.B&&(bb(it),bp(it)),y.g=Q}else zx(y);0<m.i.length&&Sp(m)}else We[0]!="stop"&&We[0]!="close"||ha(m,7);else m.G==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?ha(m,7):Db(m):We[0]!="noop"&&m.l&&m.l.ta(We),m.v=0)}}td(4)}catch{}}var BH=class{constructor(u,f){this.g=u,this.map=f}};function Ex(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wx(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ix(u){return u.h?1:u.g?u.g.size:0}function wb(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Ib(u,f){u.g?u.g.add(f):u.h=f}function Tx(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}Ex.prototype.cancel=function(){if(this.i=Dx(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Dx(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(let m of u.g.values())f=f.concat(m.D);return f}return S(u.i)}function UH(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var f=[],m=u.length,y=0;y<m;y++)f.push(u[y]);return f}f=[],m=0;for(y in u)f[m++]=u[y];return f}function HH(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(let y in u)f[m++]=y;return f}}}function Cx(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=HH(u),y=UH(u),M=y.length,V=0;V<M;V++)f.call(void 0,y[V],m&&m[V],u)}var Sx=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $H(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var y=u[m].indexOf("="),M=null;if(0<=y){var V=u[m].substring(0,y);M=u[m].substring(y+1)}else V=u[m];f(V,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function da(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof da){this.h=u.h,Ep(this,u.j),this.o=u.o,this.g=u.g,wp(this,u.s),this.l=u.l;var f=u.i,m=new ad;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),Ax(this,m),this.m=u.m}else u&&(f=String(u).match(Sx))?(this.h=!1,Ep(this,f[1]||"",!0),this.o=sd(f[2]||""),this.g=sd(f[3]||"",!0),wp(this,f[4]),this.l=sd(f[5]||"",!0),Ax(this,f[6]||"",!0),this.m=sd(f[7]||"")):(this.h=!1,this.i=new ad(null,this.h))}da.prototype.toString=function(){var u=[],f=this.j;f&&u.push(od(f,xx,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(od(f,xx,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(od(m,m.charAt(0)=="/"?qH:WH,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",od(m,KH)),u.join("")};function ts(u){return new da(u)}function Ep(u,f,m){u.j=m?sd(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function wp(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Ax(u,f,m){f instanceof ad?(u.i=f,YH(u.i,u.h)):(m||(f=od(f,GH)),u.i=new ad(f,u.h))}function ct(u,f,m){u.i.set(f,m)}function Ip(u){return ct(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function sd(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function od(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,zH),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function zH(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var xx=/[#\/\?@]/g,WH=/[#\?:]/g,qH=/[#\?]/g,GH=/[#\?@]/g,KH=/#/g;function ad(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Zs(u){u.g||(u.g=new Map,u.h=0,u.i&&$H(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=ad.prototype,t.add=function(u,f){Zs(this),this.i=null,u=Nc(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function Rx(u,f){Zs(u),f=Nc(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Mx(u,f){return Zs(u),f=Nc(u,f),u.g.has(f)}t.forEach=function(u,f){Zs(this),this.g.forEach(function(m,y){m.forEach(function(M){u.call(f,M,y,this)},this)},this)},t.na=function(){Zs(this);let u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let y=0;y<f.length;y++){let M=u[y];for(let V=0;V<M.length;V++)m.push(f[y])}return m},t.V=function(u){Zs(this);let f=[];if(typeof u=="string")Mx(this,u)&&(f=f.concat(this.g.get(Nc(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},t.set=function(u,f){return Zs(this),this.i=null,u=Nc(this,u),Mx(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function Nx(u,f,m){Rx(u,f),0<m.length&&(u.i=null,u.g.set(Nc(u,f),S(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var y=f[m];let V=encodeURIComponent(String(y)),Q=this.V(y);for(y=0;y<Q.length;y++){var M=V;Q[y]!==""&&(M+="="+encodeURIComponent(String(Q[y]))),u.push(M)}}return this.i=u.join("&")};function Nc(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function YH(u,f){f&&!u.j&&(Zs(u),u.i=null,u.g.forEach(function(m,y){var M=y.toLowerCase();y!=M&&(Rx(this,y),Nx(this,M,m))},u)),u.j=f}function QH(u,f){let m=new rd;if(a.Image){let y=new Image;y.onload=g(Xs,m,"TestLoadImage: loaded",!0,f,y),y.onerror=g(Xs,m,"TestLoadImage: error",!1,f,y),y.onabort=g(Xs,m,"TestLoadImage: abort",!1,f,y),y.ontimeout=g(Xs,m,"TestLoadImage: timeout",!1,f,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=u}else f(!1)}function ZH(u,f){let m=new rd,y=new AbortController,M=setTimeout(()=>{y.abort(),Xs(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:y.signal}).then(V=>{clearTimeout(M),V.ok?Xs(m,"TestPingServer: ok",!0,f):Xs(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),Xs(m,"TestPingServer: error",!1,f)})}function Xs(u,f,m,y,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),y(m)}catch{}}function XH(){this.g=new PH}function JH(u,f,m){let y=m||"";try{Cx(u,function(M,V){let Q=M;l(M)&&(Q=fb(M)),f.push(y+V+"="+encodeURIComponent(Q))})}catch(M){throw f.push(y+"type="+encodeURIComponent("_badmap")),M}}function cd(u){this.l=u.Ub||null,this.j=u.eb||!1}v(cd,pb),cd.prototype.g=function(){return new Tp(this.l,this.j)},cd.prototype.i=(function(u){return function(){return u}})({});function Tp(u,f){Kt.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Tp,Kt),t=Tp.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,ud(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ld(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ud(this)),this.g&&(this.readyState=3,ud(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;kx(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function kx(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?ld(this):ud(this),this.readyState==3&&kx(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,ld(this))},t.Qa=function(u){this.g&&(this.response=u,ld(this))},t.ga=function(){this.g&&ld(this)};function ld(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ud(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function ud(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Tp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Px(u){let f="";return K(u,function(m,y){f+=y,f+=":",f+=m,f+=`\r
`}),f}function Tb(u,f,m){e:{for(y in m){var y=!1;break e}y=!0}y||(m=Px(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):ct(u,f,m))}function Et(u){Kt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Et,Kt);var e$=/^https?$/i,t$=["POST","PUT"];t=Et.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,m,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():yb.g(),this.v=this.o?lx(this.o):lx(yb),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(V){Ox(this,V);return}if(u=m||"",m=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var M in y)m.set(M,y[M]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(let V of y.keys())m.set(V,y.get(V));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(m.keys()).find(V=>V.toLowerCase()=="content-type"),M=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(t$,f,void 0))||y||M||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[V,Q]of m)this.g.setRequestHeader(V,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vx(this),this.u=!0,this.g.send(u),this.u=!1}catch(V){Ox(this,V)}};function Ox(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,Fx(u),Dp(u)}function Fx(u){u.A||(u.A=!0,bt(u,"complete"),bt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,bt(this,"complete"),bt(this,"abort"),Dp(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dp(this,!0)),Et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Lx(this):this.bb())},t.bb=function(){Lx(this)};function Lx(u){if(u.h&&typeof o<"u"&&(!u.v[1]||ns(u)!=4||u.Z()!=2)){if(u.u&&ns(u)==4)ca(u.Ea,0,u);else if(bt(u,"readystatechange"),ns(u)==4){u.h=!1;try{let Q=u.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var y;if(y=Q===0){var M=String(u.D).match(Sx)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),y=!e$.test(M?M.toLowerCase():"")}m=y}if(m)bt(u,"complete"),bt(u,"success");else{u.m=6;try{var V=2<ns(u)?u.g.statusText:""}catch{V=""}u.l=V+" ["+u.Z()+"]",Fx(u)}}finally{Dp(u)}}}}function Dp(u,f){if(u.g){Vx(u);let m=u.g,y=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||bt(u,"ready");try{m.onreadystatechange=y}catch{}}}function Vx(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function ns(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<ns(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),kH(f)}};function jx(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function n$(u){let f={};u=(u.g&&2<=ns(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<u.length;y++){if(O(u[y]))continue;var m=T(u[y]);let M=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let V=f[M]||[];f[M]=V,V.push(m)}I(f,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function dd(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function Bx(u){this.Aa=0,this.i=[],this.j=new rd,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=dd("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=dd("baseRetryDelayMs",5e3,u),this.cb=dd("retryDelaySeedMs",1e4,u),this.Wa=dd("forwardChannelMaxRetries",2,u),this.wa=dd("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ex(u&&u.concurrentRequestLimit),this.Da=new XH,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Bx.prototype,t.la=8,t.G=1,t.connect=function(u,f,m,y){On(0),this.W=u,this.H=f||{},m&&y!==void 0&&(this.H.OSID=m,this.H.OAID=y),this.F=this.X,this.I=Yx(this,null,this.W),Sp(this)};function Db(u){if(Ux(u),u.G==3){var f=u.U++,m=ts(u.I);if(ct(m,"SID",u.K),ct(m,"RID",f),ct(m,"TYPE","terminate"),hd(u,m),f=new Qs(u,u.j,f),f.L=2,f.v=Ip(ts(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=Qx(f.j,null),f.g.ea(f.v)),f.F=Date.now(),bp(f)}Kx(u)}function Cp(u){u.g&&(Sb(u),u.g.cancel(),u.g=null)}function Ux(u){Cp(u),u.u&&(a.clearTimeout(u.u),u.u=null),Ap(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Sp(u){if(!wx(u.h)&&!u.s){u.s=!0;var f=u.Ga;J||se(),R||(J(),R=!0),N.add(f,u),u.B=0}}function r$(u,f){return Ix(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=nd(p(u.Ga,u,f),Gx(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let M=new Qs(this,this.j,u),V=this.o;if(this.S&&(V?(V=_(V),w(V,this.S)):V=this.S),this.m!==null||this.O||(M.H=V,V=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var y=this.i[m];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(f+=y,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=$x(this,M,f),m=ts(this.I),ct(m,"RID",u),ct(m,"CVER",22),this.D&&ct(m,"X-HTTP-Session-Id",this.D),hd(this,m),V&&(this.O?f="headers="+encodeURIComponent(String(Px(V)))+"&"+f:this.m&&Tb(m,this.m,V)),Ib(this.h,M),this.Ua&&ct(m,"TYPE","init"),this.P?(ct(m,"$req",f),ct(m,"SID","null"),M.T=!0,vb(M,m,null)):vb(M,m,f),this.G=2}}else this.G==3&&(u?Hx(this,u):this.i.length==0||wx(this.h)||Hx(this))};function Hx(u,f){var m;f?m=f.l:m=u.U++;let y=ts(u.I);ct(y,"SID",u.K),ct(y,"RID",m),ct(y,"AID",u.T),hd(u,y),u.m&&u.o&&Tb(y,u.m,u.o),m=new Qs(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=$x(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ib(u.h,m),vb(m,y,f)}function hd(u,f){u.H&&K(u.H,function(m,y){ct(f,y,m)}),u.l&&Cx({},function(m,y){ct(f,y,m)})}function $x(u,f,m){m=Math.min(u.i.length,m);var y=u.l?p(u.l.Na,u.l,u):null;e:{var M=u.i;let V=-1;for(;;){let Q=["count="+m];V==-1?0<m?(V=M[0].g,Q.push("ofs="+V)):V=0:Q.push("ofs="+V);let it=!0;for(let mn=0;mn<m;mn++){let We=M[mn].g,In=M[mn].map;if(We-=V,0>We)V=Math.max(0,M[mn].g-100),it=!1;else try{JH(In,Q,"req"+We+"_")}catch{y&&y(In)}}if(it){y=Q.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,y}function zx(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;J||se(),R||(J(),R=!0),N.add(f,u),u.v=0}}function Cb(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=nd(p(u.Fa,u),Gx(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Wx(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=nd(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,On(10),Cp(this),Wx(this))};function Sb(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Wx(u){u.g=new Qs(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=ts(u.qa);ct(f,"RID","rpc"),ct(f,"SID",u.K),ct(f,"AID",u.T),ct(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&ct(f,"TO",u.ja),ct(f,"TYPE","xmlhttp"),hd(u,f),u.m&&u.o&&Tb(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Ip(ts(f)),m.m=null,m.P=!0,_x(m,u)}t.Za=function(){this.C!=null&&(this.C=null,Cp(this),Cb(this),On(19))};function Ap(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function qx(u,f){var m=null;if(u.g==f){Ap(u),Sb(u),u.g=null;var y=2}else if(wb(u.h,f))m=f.D,Tx(u.h,f),y=1;else return;if(u.G!=0){if(f.o)if(y==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var M=u.B;y=yp(),bt(y,new px(y,m)),Sp(u)}else zx(u);else if(M=f.s,M==3||M==0&&0<f.X||!(y==1&&r$(u,f)||y==2&&Cb(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),M){case 1:ha(u,5);break;case 4:ha(u,10);break;case 3:ha(u,6);break;default:ha(u,2)}}}function Gx(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function ha(u,f){if(u.j.info("Error code "+f),f==2){var m=p(u.fb,u),y=u.Xa;let M=!y;y=new da(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ep(y,"https"),Ip(y),M?QH(y.toString(),m):ZH(y.toString(),m)}else On(2);u.G=0,u.l&&u.l.sa(f),Kx(u),Ux(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),On(2)):(this.j.info("Failed to ping google.com"),On(1))};function Kx(u){if(u.G=0,u.ka=[],u.l){let f=Dx(u.h);(f.length!=0||u.i.length!=0)&&(C(u.ka,f),C(u.ka,u.i),u.h.i.length=0,S(u.i),u.i.length=0),u.l.ra()}}function Yx(u,f,m){var y=m instanceof da?ts(m):new da(m);if(y.g!="")f&&(y.g=f+"."+y.g),wp(y,y.s);else{var M=a.location;y=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;var V=new da(null);y&&Ep(V,y),f&&(V.g=f),M&&wp(V,M),m&&(V.l=m),y=V}return m=u.D,f=u.ya,m&&f&&ct(y,m,f),ct(y,"VER",u.la),hd(u,y),y}function Qx(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Et(new cd({eb:m})):new Et(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zx(){}t=Zx.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function xp(){}xp.prototype.g=function(u,f){return new or(u,f)};function or(u,f){Kt.call(this),this.g=new Bx(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!O(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!O(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new kc(this)}v(or,Kt),or.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},or.prototype.close=function(){Db(this.g)},or.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=fb(u),u=m);f.i.push(new BH(f.Ya++,u)),f.G==3&&Sp(f)},or.prototype.N=function(){this.g.l=null,delete this.j,Db(this.g),delete this.g,or.aa.N.call(this)};function Xx(u){gb.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(let m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}v(Xx,gb);function Jx(){mb.call(this),this.status=1}v(Jx,mb);function kc(u){this.g=u}v(kc,Zx),kc.prototype.ua=function(){bt(this.g,"a")},kc.prototype.ta=function(u){bt(this.g,new Xx(u))},kc.prototype.sa=function(u){bt(this.g,new Jx)},kc.prototype.ra=function(){bt(this.g,"b")},xp.prototype.createWebChannel=xp.prototype.g,or.prototype.send=or.prototype.o,or.prototype.open=or.prototype.m,or.prototype.close=or.prototype.close,MD=Ns.createWebChannelTransport=function(){return new xp},RD=Ns.getStatEventTarget=function(){return yp()},xD=Ns.Event=la,d_=Ns.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_p.NO_ERROR=0,_p.TIMEOUT=8,_p.HTTP_ERROR=6,yf=Ns.ErrorCode=_p,gx.COMPLETE="complete",AD=Ns.EventType=gx,ux.EventType=ed,ed.OPEN="a",ed.CLOSE="b",ed.ERROR="c",ed.MESSAGE="d",Kt.prototype.listen=Kt.prototype.K,ru=Ns.WebChannel=ux,zY=Ns.FetchXmlHttpFactory=cd,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,SD=Ns.XhrIo=Et}).apply(typeof u_<"u"?u_:typeof self<"u"?self:typeof window<"u"?window:{});var cL="@firebase/firestore",lL="4.8.0";var hn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");var Tu="11.10.0";var hc=new Nr("@firebase/firestore");function iu(){return hc.logLevel}function re(t,...e){if(hc.logLevel<=Oe.DEBUG){let n=e.map(wS);hc.debug(`Firestore (${Tu}): ${t}`,...n)}}function ks(t,...e){if(hc.logLevel<=Oe.ERROR){let n=e.map(wS);hc.error(`Firestore (${Tu}): ${t}`,...n)}}function Uo(t,...e){if(hc.logLevel<=Oe.WARN){let n=e.map(wS);hc.warn(`Firestore (${Tu}): ${t}`,...n)}}function wS(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function me(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,eV(t,r,n)}function eV(t,e,n){let r=`FIRESTORE (${Tu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ks(r),new Error(r)}function Xe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||eV(e,i,r)}function Ie(t,e){return t}var B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ee=class extends Rn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ai=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var __=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},FD=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(hn.UNAUTHENTICATED))}shutdown(){}},LD=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},VD=class{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Xe(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new ai;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ai,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ai)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xe(typeof r.accessToken=="string",31837,{l:r}),new __(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new hn(e)}},jD=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},BD=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new jD(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},v_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},UD=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Xe(this.o===void 0,3512);let r=s=>{s.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new v_(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Xe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new v_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function WY(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function tV(){return new TextEncoder}var If=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=WY(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}};function Ne(t,e){return t<e?-1:t>e?1:0}function HD(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return Ne(r,i);{let s=tV(),o=qY(s.encode(uL(t,n)),s.encode(uL(e,n)));return o!==0?o:Ne(r,i)}}n+=r>65535?2:1}return Ne(t.length,e.length)}function uL(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function qY(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Ne(t[n],e[n]);return Ne(t.length,e.length)}function hu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var dL="__name__",b_=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&me(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&me(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=t.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return Ne(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):HD(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ms.fromString(e.substring(4,e.length-2))}},mt=class t extends b_{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new ee(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},GY=/^[_a-zA-Z][_a-zA-Z0-9]*$/,_r=class t extends b_{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return GY.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===dL}static keyField(){return new t([dL])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new ee(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new ee(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ee(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ee(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var fe=class t{constructor(e){this.path=e}static fromPath(e){return new t(mt.fromString(e))}static fromName(e){return new t(mt.fromString(e).popFirst(5))}static empty(){return new t(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return mt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new mt(e.slice()))}};function nV(t,e,n){if(!n)throw new ee(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function KY(t,e,n,r){if(e===!0&&r===!0)throw new ee(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function hL(t){if(!fe.isDocumentKey(t))throw new ee(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fL(t){if(fe.isDocumentKey(t))throw new ee(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rV(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function J_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":me(12329,{type:typeof t})}function ci(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=J_(t);throw new ee(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Wt(t,e){let n={typeString:t};return e&&(n.value=e),n}function Pf(t,e){if(!rV(t))throw new ee(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new ee(B.INVALID_ARGUMENT,n);return!0}var pL=-62135596800,gL=1e6,qt=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*gL);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<pL)throw new ee(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gL}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Pf(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-pL;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};qt._jsonSchemaVersion="firestore/timestamp/1.0",qt._jsonSchema={type:Wt("string",qt._jsonSchemaVersion),seconds:Wt("number"),nanoseconds:Wt("number")};var De=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new qt(0,0))}static max(){return new t(new qt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Tf=-1,$D=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};$D.UNKNOWN_ID=-1;function YY(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=De.fromTimestamp(r===1e9?new qt(n+1,0):new qt(n,r));return new fc(i,fe.empty(),e)}function QY(t){return new fc(t.readTime,t.key,Tf)}var fc=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(De.min(),fe.empty(),Tf)}static max(){return new t(De.max(),fe.empty(),Tf)}};function ZY(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=fe.comparator(t.documentKey,e.documentKey),n!==0?n:Ne(t.largestBatchId,e.largestBatchId))}var XY="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",zD=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Du(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==XY)throw t;re("LocalStore","Unexpectedly lost primary lease")}var U=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;n(e[l]).next(d=>{o[l]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function JY(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Cu(t){return t.name==="IndexedDbTransactionError"}var IS=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),TS=-1;function ev(t){return t==null}function Df(t){return t===0&&1/t==-1/0}function eQ(t){return typeof t=="number"&&Number.isInteger(t)&&!Df(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var iV="";function tQ(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=mL(e)),e=nQ(t.get(n),e);return mL(e)}function nQ(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let s=t.charAt(i);switch(s){case"\0":n+="";break;case iV:n+="";break;default:n+=s}}return n}function mL(t){return t+iV+""}var rQ="remoteDocuments",sV="owner";var oV="mutationQueues";var aV="mutations";var cV="documentMutations",iQ="remoteDocumentsV14";var lV="remoteDocumentGlobal";var uV="targets";var dV="targetDocuments";var hV="targetGlobal",fV="collectionParents";var pV="clientMetadata";var gV="bundles";var mV="namedQueries";var sQ="indexConfiguration";var oQ="indexState";var aQ="indexEntries";var yV="documentOverlays";var cQ="globals";var lQ=[oV,aV,cV,rQ,uV,sV,hV,dV,pV,lV,fV,gV,mV],gTe=[...lQ,yV],uQ=[oV,aV,cV,iQ,uV,sV,hV,dV,pV,lV,fV,gV,mV,yV],dQ=uQ,hQ=[...dQ,sQ,oQ,aQ];var mTe=[...hQ,cQ];function yL(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qo(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _V(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ct=class t{constructor(e,n){this.comparator=e,this.root=n||Hi.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Hi.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hi.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cu(this.root,e,this.comparator,!1)}getReverseIterator(){return new cu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cu(this.root,e,this.comparator,!0)}},cu=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Hi=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}};Hi.EMPTY=null,Hi.RED=!0,Hi.BLACK=!1;Hi.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Hi(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var fn=class t{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new E_(this.data.getIterator())}getIteratorFrom(e){return new E_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},E_=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Fr=class t{constructor(e){this.fields=e,e.sort(_r.comparator)}static empty(){return new t([])}unionWith(e){let n=new fn(_r.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return hu(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var w_=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var kn=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new w_("Invalid base64 string: "+s):s}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};kn.EMPTY_BYTE_STRING=new kn("");var fQ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ps(t){if(Xe(!!t,39018),typeof t=="string"){let e=0,n=fQ.exec(t);if(Xe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gt(t.seconds),nanos:gt(t.nanos)}}function gt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Os(t){return typeof t=="string"?kn.fromBase64String(t):kn.fromUint8Array(t)}var vV="server_timestamp",bV="__type__",EV="__previous_value__",wV="__local_write_time__";function DS(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[bV])===null||n===void 0?void 0:n.stringValue)===vV}function tv(t){let e=t.mapValue.fields[EV];return DS(e)?tv(e):e}function Cf(t){let e=Ps(t.mapValue.fields[wV].timestampValue);return new qt(e.seconds,e.nanos)}var WD=class{constructor(e,n,r,i,s,o,a,c,l,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=d}},I_="(default)",T_=class t{constructor(e,n){this.projectId=e,this.database=n||I_}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===I_}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var CS="__type__",IV="__max__",h_={mapValue:{fields:{__type__:{stringValue:IV}}}},SS="__vector__",fu="value";function Ho(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?DS(t)?4:DV(t)?9007199254740991:TV(t)?10:11:me(28295,{value:t})}function qi(t,e){if(t===e)return!0;let n=Ho(t);if(n!==Ho(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Cf(t).isEqual(Cf(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Ps(i.timestampValue),a=Ps(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,s){return Os(i.bytesValue).isEqual(Os(s.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,s){return gt(i.geoPointValue.latitude)===gt(s.geoPointValue.latitude)&&gt(i.geoPointValue.longitude)===gt(s.geoPointValue.longitude)})(t,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return gt(i.integerValue)===gt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=gt(i.doubleValue),a=gt(s.doubleValue);return o===a?Df(o)===Df(a):isNaN(o)&&isNaN(a)}return!1})(t,e);case 9:return hu(t.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(yL(o)!==yL(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!qi(o[c],a[c])))return!1;return!0})(t,e);default:return me(52216,{left:t})}}function Sf(t,e){return(t.values||[]).find(n=>qi(n,e))!==void 0}function pu(t,e){if(t===e)return 0;let n=Ho(t),r=Ho(e);if(n!==r)return Ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=gt(s.integerValue||s.doubleValue),c=gt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(t,e);case 3:return _L(t.timestampValue,e.timestampValue);case 4:return _L(Cf(t),Cf(e));case 5:return HD(t.stringValue,e.stringValue);case 6:return(function(s,o){let a=Os(s),c=Os(o);return a.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=Ne(a[l],c[l]);if(d!==0)return d}return Ne(a.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=Ne(gt(s.latitude),gt(o.latitude));return a!==0?a:Ne(gt(s.longitude),gt(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return vL(t.arrayValue,e.arrayValue);case 10:return(function(s,o){var a,c,l,d;let h=s.fields||{},p=o.fields||{},g=(a=h[fu])===null||a===void 0?void 0:a.arrayValue,v=(c=p[fu])===null||c===void 0?void 0:c.arrayValue,S=Ne(((l=g?.values)===null||l===void 0?void 0:l.length)||0,((d=v?.values)===null||d===void 0?void 0:d.length)||0);return S!==0?S:vL(g,v)})(t.mapValue,e.mapValue);case 11:return(function(s,o){if(s===h_.mapValue&&o===h_.mapValue)return 0;if(s===h_.mapValue)return 1;if(o===h_.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){let p=HD(c[h],d[h]);if(p!==0)return p;let g=pu(a[c[h]],l[d[h]]);if(g!==0)return g}return Ne(c.length,d.length)})(t.mapValue,e.mapValue);default:throw me(23264,{le:n})}}function _L(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ne(t,e);let n=Ps(t),r=Ps(e),i=Ne(n.seconds,r.seconds);return i!==0?i:Ne(n.nanos,r.nanos)}function vL(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=pu(n[i],r[i]);if(s)return s}return Ne(n.length,r.length)}function gu(t){return qD(t)}function qD(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=Ps(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Os(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return fe.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=qD(s);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${qD(n.fields[o])}`;return i+"}"})(t.mapValue):me(61005,{value:t})}function g_(t){switch(Ho(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=tv(t);return e?16+g_(e):16;case 5:return 2*t.stringValue.length;case 6:return Os(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+g_(s),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return qo(r.fields,(s,o)=>{i+=s.length+g_(o)}),i})(t.mapValue);default:throw me(13486,{value:t})}}function bL(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function GD(t){return!!t&&"integerValue"in t}function AS(t){return!!t&&"arrayValue"in t}function EL(t){return!!t&&"nullValue"in t}function wL(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function m_(t){return!!t&&"mapValue"in t}function TV(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[CS])===null||n===void 0?void 0:n.stringValue)===SS}function vf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return qo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=vf(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vf(t.arrayValue.values[n]);return e}return Object.assign({},t)}function DV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===IV}var _Te={mapValue:{fields:{[CS]:{stringValue:SS},[fu]:{arrayValue:{}}}}};var yr=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!m_(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vf(n)}setAll(e){let n=_r.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=vf(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());m_(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];m_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){qo(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(vf(this.value))}};function CV(t){let e=[];return qo(t.fields,(n,r)=>{let i=new _r([n]);if(m_(r)){let s=CV(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Fr(e)}var li=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,De.min(),De.min(),De.min(),yr.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,De.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,De.min(),De.min(),yr.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,De.min(),De.min(),yr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var mu=class{constructor(e,n){this.position=e,this.inclusive=n}};function IL(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=fe.comparator(fe.fromName(o.referenceValue),n.key):r=pu(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function TL(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!qi(t.position[n],e.position[n]))return!1;return!0}var pc=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function pQ(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var D_=class{},zt=class t extends D_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new YD(e,n,r):n==="array-contains"?new XD(e,r):n==="in"?new JD(e,r):n==="not-in"?new eC(e,r):n==="array-contains-any"?new tC(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new QD(e,r):new ZD(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(pu(n,this.value)):n!==null&&Ho(this.value)===Ho(n)&&this.matchesComparison(pu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ui=class t extends D_{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return SV(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function SV(t){return t.op==="and"}function AV(t){return gQ(t)&&SV(t)}function gQ(t){for(let e of t.filters)if(e instanceof ui)return!1;return!0}function KD(t){if(t instanceof zt)return t.field.canonicalString()+t.op.toString()+gu(t.value);if(AV(t))return t.filters.map(e=>KD(e)).join(",");{let e=t.filters.map(n=>KD(n)).join(",");return`${t.op}(${e})`}}function xV(t,e){return t instanceof zt?(function(r,i){return i instanceof zt&&r.op===i.op&&r.field.isEqual(i.field)&&qi(r.value,i.value)})(t,e):t instanceof ui?(function(r,i){return i instanceof ui&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&xV(o,i.filters[a]),!0):!1})(t,e):void me(19439)}function RV(t){return t instanceof zt?(function(n){return`${n.field.canonicalString()} ${n.op} ${gu(n.value)}`})(t):t instanceof ui?(function(n){return n.op.toString()+" {"+n.getFilters().map(RV).join(" ,")+"}"})(t):"Filter"}var YD=class extends zt{constructor(e,n,r){super(e,n,r),this.key=fe.fromName(r.referenceValue)}matches(e){let n=fe.comparator(e.key,this.key);return this.matchesComparison(n)}},QD=class extends zt{constructor(e,n){super(e,"in",n),this.keys=MV("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},ZD=class extends zt{constructor(e,n){super(e,"not-in",n),this.keys=MV("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function MV(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>fe.fromName(r.referenceValue))}var XD=class extends zt{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return AS(n)&&Sf(n.arrayValue,this.value)}},JD=class extends zt{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Sf(this.value.arrayValue,n)}},eC=class extends zt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Sf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Sf(this.value.arrayValue,n)}},tC=class extends zt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!AS(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Sf(this.value.arrayValue,r))}};var nC=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}};function DL(t,e=null,n=[],r=[],i=null,s=null,o=null){return new nC(t,e,n,r,i,s,o)}function xS(t){let e=Ie(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>KD(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),ev(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>gu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>gu(r)).join(",")),e.Pe=n}return e.Pe}function RS(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!pQ(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!xV(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!TL(t.startAt,e.startAt)&&TL(t.endAt,e.endAt)}function rC(t){return fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var $o=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function mQ(t,e,n,r,i,s,o,a){return new $o(t,e,n,r,i,s,o,a)}function MS(t){return new $o(t)}function CL(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function NV(t){return t.collectionGroup!==null}function bf(t){let e=Ie(t);if(e.Te===null){e.Te=[];let n=new Set;for(let s of e.explicitOrderBy)e.Te.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new fn(_r.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Te.push(new pc(s,r))}),n.has(_r.keyField().canonicalString())||e.Te.push(new pc(_r.keyField(),r))}return e.Te}function $i(t){let e=Ie(t);return e.Ie||(e.Ie=yQ(e,bf(t))),e.Ie}function yQ(t,e){if(t.limitType==="F")return DL(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new pc(i.field,s)});let n=t.endAt?new mu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new mu(t.startAt.position,t.startAt.inclusive):null;return DL(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function iC(t,e){let n=t.filters.concat([e]);return new $o(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function sC(t,e,n){return new $o(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function nv(t,e){return RS($i(t),$i(e))&&t.limitType===e.limitType}function kV(t){return`${xS($i(t))}|lt:${t.limitType}`}function su(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>RV(i)).join(", ")}]`),ev(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>gu(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>gu(i)).join(",")),`Target(${r})`})($i(t))}; limitType=${t.limitType})`}function rv(t,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):fe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(t,e)&&(function(r,i){for(let s of bf(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let l=IL(o,a,c);return o.inclusive?l<=0:l<0})(r.startAt,bf(r),i)||r.endAt&&!(function(o,a,c){let l=IL(o,a,c);return o.inclusive?l>=0:l>0})(r.endAt,bf(r),i))})(t,e)}function _Q(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function PV(t){return(e,n)=>{let r=!1;for(let i of bf(t)){let s=vQ(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function vQ(t,e,n){let r=t.field.isKeyField()?fe.comparator(e.key,n.key):(function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?pu(c,l):me(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return me(19790,{direction:t.dir})}}var Fs=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){qo(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return _V(this.inner)}size(){return this.innerSize}};var bQ=new Ct(fe.comparator);function Ls(){return bQ}var OV=new Ct(fe.comparator);function _f(...t){let e=OV;for(let n of t)e=e.insert(n.key,n);return e}function FV(t){let e=OV;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function cc(){return Ef()}function LV(){return Ef()}function Ef(){return new Fs(t=>t.toString(),(t,e)=>t.isEqual(e))}var EQ=new Ct(fe.comparator),wQ=new fn(fe.comparator);function Ue(...t){let e=wQ;for(let n of t)e=e.add(n);return e}var IQ=new fn(Ne);function TQ(){return IQ}function NS(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Df(e)?"-0":e}}function VV(t){return{integerValue:""+t}}function DQ(t,e){return eQ(e)?VV(e):NS(t,e)}var yu=class{constructor(){this._=void 0}};function CQ(t,e,n){return t instanceof gc?(function(i,s){let o={fields:{[bV]:{stringValue:vV},[wV]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&DS(s)&&(s=tv(s)),s&&(o.fields[EV]=s),{mapValue:o}})(n,e):t instanceof mc?BV(t,e):t instanceof yc?UV(t,e):(function(i,s){let o=jV(i,s),a=SL(o)+SL(i.Ee);return GD(o)&&GD(i.Ee)?VV(a):NS(i.serializer,a)})(t,e)}function SQ(t,e,n){return t instanceof mc?BV(t,e):t instanceof yc?UV(t,e):n}function jV(t,e){return t instanceof _u?(function(r){return GD(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var gc=class extends yu{},mc=class extends yu{constructor(e){super(),this.elements=e}};function BV(t,e){let n=HV(e);for(let r of t.elements)n.some(i=>qi(i,r))||n.push(r);return{arrayValue:{values:n}}}var yc=class extends yu{constructor(e){super(),this.elements=e}};function UV(t,e){let n=HV(e);for(let r of t.elements)n=n.filter(i=>!qi(i,r));return{arrayValue:{values:n}}}var _u=class extends yu{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function SL(t){return gt(t.integerValue||t.doubleValue)}function HV(t){return AS(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var oC=class{constructor(e,n){this.field=e,this.transform=n}};function AQ(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof mc&&i instanceof mc||r instanceof yc&&i instanceof yc?hu(r.elements,i.elements,qi):r instanceof _u&&i instanceof _u?qi(r.Ee,i.Ee):r instanceof gc&&i instanceof gc})(t.transform,e.transform)}var aC=class{constructor(e,n){this.version=e,this.transformResults=n}},zi=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function y_(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var vu=class{};function $V(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Af(t.key,zi.none()):new _c(t.key,t.data,zi.none());{let n=t.data,r=yr.empty(),i=new fn(_r.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Gi(t.key,r,new Fr(i.toArray()),zi.none())}}function xQ(t,e,n){t instanceof _c?(function(i,s,o){let a=i.value.clone(),c=xL(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Gi?(function(i,s,o){if(!y_(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=xL(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(zV(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function wf(t,e,n,r){return t instanceof _c?(function(s,o,a,c){if(!y_(s.precondition,o))return a;let l=s.value.clone(),d=RL(s.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof Gi?(function(s,o,a,c){if(!y_(s.precondition,o))return a;let l=RL(s.fieldTransforms,c,o),d=o.data;return d.setAll(zV(s)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))})(t,e,n,r):(function(s,o,a){return y_(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(t,e,n)}function RQ(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=jV(r.transform,i||null);s!=null&&(n===null&&(n=yr.empty()),n.set(r.field,s))}return n||null}function AL(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&hu(r,i,(s,o)=>AQ(s,o))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var _c=class extends vu{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Gi=class extends vu{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function zV(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function xL(t,e,n){let r=new Map;Xe(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,SQ(o,a,n[i]))}return r}function RL(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,CQ(s,o,e))}return r}var Af=class extends vu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},cC=class extends vu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var lC=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&xQ(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=wf(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=wf(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=LV();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=$V(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(De.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ue())}isEqual(e){return this.batchId===e.batchId&&hu(this.mutations,e.mutations,(n,r)=>AL(n,r))&&hu(this.baseMutations,e.baseMutations,(n,r)=>AL(n,r))}},uC=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Xe(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return EQ})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var dC=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var hC=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ht,$e;function MQ(t){switch(t){case B.OK:return me(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return me(15467,{code:t})}}function WV(t){if(t===void 0)return ks("GRPC error has no .code"),B.UNKNOWN;switch(t){case Ht.OK:return B.OK;case Ht.CANCELLED:return B.CANCELLED;case Ht.UNKNOWN:return B.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return B.INTERNAL;case Ht.UNAVAILABLE:return B.UNAVAILABLE;case Ht.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Ht.NOT_FOUND:return B.NOT_FOUND;case Ht.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Ht.ABORTED:return B.ABORTED;case Ht.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Ht.DATA_LOSS:return B.DATA_LOSS;default:return me(39323,{code:t})}}($e=Ht||(Ht={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";var ML=null;var NQ=new Ms([4294967295,4294967295],0);function NL(t){let e=tV().encode(t),n=new CD;return n.update(e),new Uint8Array(n.digest())}function kL(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ms([n,r],0),new Ms([i,s],0)]}var fC=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new lc(`Invalid padding: ${n}`);if(r<0)throw new lc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new lc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new lc(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Ms.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Ms.fromNumber(r)));return i.compare(NQ)===1&&(i=new Ms([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=NL(e),[r,i]=kL(n);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;let n=NL(e),[r,i]=kL(n);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);this.we(o)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},lc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var C_=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,xf.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(De.min(),i,new Ct(Ne),Ls(),Ue())}},xf=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,Ue(),Ue(),Ue())}};var lu=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},S_=class{constructor(e,n){this.targetId=e,this.De=n}},A_=class{constructor(e,n,r=kn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},x_=class{constructor(){this.ve=0,this.Ce=PL(),this.Fe=kn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ue(),n=Ue(),r=Ue();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:me(38017,{changeType:s})}}),new xf(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=PL()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},pC=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ls(),this.je=f_(),this.Je=f_(),this.He=new Ct(Ne)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let s=i.target;if(rC(s))if(r===0){let o=new fe(s.path);this.Xe(n,o,li.newNoDocument(o,De.min()))}else Xe(r===1,20013,{expectedCount:r});else{let o=this.ot(n);if(o!==r){let a=this._t(e),c=a?this.ut(a,e,o):1;if(c!==0){this.rt(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}ML?.ct((function(d,h,p,g,v){var S,C,k,O,F,z;let W={localCacheCount:d,existenceFilterCount:h.count,databaseId:p.database,projectId:p.projectId},K=h.unchangedNames;return K&&(W.bloomFilter={applied:v===0,hashCount:(S=K?.hashCount)!==null&&S!==void 0?S:0,bitmapLength:(O=(k=(C=K?.bits)===null||C===void 0?void 0:C.bitmap)===null||k===void 0?void 0:k.length)!==null&&O!==void 0?O:0,padding:(z=(F=K?.bits)===null||F===void 0?void 0:F.padding)!==null&&z!==void 0?z:0,mightContain:I=>{var _;return(_=g?.mightContain(I))!==null&&_!==void 0&&_}}),W})(o,e.De,this.We.lt(),a,c))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Os(r).toUint8Array()}catch(c){if(c instanceof w_)return Uo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new fC(o,i,s)}catch(c){return Uo(c instanceof lc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,s,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((s,o)=>{let a=this.st(o);if(a){if(s.current&&rC(a.target)){let c=new fe(a.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,li.newNoDocument(c,e))}s.Ne&&(n.set(o,s.Le()),s.ke())}});let r=Ue();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.st(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));let i=new C_(e,n,this.He,this.ze,r);return this.ze=Ls(),this.je=f_(),this.Je=f_(),this.He=new Ct(Ne),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new x_,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new fn(Ne),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new fn(Ne),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new x_),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function f_(){return new Ct(fe.comparator)}function PL(){return new Ct(fe.comparator)}var kQ={asc:"ASCENDING",desc:"DESCENDING"},PQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OQ={and:"AND",or:"OR"},gC=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function mC(t,e){return t.useProto3Json||ev(e)?e:{value:e}}function R_(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qV(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function FQ(t,e){return R_(t,e.toTimestamp())}function Wi(t){return Xe(!!t,49232),De.fromTimestamp((function(n){let r=Ps(n);return new qt(r.seconds,r.nanos)})(t))}function kS(t,e){return yC(t,e).canonicalString()}function yC(t,e){let n=(function(i){return new mt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function GV(t){let e=mt.fromString(t);return Xe(XV(e),10190,{key:e.toString()}),e}function _C(t,e){return kS(t.databaseId,e.path)}function ND(t,e){let n=GV(e);if(n.get(1)!==t.databaseId.projectId)throw new ee(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new fe(YV(n))}function KV(t,e){return kS(t.databaseId,e)}function LQ(t){let e=GV(t);return e.length===4?mt.emptyPath():YV(e)}function vC(t){return new mt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YV(t){return Xe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function OL(t,e,n){return{name:_C(t,e),fields:n.value.mapValue.fields}}function VQ(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:me(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(l,d){return l.useProto3Json?(Xe(d===void 0||typeof d=="string",58123),kn.fromBase64String(d||"")):(Xe(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),kn.fromUint8Array(d||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(l){let d=l.code===void 0?B.UNKNOWN:WV(l.code);return new ee(d,l.message||"")})(o);n=new A_(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ND(t,r.document.name),s=Wi(r.document.updateTime),o=r.document.createTime?Wi(r.document.createTime):De.min(),a=new yr({mapValue:{fields:r.document.fields}}),c=li.newFoundDocument(i,s,o,a),l=r.targetIds||[],d=r.removedTargetIds||[];n=new lu(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ND(t,r.document),s=r.readTime?Wi(r.readTime):De.min(),o=li.newNoDocument(i,s),a=r.removedTargetIds||[];n=new lu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ND(t,r.document),s=r.removedTargetIds||[];n=new lu([],s,i,null)}else{if(!("filter"in e))return me(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new hC(i,s),a=r.targetId;n=new S_(a,o)}}return n}function jQ(t,e){let n;if(e instanceof _c)n={update:OL(t,e.key,e.value)};else if(e instanceof Af)n={delete:_C(t,e.key)};else if(e instanceof Gi)n={update:OL(t,e.key,e.data),updateMask:KQ(e.fieldMask)};else{if(!(e instanceof cC))return me(16599,{Rt:e.type});n={verify:_C(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof gc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof mc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof yc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof _u)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw me(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:FQ(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:me(27497)})(t,e.precondition)),n}function BQ(t,e){return t&&t.length>0?(Xe(e!==void 0,14353),t.map(n=>(function(i,s){let o=i.updateTime?Wi(i.updateTime):Wi(s);return o.isEqual(De.min())&&(o=Wi(s)),new aC(o,i.transformResults||[])})(n,e))):[]}function UQ(t,e){return{documents:[KV(t,e.path)]}}function HQ(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=KV(t,i);let s=(function(l){if(l.length!==0)return ZV(ui.create(l,"and"))})(e.filters);s&&(n.structuredQuery.where=s);let o=(function(l){if(l.length!==0)return l.map(d=>(function(p){return{field:ou(p.field),direction:WQ(p.dir)}})(d))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=mC(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:n,parent:i}}function $Q(t){let e=LQ(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Xe(r===1,65062);let d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=(function(h){let p=QV(h);return p instanceof ui&&AV(p)?p.getFilters():[p]})(n.where));let o=[];n.orderBy&&(o=(function(h){return h.map(p=>(function(v){return new pc(au(v.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(v.direction))})(p))})(n.orderBy));let a=null;n.limit&&(a=(function(h){let p;return p=typeof h=="object"?h.value:h,ev(p)?null:p})(n.limit));let c=null;n.startAt&&(c=(function(h){let p=!!h.before,g=h.values||[];return new mu(g,p)})(n.startAt));let l=null;return n.endAt&&(l=(function(h){let p=!h.before,g=h.values||[];return new mu(g,p)})(n.endAt)),mQ(e,i,o,s,a,"F",c,l)}function zQ(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function QV(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=au(n.unaryFilter.field);return zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=au(n.unaryFilter.field);return zt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=au(n.unaryFilter.field);return zt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=au(n.unaryFilter.field);return zt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}})(t):t.fieldFilter!==void 0?(function(n){return zt.create(au(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return ui.create(n.compositeFilter.filters.map(r=>QV(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return me(1026)}})(n.compositeFilter.op))})(t):me(30097,{filter:t})}function WQ(t){return kQ[t]}function qQ(t){return PQ[t]}function GQ(t){return OQ[t]}function ou(t){return{fieldPath:t.canonicalString()}}function au(t){return _r.fromServerFormat(t.fieldPath)}function ZV(t){return t instanceof zt?(function(n){if(n.op==="=="){if(wL(n.value))return{unaryFilter:{field:ou(n.field),op:"IS_NAN"}};if(EL(n.value))return{unaryFilter:{field:ou(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(wL(n.value))return{unaryFilter:{field:ou(n.field),op:"IS_NOT_NAN"}};if(EL(n.value))return{unaryFilter:{field:ou(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ou(n.field),op:qQ(n.op),value:n.value}}})(t):t instanceof ui?(function(n){let r=n.getFilters().map(i=>ZV(i));return r.length===1?r[0]:{compositeFilter:{op:GQ(n.op),filters:r}}})(t):me(54877,{filter:t})}function KQ(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function XV(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Rf=class t{constructor(e,n,r,i,s=De.min(),o=De.min(),a=kn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var bC=class{constructor(e){this.gt=e}};function YQ(t){let e=$Q({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?sC(e,e.limit,"L"):e}var M_=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(gt(e.integerValue));else if("doubleValue"in e){let r=gt(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),Df(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=Ps(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(Os(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?DV(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):TV(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):me(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let s=e.fields||{};this.Ct(n,53);let o=fu,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(gt(a)),this.xt(o,n),this.Dt(s[o],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),fe.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};M_.Ut=new M_;var EC=class{constructor(){this.Dn=new wC}addToCollectionParentIndex(e,n){return this.Dn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(fc.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(fc.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}},wC=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new fn(mt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new fn(mt.comparator)).toArray()}};var vTe=new Uint8Array(0);var FL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},JV=41943040,Or=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};Or.DEFAULT_COLLECTION_PERCENTILE=10,Or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Or.DEFAULT=new Or(JV,Or.DEFAULT_COLLECTION_PERCENTILE,Or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Or.DISABLED=new Or(-1,0,0);var Mf=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var LL="LruGarbageCollector",QQ=1048576;function VL([t,e],[n,r]){let i=Ne(t,n);return i===0?Ne(e,r):i}var IC=class{constructor(e){this.Tr=e,this.buffer=new fn(VL),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();VL(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},TC=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){re(LL,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Cu(n)?re(LL,"Ignoring IndexedDB error during garbage collection: ",n):await Du(n)}await this.Rr(3e5)})}},DC=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(IS.ue);let r=new IC(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(FL)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),FL):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,s,o,a,c,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(l=Date.now(),iu()<=Oe.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${h} documents in `+(l-c)+`ms
Total Duration: ${l-d}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}};function ZQ(t,e){return new DC(t,e)}var CC=class{constructor(){this.changes=new Fs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,li.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var SC=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var AC=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&wf(r.mutation,i,Fr.empty(),qt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ue()){let i=cc();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=_f();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=cc();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ue()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Ls(),o=Ef(),a=(function(){return Ef()})();return n.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Gi)?s=s.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),wf(d.mutation,l,d.mutation.getFieldMask(),qt.now())):o.set(l.key,Fr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,d)=>o.set(l,d)),n.forEach((l,d)=>{var h;return a.set(l,new SC(d,(h=o.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Ef(),i=new Ct((o,a)=>o-a),s=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let d=r.get(c)||Fr.empty();d=a.applyToLocalView(l,d),r.set(c,d);let h=(i.get(a.batchId)||Ue()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,h=LV();d.forEach(p=>{if(!s.has(p)){let g=$V(n.get(p),r.get(p));g!==null&&h.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,h))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(o){return fe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):NV(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):U.resolve(cc()),a=Tf,c=s;return o.next(l=>U.forEach(l,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?U.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{c=c.insert(d,p)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,Ue())).next(d=>({batchId:a,changes:FV(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new fe(n)).next(r=>{let i=_f();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=_f();return this.indexManager.getCollectionParents(e,s).next(a=>U.forEach(a,c=>{let l=(function(h,p){return new $o(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,l)=>{let d=l.getKey();o.get(d)===null&&(o=o.insert(d,li.newInvalidDocument(d)))});let a=_f();return o.forEach((c,l)=>{let d=s.get(c);d!==void 0&&wf(d.mutation,l,Fr.empty(),qt.now()),rv(n,l)&&(a=a.insert(c,l))}),a})}};var xC=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return U.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Wi(i.createTime)}})(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(i){return{name:i.name,query:YQ(i.bundledQuery),readTime:Wi(i.readTime)}})(n)),U.resolve()}};var RC=class{constructor(){this.overlays=new Ct(fe.comparator),this.kr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){let r=cc();return U.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.wt(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){let i=cc(),s=n.length+1,o=new fe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return U.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ct((l,d)=>l-d),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let d=s.get(l.largestBatchId);d===null&&(d=cc(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=cc(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return U.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new dC(n,r));let s=this.kr.get(n);s===void 0&&(s=Ue(),this.kr.set(n,s)),this.kr.set(n,s.add(r.key))}};var MC=class{constructor(){this.sessionToken=kn.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}};var Nf=class{constructor(){this.qr=new fn($t.Qr),this.$r=new fn($t.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new $t(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new $t(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new fe(new mt([])),r=new $t(n,e),i=new $t(n,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new fe(new mt([])),r=new $t(n,e),i=new $t(n,e+1),s=Ue();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new $t(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},$t=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return fe.comparator(e.key,n.key)||Ne(e.Hr,n.Hr)}static Ur(e,n){return Ne(e.Hr,n.Hr)||fe.comparator(e.key,n.key)}};var NC=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new fn($t.Qr)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new lC(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.Yr=this.Yr.add(new $t(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),s=i<0?0:i;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?TS:this.er-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new $t(n,0),i=new $t(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{let a=this.Zr(o.Hr);s.push(a)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new fn(Ne);return n.forEach(i=>{let s=new $t(i,0),o=new $t(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),U.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;fe.isDocumentKey(s)||(s=s.child(""));let o=new $t(new fe(s),0),a=new fn(Ne);return this.Yr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Hr)),!0)},o),U.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Xe(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return U.forEach(n.mutations,i=>{let s=new $t(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new $t(n,0),i=this.Yr.firstAfterOrEqual(r);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var kC=class{constructor(e){this.ni=e,this.docs=(function(){return new Ct(fe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():li.newInvalidDocument(n))}getEntries(e,n){let r=Ls();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():li.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Ls(),o=n.path,a=new fe(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||ZY(QY(d),r)<=0||(i.has(d.key)||rv(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,r,i){me(9500)}ri(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new PC(this)}getSize(e){return U.resolve(this.size)}},PC=class extends CC{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var OC=class{constructor(e){this.persistence=e,this.ii=new Fs(n=>xS(n),RS),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.si=0,this.oi=new Nf,this.targetCount=0,this._i=Mf.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),U.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new Mf(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.hr(n),U.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),U.waitFor(s).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),U.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.oi.containsKey(n))}};var N_=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new IS(0),this.ci=!1,this.ci=!0,this.li=new MC,this.referenceDelegate=e(this),this.hi=new OC(this),this.indexManager=new EC,this.remoteDocumentCache=(function(i){return new kC(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new bC(n),this.Ti=new xC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new NC(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){re("MemoryPersistence","Starting transaction:",e);let i=new FC(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return U.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},FC=class extends zD{constructor(e){super(),this.currentSequenceNumber=e}},LC=class t{constructor(e){this.persistence=e,this.Ai=new Nf,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw me(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.mi,r=>{let i=fe.fromPath(r);return this.fi(e,i).next(s=>{s||n.removeEntry(i,De.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return U.or([()=>U.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},k_=class t{constructor(e,n){this.persistence=e,this.gi=new Fs(r=>tQ(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=ZQ(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return U.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?U.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,n).next(a=>{a||(r++,s.removeEntry(o,De.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),U.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=g_(e.data.value)),n}Sr(e,n,r){return U.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return U.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var VC=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=Ue(),i=Ue();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var jC=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var BC=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return CO()?8:JY(dn())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ps(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new jC;return this.ws(e,n,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,n,o,a.size)})}).next(()=>s.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(iu()<=Oe.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",su(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),U.resolve()):(iu()<=Oe.DEBUG&&re("QueryEngine","Query:",su(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(iu()<=Oe.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",su(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$i(n))):U.resolve())}ps(e,n){if(CL(n))return U.resolve(null);let r=$i(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=sC(n,null,"F"),r=$i(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Ue(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.bs(n,a);return this.Ds(n,l,o,c.readTime)?this.ps(e,sC(n,null,"F")):this.vs(e,l,n,c)}))})))}ys(e,n,r,i){return CL(n)||i.isEqual(De.min())?U.resolve(null):this.gs.getDocuments(e,r).next(s=>{let o=this.bs(n,s);return this.Ds(n,o,r,i)?U.resolve(null):(iu()<=Oe.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),su(n)),this.vs(e,o,n,YY(i,Tf)).next(a=>a))})}bs(e,n){let r=new fn(PV(e));return n.forEach((i,s)=>{rv(e,s)&&(r=r.add(s))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,n,r){return iu()<=Oe.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",su(n)),this.gs.getDocumentsMatchingQuery(e,n,fc.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var PS="LocalStore",XQ=3e8,UC=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Ct(Ne),this.Ms=new Fs(s=>xS(s),RS),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AC(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function JQ(t,e,n,r){return new UC(t,e,n,r)}async function e2(t,e){let n=Ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Ue();for(let l of i){o.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of s){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(l=>({Bs:l,removedBatchIds:o,addedBatchIds:a}))})})}function eZ(t,e){let n=Ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,d){let h=l.batch,p=h.keys(),g=U.resolve();return p.forEach(v=>{g=g.next(()=>d.getEntry(c,v)).next(S=>{let C=l.docVersions.get(v);Xe(C!==null,48541),S.version.compareTo(C)<0&&(h.applyToRemoteDocument(S,l),S.isValidDocument()&&(S.setReadTime(l.commitVersion),d.addEntry(S)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,h))})(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=Ue();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function t2(t){let e=Ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function tZ(t,e){let n=Ie(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((d,h)=>{let p=i.get(h);if(!p)return;a.push(n.hi.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.hi.addMatchingKeys(s,d.addedDocuments,h)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(kn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(h,g),(function(S,C,k){return S.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=XQ?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0})(p,g,d)&&a.push(n.hi.updateTargetData(s,g))});let c=Ls(),l=Ue();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(nZ(s,o,e.documentUpdates).next(d=>{c=d.Ls,l=d.ks})),!r.isEqual(De.min())){let d=n.hi.getLastRemoteSnapshotVersion(s).next(h=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return U.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.Fs=i,s))}function nZ(t,e,n){let r=Ue(),i=Ue();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Ls();return n.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(De.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):re(PS,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ls:o,ks:i}})}function rZ(t,e){let n=Ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=TS),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function iZ(t,e){let n=Ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(s=>s?(i=s,U.resolve(i)):n.hi.allocateTargetId(r).next(o=>(i=new Rf(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function HC(t,e,n){let r=Ie(t),i=r.Fs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Cu(o))throw o;re(PS,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function jL(t,e,n){let r=Ie(t),i=De.min(),s=Ue();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,l,d){let h=Ie(c),p=h.Ms.get(d);return p!==void 0?U.resolve(h.Fs.get(p)):h.hi.getTargetData(l,d)})(r,o,$i(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?i:De.min(),n?s:Ue())).next(a=>(sZ(r,_Q(e),a),{documents:a,qs:s})))}function sZ(t,e,n){let r=t.xs.get(e)||De.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.xs.set(e,r)}var P_=class{constructor(){this.activeTargetIds=TQ()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var $C=class{constructor(){this.Fo=new P_,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new P_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var zC=class{xo(e){}shutdown(){}};var BL="ConnectivityMonitor",O_=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){re(BL,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){re(BL,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var p_=null;function WC(){return p_===null?p_=(function(){return 268435456+Math.round(2147483648*Math.random())})():p_++,"0x"+p_.toString(16)}var kD="RestConnection",oZ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},qC=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===I_?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){let o=WC(),a=this.Go(e,n.toUriEncodedString());re(kD,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,s);let{host:l}=new URL(a),d=ri(l);return this.jo(e,a,c,r,d).then(h=>(re(kD,`Received RPC '${e}' ${o}: `,h),h),h=>{throw Uo(kD,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Jo(e,n,r,i,s,o){return this.Wo(e,n,r,i,s)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Tu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,n){let r=oZ[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var GC=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Nn="WebChannelConnection",KC=class extends qC{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,s){let o=WC();return new Promise((a,c)=>{let l=new SD;l.setWithCredentials(!0),l.listenOnce(AD.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case yf.NO_ERROR:let h=l.getResponseJson();re(Nn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case yf.TIMEOUT:re(Nn,`RPC '${e}' ${o} timed out`),c(new ee(B.DEADLINE_EXCEEDED,"Request time out"));break;case yf.HTTP_ERROR:let p=l.getStatus();if(re(Nn,`RPC '${e}' ${o} failed with status:`,p,"response text:",l.getResponseText()),p>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);let v=g?.error;if(v&&v.status&&v.message){let S=(function(k){let O=k.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(O)>=0?O:B.UNKNOWN})(v.status);c(new ee(S,v.message))}else c(new ee(B.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new ee(B.UNAVAILABLE,"Connection failed."));break;default:me(9055,{c_:e,streamId:o,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{re(Nn,`RPC '${e}' ${o} completed.`)}});let d=JSON.stringify(i);re(Nn,`RPC '${e}' ${o} sending request:`,i),l.send(n,"POST",d,r,15)})}P_(e,n,r){let i=WC(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=MD(),a=RD(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let d=s.join("");re(Nn,`Creating RPC '${e}' stream ${i}: ${d}`,c);let h=o.createWebChannel(d,c);this.T_(h);let p=!1,g=!1,v=new GC({Ho:C=>{g?re(Nn,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(p||(re(Nn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),re(Nn,`RPC '${e}' stream ${i} sending:`,C),h.send(C))},Yo:()=>h.close()}),S=(C,k,O)=>{C.listen(k,F=>{try{O(F)}catch(z){setTimeout(()=>{throw z},0)}})};return S(h,ru.EventType.OPEN,()=>{g||(re(Nn,`RPC '${e}' stream ${i} transport opened.`),v.s_())}),S(h,ru.EventType.CLOSE,()=>{g||(g=!0,re(Nn,`RPC '${e}' stream ${i} transport closed`),v.__(),this.I_(h))}),S(h,ru.EventType.ERROR,C=>{g||(g=!0,Uo(Nn,`RPC '${e}' stream ${i} transport errored. Name:`,C.name,"Message:",C.message),v.__(new ee(B.UNAVAILABLE,"The operation could not be completed")))}),S(h,ru.EventType.MESSAGE,C=>{var k;if(!g){let O=C.data[0];Xe(!!O,16349);let F=O,z=F?.error||((k=F[0])===null||k===void 0?void 0:k.error);if(z){re(Nn,`RPC '${e}' stream ${i} received error:`,z);let W=z.status,K=(function(E){let w=Ht[E];if(w!==void 0)return WV(w)})(W),I=z.message;K===void 0&&(K=B.INTERNAL,I="Unknown error status: "+W+" with message "+z.message),g=!0,v.__(new ee(K,I)),h.close()}else re(Nn,`RPC '${e}' stream ${i} received:`,O),v.a_(O)}}),S(a,xD.STAT_EVENT,C=>{C.stat===d_.PROXY?re(Nn,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===d_.NOPROXY&&re(Nn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.o_()},0),v}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function PD(){return typeof document<"u"?document:null}function iv(t){return new gC(t,!0)}var F_=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var UL="PersistentStream",L_=class{constructor(e,n,r,i,s,o,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new F_(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(ks(n.toString()),ks("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new ee(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return re(UL,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(re(UL,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},YC=class extends L_{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=VQ(this.serializer,e),r=(function(s){if(!("targetChange"in s))return De.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?De.min():o.readTime?Wi(o.readTime):De.min()})(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=vC(this.serializer),n.addTarget=(function(s,o){let a,c=o.target;if(a=rC(c)?{documents:UQ(s,c)}:{query:HQ(s,c).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=qV(s,o.resumeToken);let l=mC(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(De.min())>0){a.readTime=R_(s,o.snapshotVersion.toTimestamp());let l=mC(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=zQ(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=vC(this.serializer),n.removeTarget=e,this.k_(n)}},QC=class extends L_{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=BQ(e.writeResults,e.commitTime),r=Wi(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=vC(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>jQ(this.serializer,r))};this.k_(n)}};var ZC=class{},XC=class extends ZC{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new ee(B.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,yC(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ee(B.UNKNOWN,s.toString())})}Jo(e,n,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,yC(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee(B.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},JC=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ks(n),this._a=!1):re("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var vc="RemoteStore",eS=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{Ec(this)&&(re(vc,"Restarting streams for network reachability change."),await(async function(c){let l=Ie(c);l.Ia.add(4),await Of(l),l.Aa.set("Unknown"),l.Ia.delete(4),await sv(l)})(this))})}),this.Aa=new JC(r,i)}};async function sv(t){if(Ec(t))for(let e of t.da)await e(!0)}async function Of(t){for(let e of t.da)await e(!1)}function n2(t,e){let n=Ie(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),VS(n)?LS(n):Su(n).x_()&&FS(n,e))}function OS(t,e){let n=Ie(t),r=Su(n);n.Ta.delete(e),r.x_()&&r2(n,e),n.Ta.size===0&&(r.x_()?r.B_():Ec(n)&&n.Aa.set("Unknown"))}function FS(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Su(t).H_(e)}function r2(t,e){t.Ra.$e(e),Su(t).Y_(e)}function LS(t){t.Ra=new pC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Su(t).start(),t.Aa.aa()}function VS(t){return Ec(t)&&!Su(t).M_()&&t.Ta.size>0}function Ec(t){return Ie(t).Ia.size===0}function i2(t){t.Ra=void 0}async function aZ(t){t.Aa.set("Online")}async function cZ(t){t.Ta.forEach((e,n)=>{FS(t,e)})}async function lZ(t,e){i2(t),VS(t)?(t.Aa.la(e),LS(t)):t.Aa.set("Unknown")}async function uZ(t,e,n){if(t.Aa.set("Online"),e instanceof A_&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))})(t,e)}catch(r){re(vc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await V_(t,r)}else if(e instanceof lu?t.Ra.Ye(e):e instanceof S_?t.Ra.it(e):t.Ra.et(e),!n.isEqual(De.min()))try{let r=await t2(t.localStore);n.compareTo(r)>=0&&await(function(s,o){let a=s.Ra.Pt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.Ta.get(l);d&&s.Ta.set(l,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let d=s.Ta.get(c);if(!d)return;s.Ta.set(c,d.withResumeToken(kn.EMPTY_BYTE_STRING,d.snapshotVersion)),r2(s,c);let h=new Rf(d.target,c,l,d.sequenceNumber);FS(s,h)}),s.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){re(vc,"Failed to raise snapshot:",r),await V_(t,r)}}async function V_(t,e,n){if(!Cu(e))throw e;t.Ia.add(1),await Of(t),t.Aa.set("Offline"),n||(n=()=>t2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re(vc,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await sv(t)})}function s2(t,e){return e().catch(n=>V_(t,n,e))}async function ov(t){let e=Ie(t),n=zo(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:TS;for(;dZ(e);)try{let i=await rZ(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,hZ(e,i)}catch(i){await V_(e,i)}o2(e)&&a2(e)}function dZ(t){return Ec(t)&&t.Pa.length<10}function hZ(t,e){t.Pa.push(e);let n=zo(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function o2(t){return Ec(t)&&!zo(t).M_()&&t.Pa.length>0}function a2(t){zo(t).start()}async function fZ(t){zo(t).na()}async function pZ(t){let e=zo(t);for(let n of t.Pa)e.X_(n.mutations)}async function gZ(t,e,n){let r=t.Pa.shift(),i=uC.from(r,e,n);await s2(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await ov(t)}async function mZ(t,e){e&&zo(t).Z_&&await(async function(r,i){if((function(o){return MQ(o)&&o!==B.ABORTED})(i.code)){let s=r.Pa.shift();zo(r).N_(),await s2(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await ov(r)}})(t,e),o2(t)&&a2(t)}async function HL(t,e){let n=Ie(t);n.asyncQueue.verifyOperationInProgress(),re(vc,"RemoteStore received new credentials");let r=Ec(n);n.Ia.add(3),await Of(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await sv(n)}async function yZ(t,e){let n=Ie(t);e?(n.Ia.delete(2),await sv(n)):e||(n.Ia.add(2),await Of(n),n.Aa.set("Unknown"))}function Su(t){return t.Va||(t.Va=(function(n,r,i){let s=Ie(n);return s.ia(),new YC(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Zo:aZ.bind(null,t),e_:cZ.bind(null,t),n_:lZ.bind(null,t),J_:uZ.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),VS(t)?LS(t):t.Aa.set("Unknown")):(await t.Va.stop(),i2(t))})),t.Va}function zo(t){return t.ma||(t.ma=(function(n,r,i){let s=Ie(n);return s.ia(),new QC(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:fZ.bind(null,t),n_:mZ.bind(null,t),ea:pZ.bind(null,t),ta:gZ.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await ov(t)):(await t.ma.stop(),t.Pa.length>0&&(re(vc,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}var tS=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function jS(t,e){if(ks("AsyncQueue",`${e}: ${t}`),Cu(t))return new ee(B.UNAVAILABLE,`${e}: ${t}`);throw t}var j_=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||fe.comparator(n.key,r.key):(n,r)=>fe.comparator(n.key,r.key),this.keyedMap=_f(),this.sortedSet=new Ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var B_=class{constructor(){this.fa=new Ct(fe.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):me(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},bu=class t{constructor(e,n,r,i,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,j_.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var nS=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},rS=class{constructor(){this.queries=$L(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=Ie(n),s=i.queries;i.queries=$L(),s.forEach((o,a)=>{for(let c of a.wa)c.onError(r)})})(this,new ee(B.ABORTED,"Firestore shutting down"))}};function $L(){return new Fs(t=>kV(t),nv)}async function c2(t,e){let n=Ie(t),r=3,i=e.query,s=n.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new nS,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await n.onListen(i,!0);break;case 1:s.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){let a=jS(o,`Initialization of query '${su(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.wa.push(e),e.va(n.onlineState),s.ya&&e.Ca(s.ya)&&BS(n)}async function l2(t,e){let n=Ie(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _Z(t,e){let n=Ie(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&BS(n)}function vZ(t,e,n){let r=Ie(t),i=r.queries.get(e);if(i)for(let s of i.wa)s.onError(n);r.queries.delete(e)}function BS(t){t.Da.forEach(e=>{e.next()})}var iS,zL;(zL=iS||(iS={})).Fa="default",zL.Cache="cache";var U_=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new bu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=bu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==iS.Cache}};var H_=class{constructor(e){this.key=e}},$_=class{constructor(e){this.key=e}},sS=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ue(),this.mutatedKeys=Ue(),this.Xa=PV(e),this.eu=new j_(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new B_,i=n?n.eu:this.eu,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{let p=i.get(d),g=rv(this.query,h)?h:null,v=!!p&&this.mutatedKeys.has(p.key),S=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations),C=!1;p&&g?p.data.isEqual(g.data)?v!==S&&(r.track({type:3,doc:g}),C=!0):this.iu(p,g)||(r.track({type:2,doc:g}),C=!0,(c&&this.Xa(g,c)>0||l&&this.Xa(g,l)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),C=!0):p&&!g&&(r.track({type:1,doc:p}),C=!0,(c||l)&&(a=!0)),C&&(g?(o=o.add(g),s=S?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let o=e.ru.pa();o.sort((d,h)=>(function(g,v){let S=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{At:C})}};return S(g)-S(v)})(d.type,h.type)||this.Xa(d.doc,h.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,l=c!==this.Ya;return this.Ya=c,o.length!==0||l?{snapshot:new bu(this.query,e.eu,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new B_,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Ue(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new $_(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new H_(r))}),n}uu(e){this.Ha=e.qs,this.Za=Ue();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return bu.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},US="SyncEngine",oS=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},aS=class{constructor(e){this.key=e,this.lu=!1}},cS=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Fs(a=>kV(a),nv),this.Tu=new Map,this.Iu=new Set,this.du=new Ct(fe.comparator),this.Eu=new Map,this.Au=new Nf,this.Ru={},this.Vu=new Map,this.mu=Mf.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function bZ(t,e,n=!0){let r=g2(t),i,s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await u2(r,e,n,!0),i}async function EZ(t,e){let n=g2(t);await u2(n,e,!0,!1)}async function u2(t,e,n,r){let i=await iZ(t.localStore,$i(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n),a;return r&&(a=await wZ(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&n2(t.remoteStore,i),a}async function wZ(t,e,n,r,i){t.gu=(h,p,g)=>(async function(S,C,k,O){let F=C.view.nu(k);F.Ds&&(F=await jL(S.localStore,C.query,!1).then(({documents:I})=>C.view.nu(I,F)));let z=O&&O.targetChanges.get(C.targetId),W=O&&O.targetMismatches.get(C.targetId)!=null,K=C.view.applyChanges(F,S.isPrimaryClient,z,W);return qL(S,C.targetId,K._u),K.snapshot})(t,h,p,g);let s=await jL(t.localStore,e,!0),o=new sS(e,s.qs),a=o.nu(s.documents),c=xf.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);qL(t,n,l._u);let d=new oS(e,n,o);return t.Pu.set(e,d),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot}async function IZ(t,e,n){let r=Ie(t),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!nv(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await HC(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&OS(r.remoteStore,i.targetId),lS(r,i.targetId)}).catch(Du)):(lS(r,i.targetId),await HC(r.localStore,i.targetId,!0))}async function TZ(t,e){let n=Ie(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),OS(n.remoteStore,r.targetId))}async function DZ(t,e,n){let r=NZ(t);try{let i=await(function(o,a){let c=Ie(o),l=qt.now(),d=a.reduce((g,v)=>g.add(v.key),Ue()),h,p;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=Ls(),S=Ue();return c.Os.getEntries(g,d).next(C=>{v=C,v.forEach((k,O)=>{O.isValidDocument()||(S=S.add(k))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,v)).next(C=>{h=C;let k=[];for(let O of a){let F=RQ(O,h.get(O.key).overlayedDocument);F!=null&&k.push(new Gi(O.key,F,CV(F.value.mapValue),zi.exists(!0)))}return c.mutationQueue.addMutationBatch(g,l,k,a)}).next(C=>{p=C;let k=C.applyToLocalDocumentSet(h,S);return c.documentOverlayCache.saveOverlays(g,C.batchId,k)})}).then(()=>({batchId:p.batchId,changes:FV(h)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let l=o.Ru[o.currentUser.toKey()];l||(l=new Ct(Ne)),l=l.insert(a,c),o.Ru[o.currentUser.toKey()]=l})(r,i.batchId,n),await Ff(r,i.changes),await ov(r.remoteStore)}catch(i){let s=jS(i,"Failed to persist write");n.reject(s)}}async function d2(t,e){let n=Ie(t);try{let r=await tZ(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Eu.get(s);o&&(Xe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?Xe(o.lu,14607):i.removedDocuments.size>0&&(Xe(o.lu,42227),o.lu=!1))}),await Ff(n,r,e)}catch(r){await Du(r)}}function WL(t,e,n){let r=Ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=Ie(o);c.onlineState=a;let l=!1;c.queries.forEach((d,h)=>{for(let p of h.wa)p.va(a)&&(l=!0)}),l&&BS(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function CZ(t,e,n){let r=Ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),s=i&&i.key;if(s){let o=new Ct(fe.comparator);o=o.insert(s,li.newNoDocument(s,De.min()));let a=Ue().add(s),c=new C_(De.min(),new Map,new Ct(Ne),o,a);await d2(r,c),r.du=r.du.remove(s),r.Eu.delete(e),HS(r)}else await HC(r.localStore,e,!1).then(()=>lS(r,e,n)).catch(Du)}async function SZ(t,e){let n=Ie(t),r=e.batch.batchId;try{let i=await eZ(n.localStore,e);f2(n,r,null),h2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ff(n,i)}catch(i){await Du(i)}}async function AZ(t,e,n){let r=Ie(t);try{let i=await(function(o,a){let c=Ie(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(h=>(Xe(h!==null,37113),d=h.keys(),c.mutationQueue.removeMutationBatch(l,h))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})})(r.localStore,e);f2(r,e,n),h2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ff(r,i)}catch(i){await Du(i)}}function h2(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function f2(t,e,n){let r=Ie(t),i=r.Ru[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function lS(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||p2(t,r)})}function p2(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(OS(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),HS(t))}function qL(t,e,n){for(let r of n)r instanceof H_?(t.Au.addReference(r.key,e),xZ(t,r)):r instanceof $_?(re(US,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||p2(t,r.key)):me(19791,{yu:r})}function xZ(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(re(US,"New document in limbo: "+n),t.Iu.add(r),HS(t))}function HS(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new fe(mt.fromString(e)),r=t.mu.next();t.Eu.set(r,new aS(n)),t.du=t.du.insert(n,r),n2(t.remoteStore,new Rf($i(MS(n.path)),r,"TargetPurposeLimboResolution",IS.ue))}}async function Ff(t,e,n){let r=Ie(t),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{o.push(r.gu(c,e,n).then(l=>{var d;if((l||n)&&r.isPrimaryClient){let h=l?!l.fromCache:(d=n?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(l){i.push(l);let h=VC.Es(c.targetId,l);s.push(h)}}))}),await Promise.all(o),r.hu.J_(i),await(async function(c,l){let d=Ie(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>U.forEach(l,p=>U.forEach(p.Is,g=>d.persistence.referenceDelegate.addReference(h,p.targetId,g)).next(()=>U.forEach(p.ds,g=>d.persistence.referenceDelegate.removeReference(h,p.targetId,g)))))}catch(h){if(!Cu(h))throw h;re(PS,"Failed to update sequence numbers: "+h)}for(let h of l){let p=h.targetId;if(!h.fromCache){let g=d.Fs.get(p),v=g.snapshotVersion,S=g.withLastLimboFreeSnapshotVersion(v);d.Fs=d.Fs.insert(p,S)}}})(r.localStore,s))}async function RZ(t,e){let n=Ie(t);if(!n.currentUser.isEqual(e)){re(US,"User change. New user:",e.toKey());let r=await e2(n.localStore,e);n.currentUser=e,(function(s,o){s.Vu.forEach(a=>{a.forEach(c=>{c.reject(new ee(B.CANCELLED,o))})}),s.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ff(n,r.Bs)}}function MZ(t,e){let n=Ie(t),r=n.Eu.get(e);if(r&&r.lu)return Ue().add(r.key);{let i=Ue(),s=n.Tu.get(e);if(!s)return i;for(let o of s){let a=n.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function g2(t){let e=Ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=d2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MZ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CZ.bind(null,e),e.hu.J_=_Z.bind(null,e.eventManager),e.hu.pu=vZ.bind(null,e.eventManager),e}function NZ(t){let e=Ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SZ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AZ.bind(null,e),e}var m2=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(n){this.serializer=iv(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),await this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)}Cu(n,r){return null}Fu(n,r){return null}vu(n){return JQ(this.persistence,new BC,n.initialUser,this.serializer)}Du(n){return new N_(LC.Vi,this.serializer)}bu(n){return new $C}async terminate(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return t.provider={build:()=>new t},t})(),uS=class extends m2{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Xe(this.persistence.referenceDelegate instanceof k_,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new TC(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?Or.withCacheSize(this.cacheSizeBytes):Or.DEFAULT;return new N_(r=>k_.Vi(r,n),this.serializer)}};var kZ=(()=>{class t{async initialize(n,r){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>WL(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=RZ.bind(null,this.syncEngine),await yZ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(n){return(function(){return new rS})()}createDatastore(n){let r=iv(n.databaseInfo.databaseId),i=(function(o){return new KC(o)})(n.databaseInfo);return(function(o,a,c,l){return new XC(o,a,c,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,s,o,a,c){return new eS(i,s,o,a,c)})(this.localStore,this.datastore,n.asyncQueue,r=>WL(this.syncEngine,r,0),(function(){return O_.C()?new O_:new zC})())}createSyncEngine(n,r){return(function(s,o,a,c,l,d,h){let p=new cS(s,o,a,c,l,d);return h&&(p.fu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}async terminate(){var n,r;await(async function(s){let o=Ie(s);re(vc,"RemoteStore shutting down."),o.Ia.add(5),await Of(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return t.provider={build:()=>new t},t})();var z_=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ks("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Wo="FirestoreClient",dS=class{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=hn.UNAUTHENTICATED,this.clientId=If.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{re(Wo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(re(Wo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=jS(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function OD(t,e){t.asyncQueue.verifyOperationInProgress(),re(Wo,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await e2(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Uo("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{re("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Uo("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function GL(t,e){t.asyncQueue.verifyOperationInProgress();let n=await PZ(t);re(Wo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>HL(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>HL(e.remoteStore,i)),t._onlineComponents=e}async function PZ(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re(Wo,"Using user provided OfflineComponentProvider");try{await OD(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===B.FAILED_PRECONDITION||i.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Uo("Error using user provided cache. Falling back to memory cache: "+n),await OD(t,new m2)}}else re(Wo,"Using default OfflineComponentProvider"),await OD(t,new uS(void 0));return t._offlineComponents}async function y2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re(Wo,"Using user provided OnlineComponentProvider"),await GL(t,t._uninitializedComponentsProvider._online)):(re(Wo,"Using default OnlineComponentProvider"),await GL(t,new kZ))),t._onlineComponents}function OZ(t){return y2(t).then(e=>e.syncEngine)}async function _2(t){let e=await y2(t),n=e.eventManager;return n.onListen=bZ.bind(null,e.syncEngine),n.onUnlisten=IZ.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=EZ.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=TZ.bind(null,e.syncEngine),n}function FZ(t,e,n={}){let r=new ai;return t.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,l){let d=new z_({next:p=>{d.Ou(),o.enqueueAndForget(()=>l2(s,h));let g=p.docs.has(a);!g&&p.fromCache?l.reject(new ee(B.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&c&&c.source==="server"?l.reject(new ee(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(p)},error:p=>l.reject(p)}),h=new U_(MS(a.path),d,{includeMetadataChanges:!0,ka:!0});return c2(s,h)})(await _2(t),t.asyncQueue,e,n,r)),r.promise}function LZ(t,e,n={}){let r=new ai;return t.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,l){let d=new z_({next:p=>{d.Ou(),o.enqueueAndForget(()=>l2(s,h)),p.fromCache&&c.source==="server"?l.reject(new ee(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(p)},error:p=>l.reject(p)}),h=new U_(a,d,{includeMetadataChanges:!0,ka:!0});return c2(s,h)})(await _2(t),t.asyncQueue,e,n,r)),r.promise}function v2(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var KL=new Map;var b2="firestore.googleapis.com",YL=!0,W_=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=b2,this.ssl=YL}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:YL;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=JV;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<QQ)throw new ee(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KY("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=v2((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ee(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ee(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ee(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Eu=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new W_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new W_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new FD;switch(r.type){case"firstParty":return new BD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=KL.get(n);r&&(re("ComponentProvider","Removing Datastore"),KL.delete(n),r.terminate())})(this),Promise.resolve()}};function E2(t,e,n,r={}){var i;t=ci(t,Eu);let s=ri(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;s&&(zl(`https://${c}`),Wl("Firestore",!0)),o.host!==b2&&o.host!==c&&Uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!ki(l,a)&&(t._setSettings(l),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=hn.MOCK_USER;else{d=Ny(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new ee(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new hn(p)}t._authCredentials=new LD(new __(d,h))}}var bc=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},pn=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Pf(n,t._jsonSchema))return new t(e,r||null,new fe(mt.fromString(n.referencePath)))}};pn._jsonSchemaVersion="firestore/documentReference/1.0",pn._jsonSchema={type:Wt("string",pn._jsonSchemaVersion),referencePath:Wt("string")};var Lo=class t extends bc{constructor(e,n,r){super(e,n,MS(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new fe(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function w2(t,e,...n){if(t=ot(t),nV("collection","path",e),t instanceof Eu){let r=mt.fromString(e,...n);return fL(r),new Lo(t,null,r)}{if(!(t instanceof pn||t instanceof Lo))throw new ee(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(mt.fromString(e,...n));return fL(r),new Lo(t.firestore,null,r)}}function $S(t,e,...n){if(t=ot(t),arguments.length===1&&(e=If.newId()),nV("doc","path",e),t instanceof Eu){let r=mt.fromString(e,...n);return hL(r),new pn(t,null,new fe(r))}{if(!(t instanceof pn||t instanceof Lo))throw new ee(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(mt.fromString(e,...n));return hL(r),new pn(t.firestore,t instanceof Lo?t.converter:null,new fe(r))}}var QL="AsyncQueue",q_=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new F_(this,"async_queue_retry"),this.oc=()=>{let r=PD();r&&re(QL,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=PD();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=PD();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new ai;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Cu(e))throw e;re(QL,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,ks("INTERNAL UNHANDLED ERROR: ",ZL(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=tS.createAndSchedule(this,e,n,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&me(47125,{hc:ZL(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function ZL(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var Vs=class extends Eu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new q_,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new q_(e),this._firestoreClient=void 0,await e}}};function I2(t,e){let n=typeof t=="object"?t:Li(),r=typeof t=="string"?t:e||I_,i=Fi(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=My("firestore");s&&E2(i,...s)}return i}function zS(t){if(t._terminated)throw new ee(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||VZ(t),t._firestoreClient}function VZ(t){var e,n,r;let i=t._freezeSettings(),s=(function(a,c,l,d){return new WD(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,v2(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new dS(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(t._componentsProvider))}var Vo=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(kn.fromBase64String(e))}catch(n){throw new ee(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Pf(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};Vo._jsonSchemaVersion="firestore/bytes/1.0",Vo._jsonSchema={type:Wt("string",Vo._jsonSchemaVersion),bytes:Wt("string")};var wu=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _r(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Iu=class{constructor(e){this._methodName=e}};var jo=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(Pf(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};jo._jsonSchemaVersion="firestore/geoPoint/1.0",jo._jsonSchema={type:Wt("string",jo._jsonSchemaVersion),latitude:Wt("number"),longitude:Wt("number")};var Bo=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Pf(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new ee(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Bo._jsonSchemaVersion="firestore/vectorValue/1.0",Bo._jsonSchema={type:Wt("string",Bo._jsonSchemaVersion),vectorValues:Wt("object")};var jZ=/^__.*__$/,hS=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Gi(e,this.data,this.fieldMask,n,this.fieldTransforms):new _c(e,this.data,n,this.fieldTransforms)}},G_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Gi(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function T2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{Ec:t})}}var fS=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Y_(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(T2(this.Ec)&&jZ.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},pS=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||iv(e)}Dc(e,n,r,i=!1){return new fS({Ec:e,methodName:n,bc:r,path:_r.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function av(t){let e=t._freezeSettings(),n=iv(t._databaseId);return new pS(t._databaseId,!!e.ignoreUndefinedProperties,n)}function D2(t,e,n,r,i,s={}){let o=t.Dc(s.merge||s.mergeFields?2:0,e,n,i);WS("Data must be an object, but it was:",o,r);let a=C2(r,o),c,l;if(s.merge)c=new Fr(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let h of s.mergeFields){let p=mS(e,h,n);if(!o.contains(p))throw new ee(B.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);A2(d,p)||d.push(p)}c=new Fr(d),l=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=o.fieldTransforms;return new hS(new yr(a),c,l)}var K_=class t extends Iu{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};var gS=class t extends Iu{_toFieldTransform(e){return new oC(e.path,new gc)}isEqual(e){return e instanceof t}};function BZ(t,e,n,r){let i=t.Dc(1,e,n);WS("Data must be an object, but it was:",i,r);let s=[],o=yr.empty();qo(r,(c,l)=>{let d=qS(e,c,n);l=ot(l);let h=i.gc(d);if(l instanceof K_)s.push(d);else{let p=Lf(l,h);p!=null&&(s.push(d),o.set(d,p))}});let a=new Fr(s);return new G_(o,a,i.fieldTransforms)}function UZ(t,e,n,r,i,s){let o=t.Dc(1,e,n),a=[mS(e,r,n)],c=[i];if(s.length%2!=0)throw new ee(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(mS(e,s[p])),c.push(s[p+1]);let l=[],d=yr.empty();for(let p=a.length-1;p>=0;--p)if(!A2(l,a[p])){let g=a[p],v=c[p];v=ot(v);let S=o.gc(g);if(v instanceof K_)l.push(g);else{let C=Lf(v,S);C!=null&&(l.push(g),d.set(g,C))}}let h=new Fr(l);return new G_(d,h,o.fieldTransforms)}function HZ(t,e,n,r=!1){return Lf(n,t.Dc(r?4:3,e))}function Lf(t,e){if(S2(t=ot(t)))return WS("Unsupported field value:",e,t),C2(t,e);if(t instanceof Iu)return(function(r,i){if(!T2(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=Lf(a,i.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(t,e)}return(function(r,i){if((r=ot(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return DQ(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=qt.fromDate(r);return{timestampValue:R_(i.serializer,s)}}if(r instanceof qt){let s=new qt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:R_(i.serializer,s)}}if(r instanceof jo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vo)return{bytesValue:qV(i.serializer,r._byteString)};if(r instanceof pn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:kS(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Bo)return(function(o,a){return{mapValue:{fields:{[CS]:{stringValue:SS},[fu]:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return NS(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${J_(r)}`)})(t,e)}function C2(t,e){let n={};return _V(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qo(t,(r,i)=>{let s=Lf(i,e.Vc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function S2(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qt||t instanceof jo||t instanceof Vo||t instanceof pn||t instanceof Iu||t instanceof Bo)}function WS(t,e,n){if(!S2(n)||!rV(n)){let r=J_(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function mS(t,e,n){if((e=ot(e))instanceof wu)return e._internalPath;if(typeof e=="string")return qS(t,e);throw Y_("Field path arguments must be of type string or ",t,!1,void 0,n)}var $Z=new RegExp("[~\\*/\\[\\]]");function qS(t,e,n){if(e.search($Z)>=0)throw Y_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new wu(...e.split("."))._internalPath}catch{throw Y_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Y_(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new ee(B.INVALID_ARGUMENT,a+t+c)}function A2(t,e){return t.some(n=>n.isEqual(e))}var Q_=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new yS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(GS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},yS=class extends Q_{data(){return super.data()}};function GS(t,e){return typeof e=="string"?qS(t,e):e instanceof wu?e._internalPath:e._delegate._internalPath}function zZ(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ee(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var kf=class{},Z_=class extends kf{};function x2(t,e,...n){let r=[];e instanceof kf&&r.push(e),r=r.concat(n),(function(s){let o=s.filter(c=>c instanceof vS).length,a=s.filter(c=>c instanceof _S).length;if(o>1||o>0&&a>0)throw new ee(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)t=i._apply(t);return t}var _S=class t extends Z_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return M2(e._query,n),new bc(e.firestore,e.converter,iC(e._query,n))}_parse(e){let n=av(e.firestore);return(function(s,o,a,c,l,d,h){let p;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ee(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){JL(h,d);let v=[];for(let S of h)v.push(XL(c,s,S));p={arrayValue:{values:v}}}else p=XL(c,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||JL(h,d),p=HZ(a,o,h,d==="in"||d==="not-in");return zt.create(l,d,p)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};var vS=class t extends kf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ui.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:((function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)M2(o,c),o=iC(o,c)})(e._query,n),new bc(e.firestore,e.converter,iC(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var bS=class t extends Z_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=(function(i,s,o){if(i.startAt!==null)throw new ee(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ee(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pc(s,o)})(e._query,this._field,this._direction);return new bc(e.firestore,e.converter,(function(i,s){let o=i.explicitOrderBy.concat([s]);return new $o(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}};function R2(t,e="asc"){let n=e,r=GS("orderBy",t);return bS._create(r,n)}function XL(t,e,n){if(typeof(n=ot(n))=="string"){if(n==="")throw new ee(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!NV(e)&&n.indexOf("/")!==-1)throw new ee(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(mt.fromString(n));if(!fe.isDocumentKey(r))throw new ee(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return bL(t,new fe(r))}if(n instanceof pn)return bL(t,n._key);throw new ee(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${J_(n)}.`)}function JL(t,e){if(!Array.isArray(t)||t.length===0)throw new ee(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function M2(t,e){let n=(function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ee(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var ES=class{convertValue(e,n="none"){switch(Ho(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return qo(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[fu].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>gt(o.doubleValue));return new Bo(s)}convertGeoPoint(e){return new jo(gt(e.latitude),gt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=tv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Cf(e));default:return null}}convertTimestamp(e){let n=Ps(e);return new qt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=mt.fromString(e);Xe(XV(r),9688,{name:e});let i=new T_(r.get(1),r.get(3)),s=new fe(r.popFirst(5));return i.isEqual(n)||ks(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function N2(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var uc=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},dc=class t extends Q_{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new uu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(GS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};dc._jsonSchemaVersion="firestore/documentSnapshot/1.0",dc._jsonSchema={type:Wt("string",dc._jsonSchemaVersion),bundleSource:Wt("string","DocumentSnapshot"),bundleName:Wt("string"),bundle:Wt("string")};var uu=class extends dc{data(e={}){return super.data(e)}},du=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new uc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new uu(this._firestore,this._userDataWriter,r.key,r,new uc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new uu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new uc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new uu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new uc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:WZ(a.type),doc:c,oldIndex:l,newIndex:d}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=If.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function WZ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:t})}}function k2(t){t=ci(t,pn);let e=ci(t.firestore,Vs);return FZ(zS(e),t._key).then(n=>qZ(e,t,n))}du._jsonSchemaVersion="firestore/querySnapshot/1.0",du._jsonSchema={type:Wt("string",du._jsonSchemaVersion),bundleSource:Wt("string","QuerySnapshot"),bundleName:Wt("string"),bundle:Wt("string")};var X_=class extends ES{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vo(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,n)}};function P2(t){t=ci(t,bc);let e=ci(t.firestore,Vs),n=zS(e),r=new X_(e);return zZ(t._query),LZ(n,t._query).then(i=>new du(e,r,t,i))}function O2(t,e,n){t=ci(t,pn);let r=ci(t.firestore,Vs),i=N2(t.converter,e,n);return cv(r,[D2(av(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,zi.none())])}function F2(t,e,n,...r){t=ci(t,pn);let i=ci(t.firestore,Vs),s=av(i),o;return o=typeof(e=ot(e))=="string"||e instanceof wu?UZ(s,"updateDoc",t._key,e,n,r):BZ(s,"updateDoc",t._key,e),cv(i,[o.toMutation(t._key,zi.exists(!0))])}function L2(t){return cv(ci(t.firestore,Vs),[new Af(t._key,zi.none())])}function V2(t,e){let n=ci(t.firestore,Vs),r=$S(t),i=N2(t.converter,e);return cv(n,[D2(av(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,zi.exists(!1))]).then(()=>r)}function cv(t,e){return(function(r,i){let s=new ai;return r.asyncQueue.enqueueAndForget(async()=>DZ(await OZ(r),i,s)),s.promise})(zS(t),e)}function qZ(t,e,n){let r=n.docs.get(e._key),i=new X_(t);return new dc(t,i,e._key,r,new uc(n.hasPendingWrites,n.fromCache),e.converter)}function js(){return new gS("serverTimestamp")}(function(e,n=!0){(function(i){Tu=i})(mr),Mn(new Jt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Vs(new VD(r.getProvider("auth-internal")),new UD(o,r.getProvider("app-check-internal")),(function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new ee(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new T_(l.options.projectId,d)})(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ze(cL,lL,e),ze(cL,lL,"esm2017")})();var bn=class{constructor(e){return e}},j2="firestore",KS=class{constructor(){return Ro(j2)}};var YS=new te("angularfire2.firestore-instances");function GZ(t,e){let n=nc(j2,t,e);return n&&new bn(n)}function KZ(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new bn(r)}}var YZ={provide:KS,deps:[[new Qt,YS]]},QZ={provide:bn,useFactory:GZ,deps:[[new Qt,YS],ii]};function B2(t,...e){return ze("angularfire",Vi.full,"fst"),lr([QZ,YZ,{provide:YS,useFactory:KZ(t),multi:!0,deps:[Le,ft,ji,Ss,[new Qt,ac],[new Qt,No],...e]}])}var lv=at(V2,!0,2);var di=at(w2,!0,2);var Bs=at(L2,!0,2);var tn=at($S,!0,2);var Go=at(k2,!0);var Us=at(P2,!0);var U2=at(I2,!0);var wc=at(R2,!0,2),Hs=at(x2,!0,2);var Au=at(O2,!0,2);var uv=at(F2,!0,2);var Ru=class t{constructor(e,n,r,i,s){this.auth=e;this.firestore=n;this.router=r;this.ngZone=i;this.platformId=s;wl(this.platformId)&&this.initializeAuth()}userSource=new It(null);user$=this.userSource.asObservable();userRoleSource=new It("viewer");userRole$=this.userRoleSource.asObservable();async signInWithGoogle(){console.log("Google sign-in initiated");try{let e=new pD;e.setCustomParameters({prompt:"select_account"});let n=await sL(this.auth,e);console.log("Google sign-in successful:",n.user),setTimeout(()=>{console.log("Fallback navigation to dashboard"),this.ngZone.run(()=>{this.router.navigate(["/dashboard"])})},2e3)}catch(e){throw this.handleAuthError(e),e}}handleAuthError(e){if(e instanceof Error){let n=e;if(console.error("Firebase Auth Error Code:",n.code),console.error("Firebase Auth Error Message:",n.message),wl(this.platformId))switch(n.code){case"auth/popup-blocked":alert("Popup was blocked. Please allow popups for this site and try again.");break;case"auth/popup-closed-by-user":console.log("User cancelled sign-in");break;default:alert("Google sign-in failed. Please try again.")}else console.warn("Authentication error (server-side):",n.message)}}async signOut(){if(wl(this.platformId))try{await l_(this.auth),this.ngZone.run(()=>{this.router.navigate(["/login"])})}catch(e){throw console.error("Error signing out:",e),e}}async initializeAuth(){Ui(this.auth,async e=>{this.ngZone.run(async()=>{if(this.userSource.next(e),e)try{let n=tn(this.firestore,"users",e.uid),r=await Promise.race([Go(n),new Promise((i,s)=>setTimeout(()=>s(new Error("Timeout")),5e3))]);if(r.exists()){let i=r.data().role||"viewer";this.userRoleSource.next(i),console.log("User role loaded:",i)}else await Au(n,{email:e.email,displayName:e.displayName,role:"viewer",createdAt:new Date}),this.userRoleSource.next("viewer"),console.log("New user document created");console.log("Navigating to dashboard..."),this.router.navigate(["/dashboard"])}catch(n){console.error("Firestore error:",n),this.userRoleSource.next("viewer"),this.router.navigate(["/dashboard"])}else this.userRoleSource.next("viewer"),console.log("User signed out")})})}static \u0275fac=function(n){return new(n||t)(ae(en),ae(bn),ae(Pt),ae(Le),ae(dr))};static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})};function H2(t){if(t instanceof Error)switch(t.code){case"auth/user-not-found":case"auth/wrong-password":return"Invalid email or password";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";case"auth/network-request-failed":return"Network error. Please check your connection.";case"auth/popup-blocked":return"Popup was blocked. Please allow popups and try again.";case"auth/popup-closed-by-user":return"Sign-in was cancelled.";default:return t.message}return"An unexpected error occurred"}var dv=class t{email="";password="";auth=j(en);authService=j(Ru);ngOnInit(){}async loginWithEmail(){try{await iL(this.auth,this.email,this.password)}catch(e){let n=H2(e);console.error("Login error:",e),alert(n)}}async signInWithGoogle(){console.log("Google sign-in button clicked");try{await this.authService.signInWithGoogle(),console.log("Google sign-in method completed")}catch(e){console.error("Google login error in component:",e)}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Bn({type:t,selectors:[["app-login"]],decls:21,vars:2,consts:[[1,"container","d-flex","justify-content-center","align-items-center","min-vh-100"],[1,"card","p-4","shadow","login-card"],[1,"text-center","mb-4"],[1,"mb-3"],["for","email",1,"form-label"],["name","email","type","email","id","email","placeholder","Enter email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["name","password","type","password","id","password","placeholder","Enter password","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-primary","w-100",3,"click"],[1,"text-center","my-3"],[1,"text-muted"],["type","button",1,"btn","btn-outline-danger","w-100",3,"click"],[1,"fab","fa-google","me-2"]],template:function(n,r){n&1&&(A(0,"div",0)(1,"div",1)(2,"h3",2),P(3,"Login to Festival Ledger"),x(),A(4,"form")(5,"div",3)(6,"label",4),P(7,"Email address"),x(),A(8,"input",5),Hn("ngModelChange",function(s){return Xn(r.email,s)||(r.email=s),s}),x()(),A(9,"div",3)(10,"label",6),P(11,"Password"),x(),A(12,"input",7),Hn("ngModelChange",function(s){return Xn(r.password,s)||(r.password=s),s}),x()(),A(13,"button",8),qe("click",function(){return r.loginWithEmail()}),P(14," Login "),x(),A(15,"div",9)(16,"span",10),P(17,"or"),x()(),A(18,"button",11),qe("click",function(){return r.signInWithGoogle()}),ne(19,"i",12),P(20," Sign in with Google "),x()()()()),n&2&&($(8),Un("ngModel",r.email),$(4),Un("ngModel",r.password))},dependencies:[Mr,$l,Ul,Ao,jl,Bl,Xa,Za,Qa],styles:[".login-card[_ngcontent-%COMP%]{width:100%;max-width:400px}"]})};function Bf(t){return t+.5|0}var Ko=(t,e,n)=>Math.max(Math.min(t,n),e);function Vf(t){return Ko(Bf(t*2.55),0,255)}function Yo(t){return Ko(Bf(t*255),0,255)}function $s(t){return Ko(Bf(t/2.55)/100,0,1)}function $2(t){return Ko(Bf(t*100),0,100)}var Lr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ZS=[..."0123456789ABCDEF"],XZ=t=>ZS[t&15],JZ=t=>ZS[(t&240)>>4]+ZS[t&15],hv=t=>(t&240)>>4===(t&15),eX=t=>hv(t.r)&&hv(t.g)&&hv(t.b)&&hv(t.a);function tX(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Lr[t[1]]*17,g:255&Lr[t[2]]*17,b:255&Lr[t[3]]*17,a:e===5?Lr[t[4]]*17:255}:(e===7||e===9)&&(n={r:Lr[t[1]]<<4|Lr[t[2]],g:Lr[t[3]]<<4|Lr[t[4]],b:Lr[t[5]]<<4|Lr[t[6]],a:e===9?Lr[t[7]]<<4|Lr[t[8]]:255})),n}var nX=(t,e)=>t<255?e(t):"";function rX(t){var e=eX(t)?XZ:JZ;return t?"#"+e(t.r)+e(t.g)+e(t.b)+nX(t.a,e):void 0}var iX=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function G2(t,e,n){let r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function sX(t,e,n){let r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function oX(t,e,n){let r=G2(t,1,.5),i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function aX(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function XS(t){let n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2,c,l,d;return s!==o&&(d=s-o,l=a>.5?d/(2-s-o):d/(s+o),c=aX(n,r,i,d,s),c=c*60+.5),[c|0,l||0,a]}function JS(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Yo)}function eA(t,e,n){return JS(G2,t,e,n)}function cX(t,e,n){return JS(oX,t,e,n)}function lX(t,e,n){return JS(sX,t,e,n)}function K2(t){return(t%360+360)%360}function uX(t){let e=iX.exec(t),n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Vf(+e[5]):Yo(+e[5]));let i=K2(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=cX(i,s,o):e[1]==="hsv"?r=lX(i,s,o):r=eA(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function dX(t,e){var n=XS(t);n[0]=K2(n[0]+e),n=eA(n),t.r=n[0],t.g=n[1],t.b=n[2]}function hX(t){if(!t)return;let e=XS(t),n=e[0],r=$2(e[1]),i=$2(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${$s(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}var z2={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},W2={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function fX(){let t={},e=Object.keys(W2),n=Object.keys(z2),r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,z2[s]);s=parseInt(W2[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}var fv;function pX(t){fv||(fv=fX(),fv.transparent=[0,0,0,0]);let e=fv[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var gX=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function mX(t){let e=gX.exec(t),n=255,r,i,s;if(e){if(e[7]!==r){let o=+e[7];n=e[8]?Vf(o):Ko(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Vf(r):Ko(r,0,255)),i=255&(e[4]?Vf(i):Ko(i,0,255)),s=255&(e[6]?Vf(s):Ko(s,0,255)),{r,g:i,b:s,a:n}}}function yX(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${$s(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}var QS=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Mu=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function _X(t,e,n){let r=Mu($s(t.r)),i=Mu($s(t.g)),s=Mu($s(t.b));return{r:Yo(QS(r+n*(Mu($s(e.r))-r))),g:Yo(QS(i+n*(Mu($s(e.g))-i))),b:Yo(QS(s+n*(Mu($s(e.b))-s))),a:t.a+n*(e.a-t.a)}}function pv(t,e,n){if(t){let r=XS(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=eA(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function Y2(t,e){return t&&Object.assign(e||{},t)}function q2(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Yo(t[3]))):(e=Y2(t,{r:0,g:0,b:0,a:1}),e.a=Yo(e.a)),e}function vX(t){return t.charAt(0)==="r"?mX(t):uX(t)}var jf=class t{constructor(e){if(e instanceof t)return e;let n=typeof e,r;n==="object"?r=q2(e):n==="string"&&(r=tX(e)||pX(e)||vX(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=Y2(this._rgb);return e&&(e.a=$s(e.a)),e}set rgb(e){this._rgb=q2(e)}rgbString(){return this._valid?yX(this._rgb):void 0}hexString(){return this._valid?rX(this._rgb):void 0}hslString(){return this._valid?hX(this._rgb):void 0}mix(e,n){if(e){let r=this.rgb,i=e.rgb,s,o=n===s?.5:n,a=2*o-1,c=r.a-i.a,l=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;s=1-l,r.r=255&l*r.r+s*i.r+.5,r.g=255&l*r.g+s*i.g+.5,r.b=255&l*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=_X(this._rgb,e._rgb,n)),this}clone(){return new t(this.rgb)}alpha(e){return this._rgb.a=Yo(e),this}clearer(e){let n=this._rgb;return n.a*=1-e,this}greyscale(){let e=this._rgb,n=Bf(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){let n=this._rgb;return n.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return pv(this._rgb,2,e),this}darken(e){return pv(this._rgb,2,-e),this}saturate(e){return pv(this._rgb,1,e),this}desaturate(e){return pv(this._rgb,1,-e),this}rotate(e){return dX(this._rgb,e),this}};var nj=(()=>{let t=0;return()=>t++})();function dt(t){return t==null}function At(t){if(Array.isArray&&Array.isArray(t))return!0;let e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ke(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function nn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function nr(t,e){return nn(t)?t:e}function St(t,e){return typeof t>"u"?e:t}var rj=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function vt(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function En(t,e,n,r){let i,s,o;if(At(t))if(s=t.length,r)for(i=s-1;i>=0;i--)e.call(n,t[i],i);else for(i=0;i<s;i++)e.call(n,t[i],i);else if(Ke(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function iA(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function _v(t){if(At(t))return t.map(_v);if(Ke(t)){let e=Object.create(null),n=Object.keys(t),r=n.length,i=0;for(;i<r;++i)e[n[i]]=_v(t[n[i]]);return e}return t}function ij(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function bX(t,e,n,r){if(!ij(t))return;let i=e[t],s=n[t];Ke(i)&&Ke(s)?ku(i,s,r):e[t]=_v(s)}function ku(t,e,n){let r=At(e)?e:[e],i=r.length;if(!Ke(t))return t;n=n||{};let s=n.merger||bX,o;for(let a=0;a<i;++a){if(o=r[a],!Ke(o))continue;let c=Object.keys(o);for(let l=0,d=c.length;l<d;++l)s(c[l],t,o,n)}return t}function Pu(t,e){return ku(t,e,{merger:EX})}function EX(t,e,n){if(!ij(t))return;let r=e[t],i=n[t];Ke(r)&&Ke(i)?Pu(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=_v(i))}var Q2={"":t=>t,x:t=>t.x,y:t=>t.y};function wX(t){let e=t.split("."),n=[],r="";for(let i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function IX(t){let e=wX(t);return n=>{for(let r of e){if(r==="")break;n=n&&n[r]}return n}}function $f(t,e){return(Q2[e]||(Q2[e]=IX(e)))(t)}function Ev(t){return t.charAt(0).toUpperCase()+t.slice(1)}var zf=t=>typeof t<"u",zs=t=>typeof t=="function",sA=(t,e)=>{if(t.size!==e.size)return!1;for(let n of t)if(!e.has(n))return!1;return!0};function sj(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}var Pn=Math.PI,Ki=2*Pn,qDe=Ki+Pn,vv=Number.POSITIVE_INFINITY,GDe=Pn/180,Yi=Pn/2,KDe=Pn/4,YDe=Pn*2/3,Ws=Math.log10,Wf=Math.sign;function qf(t,e,n){return Math.abs(t-e)<n}function oA(t){let e=Math.round(t);t=qf(t,e,t/1e3)?e:t;let n=Math.pow(10,Math.floor(Ws(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function oj(t){let e=[],n=Math.sqrt(t),r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function TX(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Gf(t){return!TX(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function aj(t,e){let n=Math.round(t);return n-e<=t&&n+e>=t}function aA(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function qs(t){return t*(Pn/180)}function wv(t){return t*(180/Pn)}function cA(t){if(!nn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function cj(t,e){let n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r),s=Math.atan2(r,n);return s<-.5*Pn&&(s+=Ki),{angle:s,distance:i}}function hi(t){return(t%Ki+Ki)%Ki}function lj(t,e,n,r){let i=hi(t),s=hi(e),o=hi(n),a=hi(s-i),c=hi(o-i),l=hi(i-s),d=hi(i-o);return i===s||i===o||r&&s===o||a>c&&l<d}function Qo(t,e,n){return Math.max(e,Math.min(n,t))}function uj(t){return Qo(t,-32768,32767)}function Iv(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}var Tv=(t,e,n,r)=>Iv(t,n,r?i=>{let s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),dj=(t,e,n)=>Iv(t,n,r=>t[r][e]>=n);function hj(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}var fj=["push","pop","shift","splice","unshift"];function pj(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),fj.forEach(n=>{let r="_onData"+Ev(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){let o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function lA(t,e){let n=t._chartjs;if(!n)return;let r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(fj.forEach(s=>{delete t[s]}),delete t._chartjs)}function gj(t){let e=new Set(t);return e.size===t.length?t:Array.from(e)}var uA=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function dA(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,uA.call(window,()=>{r=!1,t.apply(e,n)}))}}function mj(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}var yj=t=>t==="start"?"left":t==="end"?"right":"center",hA=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2;var gv=t=>t===0||t===1,Z2=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Ki/n)),X2=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Ki/n)+1,Nu={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Yi)+1,easeOutSine:t=>Math.sin(t*Yi),easeInOutSine:t=>-.5*(Math.cos(Pn*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>gv(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>gv(t)?t:Z2(t,.075,.3),easeOutElastic:t=>gv(t)?t:X2(t,.075,.3),easeInOutElastic(t){return gv(t)?t:t<.5?.5*Z2(t*2,.1125,.45):.5+.5*X2(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Nu.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Nu.easeInBounce(t*2)*.5:Nu.easeOutBounce(t*2-1)*.5+.5};function _j(t){if(t&&typeof t=="object"){let e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function fA(t){return _j(t)?t:new jf(t)}function tA(t){return _j(t)?t:new jf(t).saturate(.5).darken(.1).hexString()}var DX=["x","y","borderWidth","radius","tension"],CX=["color","borderColor","backgroundColor"];function SX(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:CX},numbers:{type:"number",properties:DX}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function AX(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var J2=new Map;function xX(t,e){e=e||{};let n=t+JSON.stringify(e),r=J2.get(n);return r||(r=new Intl.NumberFormat(t,e),J2.set(n,r)),r}function Dv(t,e,n){return xX(e,n).format(t)}var vj={values(t){return At(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";let r=this.chart.options.locale,i,s=t;if(n.length>1){let l=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(l<1e-4||l>1e15)&&(i="scientific"),s=RX(t,n)}let o=Ws(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),Dv(t,r,c)},logarithmic(t,e,n){if(t===0)return"0";let r=n[e].significand||t/Math.pow(10,Math.floor(Ws(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?vj.numeric.call(this,t,e,n):""}};function RX(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Kf={formatters:vj};function MX(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Kf.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var Zo=Object.create(null),Cv=Object.create(null);function Uf(t,e){if(!e)return t;let n=e.split(".");for(let r=0,i=n.length;r<i;++r){let s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function nA(t,e,n){return typeof e=="string"?ku(Uf(t,e),n):ku(Uf(t,""),e)}var rA=class{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>tA(i.backgroundColor),this.hoverBorderColor=(r,i)=>tA(i.borderColor),this.hoverColor=(r,i)=>tA(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return nA(this,e,n)}get(e){return Uf(this,e)}describe(e,n){return nA(Cv,e,n)}override(e,n){return nA(Zo,e,n)}route(e,n,r,i){let s=Uf(this,e),o=Uf(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){let c=this[a],l=o[i];return Ke(c)?Object.assign({},l,c):St(c,l)},set(c){this[a]=c}}})}apply(e){e.forEach(n=>n(this))}},yt=new rA({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[SX,AX,MX]);function NX(t){return!t||dt(t.size)||dt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Hf(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function bj(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0,a=n.length,c,l,d,h,p;for(c=0;c<a;c++)if(h=n[c],h!=null&&!At(h))o=Hf(t,i,s,o,h);else if(At(h))for(l=0,d=h.length;l<d;l++)p=h[l],p!=null&&!At(p)&&(o=Hf(t,i,s,o,p));t.restore();let g=s.length/2;if(g>n.length){for(c=0;c<g;c++)delete i[s[c]];s.splice(0,g)}return o}function Xo(t,e,n){let r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function pA(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Dc(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function gA(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function mA(t){t.restore()}function kX(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),dt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function PX(t,e,n,r,i){if(i.strikethrough||i.underline){let s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,c=n-s.actualBoundingBoxAscent,l=n+s.actualBoundingBoxDescent,d=i.strikethrough?(c+l)/2:l;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,d),t.lineTo(a,d),t.stroke()}}function OX(t,e){let n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Yf(t,e,n,r,i,s={}){let o=At(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="",c,l;for(t.save(),t.font=i.string,kX(t,s),c=0;c<o.length;++c)l=o[c],s.backdrop&&OX(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),dt(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(l,n,r,s.maxWidth)),t.fillText(l,n,r,s.maxWidth),PX(t,n,r,l,s),r+=Number(i.lineHeight);t.restore()}function Ej(t,e){let{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Pn,Pn,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Pn,Yi,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Yi,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-Yi,!0),t.lineTo(n+o.topLeft,r)}var FX=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,LX=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function VX(t,e){let n=(""+t).match(FX);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}var jX=t=>+t||0;function yA(t,e){let n={},r=Ke(e),i=r?Object.keys(e):e,s=Ke(t)?r?o=>St(t[o],t[e[o]]):o=>t[o]:()=>t;for(let o of i)n[o]=jX(s(o));return n}function wj(t){return yA(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ij(t){return yA(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Qi(t){let e=wj(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Cc(t,e){t=t||{},e=e||yt.font;let n=St(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=St(t.style,e.style);r&&!(""+r).match(LX)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);let i={family:St(t.family,e.family),lineHeight:VX(St(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:St(t.weight,e.weight),string:""};return i.string=NX(i),i}function Qf(t,e,n,r){let i=!0,s,o,a;for(s=0,o=t.length;s<o;++s)if(a=t[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),i=!1),n!==void 0&&At(a)&&(a=a[n%a.length],i=!1),a!==void 0))return r&&!i&&(r.cacheable=!1),a}function Tj(t,e,n){let{min:r,max:i}=t,s=rj(e,(i-r)/2),o=(a,c)=>n&&a===0?0:a+c;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function Sc(t,e){return Object.assign(Object.create(t),e)}function Sv(t,e=[""],n,r,i=()=>t[0]){let s=n||t;typeof r>"u"&&(r=Sj("_fallback",t));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>Sv([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,c){return delete a[c],delete a._keys,delete t[0][c],!0},get(a,c){return Dj(a,c,()=>GX(c,e,t,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,c){return tj(a).includes(c)},ownKeys(a){return tj(a)},set(a,c,l){let d=a._storage||(a._storage=i());return a[c]=d[c]=l,delete a._keys,!0}})}function Tc(t,e,n,r){let i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:_A(t,r),setContext:s=>Tc(t,s,n,r),override:s=>Tc(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return Dj(s,o,()=>UX(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function _A(t,e={scriptable:!0,indexable:!0}){let{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:zs(n)?n:()=>n,isIndexable:zs(r)?r:()=>r}}var BX=(t,e)=>t?t+Ev(e):e,vA=(t,e)=>Ke(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Dj(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];let r=n();return t[e]=r,r}function UX(t,e,n){let{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t,a=r[e];return zs(a)&&o.isScriptable(e)&&(a=HX(e,a,t,n)),At(a)&&a.length&&(a=$X(e,a,t,o.isIndexable)),vA(e,a)&&(a=Tc(a,i,s&&s[e],o)),a}function HX(t,e,n,r){let{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let c=e(s,o||r);return a.delete(t),vA(t,c)&&(c=bA(i._scopes,i,t,c)),c}function $X(t,e,n,r){let{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(Ke(e[0])){let c=e,l=i._scopes.filter(d=>d!==c);e=[];for(let d of c){let h=bA(l,i,t,d);e.push(Tc(h,s,o&&o[t],a))}}return e}function Cj(t,e,n){return zs(t)?t(e,n):t}var zX=(t,e)=>t===!0?e:typeof t=="string"?$f(e,t):void 0;function WX(t,e,n,r,i){for(let s of e){let o=zX(n,s);if(o){t.add(o);let a=Cj(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function bA(t,e,n,r){let i=e._rootScopes,s=Cj(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let c=ej(a,o,n,s||n,r);return c===null||typeof s<"u"&&s!==n&&(c=ej(a,o,s,c,r),c===null)?!1:Sv(Array.from(a),[""],i,s,()=>qX(e,n,r))}function ej(t,e,n,r,i){for(;n;)n=WX(t,e,n,r,i);return n}function qX(t,e,n){let r=t._getTarget();e in r||(r[e]={});let i=r[e];return At(i)&&Ke(n)?n:i||{}}function GX(t,e,n,r){let i;for(let s of e)if(i=Sj(BX(s,t),n),typeof i<"u")return vA(t,i)?bA(n,r,t,i):i}function Sj(t,e){for(let n of e){if(!n)continue;let r=n[t];if(typeof r<"u")return r}}function tj(t){let e=t._keys;return e||(e=t._keys=KX(t._scopes)),e}function KX(t){let e=new Set;for(let n of t)for(let r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}var QDe=Number.EPSILON||1e-14;function Av(){return typeof window<"u"&&typeof document<"u"}function xv(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function bv(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}var Rv=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function YX(t,e){return Rv(t).getPropertyValue(e)}var QX=["top","right","bottom","left"];function Ic(t,e,n){let r={};n=n?"-"+n:"";for(let i=0;i<4;i++){let s=QX[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}var ZX=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function XX(t,e){let n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r,o=!1,a,c;if(ZX(i,s,t.target))a=i,c=s;else{let l=e.getBoundingClientRect();a=r.clientX-l.left,c=r.clientY-l.top,o=!0}return{x:a,y:c,box:o}}function Jo(t,e){if("native"in t)return t;let{canvas:n,currentDevicePixelRatio:r}=e,i=Rv(n),s=i.boxSizing==="border-box",o=Ic(i,"padding"),a=Ic(i,"border","width"),{x:c,y:l,box:d}=XX(t,n),h=o.left+(d&&a.left),p=o.top+(d&&a.top),{width:g,height:v}=e;return s&&(g-=o.width+a.width,v-=o.height+a.height),{x:Math.round((c-h)/g*n.width/r),y:Math.round((l-p)/v*n.height/r)}}function JX(t,e,n){let r,i;if(e===void 0||n===void 0){let s=t&&xv(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{let o=s.getBoundingClientRect(),a=Rv(s),c=Ic(a,"border","width"),l=Ic(a,"padding");e=o.width-l.width-c.width,n=o.height-l.height-c.height,r=bv(a.maxWidth,s,"clientWidth"),i=bv(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||vv,maxHeight:i||vv}}var mv=t=>Math.round(t*10)/10;function Aj(t,e,n,r){let i=Rv(t),s=Ic(i,"margin"),o=bv(i.maxWidth,t,"clientWidth")||vv,a=bv(i.maxHeight,t,"clientHeight")||vv,c=JX(t,e,n),{width:l,height:d}=c;if(i.boxSizing==="content-box"){let p=Ic(i,"border","width"),g=Ic(i,"padding");l-=g.width+p.width,d-=g.height+p.height}return l=Math.max(0,l-s.width),d=Math.max(0,r?l/r:d-s.height),l=mv(Math.min(l,o,c.maxWidth)),d=mv(Math.min(d,a,c.maxHeight)),l&&!d&&(d=mv(l/2)),(e!==void 0||n!==void 0)&&r&&c.height&&d>c.height&&(d=c.height,l=mv(Math.floor(d*r))),{width:l,height:d}}function EA(t,e,n){let r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);let o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}var xj=(function(){let t=!1;try{let e={get passive(){return t=!0,!1}};Av()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function wA(t,e){let n=YX(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function yv(t,e,n){return t.options.clip?t[n]:e[n]}function eJ(t,e){let{xScale:n,yScale:r}=t;return n&&r?{left:yv(n,e,"left"),right:yv(n,e,"right"),top:yv(r,e,"top"),bottom:yv(r,e,"bottom")}:e}function Rj(t,e){let n=e._clip;if(n.disabled)return!1;let r=eJ(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}var xA=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){let s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=uA.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;let s=r.items,o=s.length-1,a=!1,c;for(;o>=0;--o)c=s[o],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){let n=this._charts,r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){let n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;let n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){let n=this._charts.get(e);if(!n||!n.items.length)return;let r=n.items,i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},Gs=new xA,Mj="transparent",tJ={boolean(t,e,n){return n>.5?e:t},color(t,e,n){let r=fA(t||Mj),i=r.valid&&fA(e||Mj);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}},RA=class{constructor(e,n,r,i){let s=n[r];i=Qf([e.to,i,s,e.from]);let o=Qf([e.from,s,i]);this._active=!0,this._fn=e.fn||tJ[e.type||typeof o],this._easing=Nu[e.easing]||Nu.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);let i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Qf([e.to,n,i,e.from]),this._from=Qf([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to,c;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}c=n/r%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[i]=this._fn(s,a,c)}wait(){let e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){let n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}},MA=class{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Ke(e))return;let n=Object.keys(yt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{let s=e[i];if(!Ke(s))return;let o={};for(let a of n)o[a]=s[a];(At(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){let r=n.options,i=rJ(e,r);if(!i)return[];let s=this._createAnimations(i,r);return r.$shared&&nJ(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){let r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now(),c;for(c=o.length-1;c>=0;--c){let l=o[c];if(l.charAt(0)==="$")continue;if(l==="options"){i.push(...this._animateOptions(e,n));continue}let d=n[l],h=s[l],p=r.get(l);if(h)if(p&&h.active()){h.update(p,d,a);continue}else h.cancel();if(!p||!p.duration){e[l]=d;continue}s[l]=h=new RA(p,e,l,d),i.push(h)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}let r=this._createAnimations(e,n);if(r.length)return Gs.add(this._chart,r),!0}};function nJ(t,e){let n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){let s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function rJ(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Nj(t,e){let n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function iJ(t,e,n){if(n===!1)return!1;let r=Nj(t,n),i=Nj(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function sJ(t){let e,n,r,i;return Ke(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function mB(t,e){let n=[],r=t._getSortedDatasetMetas(e),i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function kj(t,e,n,r={}){let i=t.keys,s=r.mode==="single",o,a,c,l;if(e===null)return;let d=!1;for(o=0,a=i.length;o<a;++o){if(c=+i[o],c===n){if(d=!0,r.all)continue;break}l=t.values[c],nn(l)&&(s||e===0||Wf(e)===Wf(l))&&(e+=l)}return!d&&!r.all?0:e}function oJ(t,e){let{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length),c,l,d;for(c=0,l=o.length;c<l;++c)d=o[c],a[c]={[i]:d,[s]:t[d]};return a}function IA(t,e){let n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function aJ(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function cJ(t){let{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function lJ(t,e,n){let r=t[e]||(t[e]={});return r[n]||(r[n]={})}function Pj(t,e,n,r){for(let i of e.getMatchingVisibleMetas(r).reverse()){let s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function Oj(t,e){let{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,c=s.axis,l=o.axis,d=aJ(s,o,r),h=e.length,p;for(let g=0;g<h;++g){let v=e[g],{[c]:S,[l]:C}=v,k=v._stacks||(v._stacks={});p=k[l]=lJ(i,d,S),p[a]=C,p._top=Pj(p,o,!0,r.type),p._bottom=Pj(p,o,!1,r.type);let O=p._visualValues||(p._visualValues={});O[a]=C}}function TA(t,e){let n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function uJ(t,e){return Sc(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function dJ(t,e,n){return Sc(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Zf(t,e){let n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(let i of e){let s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}var DA=t=>t==="reset"||t==="none",Fj=(t,e)=>e?t:Object.assign({},t),hJ=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:mB(n,!0),values:null},fJ=(()=>{class t{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(n,r){this.chart=n,this._ctx=n.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let n=this._cachedMeta;this.configure(),this.linkScales(),n._stacked=IA(n.vScale,n),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(n){this.index!==n&&Zf(this._cachedMeta),this.index=n}linkScales(){let n=this.chart,r=this._cachedMeta,i=this.getDataset(),s=(p,g,v,S)=>p==="x"?g:p==="r"?S:v,o=r.xAxisID=St(i.xAxisID,TA(n,"x")),a=r.yAxisID=St(i.yAxisID,TA(n,"y")),c=r.rAxisID=St(i.rAxisID,TA(n,"r")),l=r.indexAxis,d=r.iAxisID=s(l,o,a,c),h=r.vAxisID=s(l,a,o,c);r.xScale=this.getScaleForId(o),r.yScale=this.getScaleForId(a),r.rScale=this.getScaleForId(c),r.iScale=this.getScaleForId(d),r.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(n){return this.chart.scales[n]}_getOtherScale(n){let r=this._cachedMeta;return n===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){let n=this._cachedMeta;this._data&&lA(this._data,this),n._stacked&&Zf(n)}_dataCheck(){let n=this.getDataset(),r=n.data||(n.data=[]),i=this._data;if(Ke(r)){let s=this._cachedMeta;this._data=oJ(r,s)}else if(i!==r){if(i){lA(i,this);let s=this._cachedMeta;Zf(s),s._parsed=[]}r&&Object.isExtensible(r)&&pj(r,this),this._syncList=[],this._data=r}}addElements(){let n=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(n.dataset=new this.datasetElementType)}buildOrUpdateElements(n){let r=this._cachedMeta,i=this.getDataset(),s=!1;this._dataCheck();let o=r._stacked;r._stacked=IA(r.vScale,r),r.stack!==i.stack&&(s=!0,Zf(r),r.stack=i.stack),this._resyncElements(n),(s||o!==r._stacked)&&(Oj(this,r._parsed),r._stacked=IA(r.vScale,r))}configure(){let n=this.chart.config,r=n.datasetScopeKeys(this._type),i=n.getOptionScopes(this.getDataset(),r,!0);this.options=n.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(n,r){let{_cachedMeta:i,_data:s}=this,{iScale:o,_stacked:a}=i,c=o.axis,l=n===0&&r===s.length?!0:i._sorted,d=n>0&&i._parsed[n-1],h,p,g;if(this._parsing===!1)i._parsed=s,i._sorted=!0,g=s;else{At(s[n])?g=this.parseArrayData(i,s,n,r):Ke(s[n])?g=this.parseObjectData(i,s,n,r):g=this.parsePrimitiveData(i,s,n,r);let v=()=>p[c]===null||d&&p[c]<d[c];for(h=0;h<r;++h)i._parsed[h+n]=p=g[h],l&&(v()&&(l=!1),d=p);i._sorted=l}a&&Oj(this,g)}parsePrimitiveData(n,r,i,s){let{iScale:o,vScale:a}=n,c=o.axis,l=a.axis,d=o.getLabels(),h=o===a,p=new Array(s),g,v,S;for(g=0,v=s;g<v;++g)S=g+i,p[g]={[c]:h||o.parse(d[S],S),[l]:a.parse(r[S],S)};return p}parseArrayData(n,r,i,s){let{xScale:o,yScale:a}=n,c=new Array(s),l,d,h,p;for(l=0,d=s;l<d;++l)h=l+i,p=r[h],c[l]={x:o.parse(p[0],h),y:a.parse(p[1],h)};return c}parseObjectData(n,r,i,s){let{xScale:o,yScale:a}=n,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,d=new Array(s),h,p,g,v;for(h=0,p=s;h<p;++h)g=h+i,v=r[g],d[h]={x:o.parse($f(v,c),g),y:a.parse($f(v,l),g)};return d}getParsed(n){return this._cachedMeta._parsed[n]}getDataElement(n){return this._cachedMeta.data[n]}applyStack(n,r,i){let s=this.chart,o=this._cachedMeta,a=r[n.axis],c={keys:mB(s,!0),values:r._stacks[n.axis]._visualValues};return kj(c,a,o.index,{mode:i})}updateRangeFromParsed(n,r,i,s){let o=i[r.axis],a=o===null?NaN:o,c=s&&i._stacks[r.axis];s&&c&&(s.values=c,a=kj(s,o,this._cachedMeta.index)),n.min=Math.min(n.min,a),n.max=Math.max(n.max,a)}getMinMax(n,r){let i=this._cachedMeta,s=i._parsed,o=i._sorted&&n===i.iScale,a=s.length,c=this._getOtherScale(n),l=hJ(r,i,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:p}=cJ(c),g,v;function S(){v=s[g];let C=v[c.axis];return!nn(v[n.axis])||h>C||p<C}for(g=0;g<a&&!(!S()&&(this.updateRangeFromParsed(d,n,v,l),o));++g);if(o){for(g=a-1;g>=0;--g)if(!S()){this.updateRangeFromParsed(d,n,v,l);break}}return d}getAllParsedValues(n){let r=this._cachedMeta._parsed,i=[],s,o,a;for(s=0,o=r.length;s<o;++s)a=r[s][n.axis],nn(a)&&i.push(a);return i}getMaxOverflow(){return!1}getLabelAndValue(n){let r=this._cachedMeta,i=r.iScale,s=r.vScale,o=this.getParsed(n);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(n){let r=this._cachedMeta;this.update(n||"default"),r._clip=sJ(St(this.options.clip,iJ(r.xScale,r.yScale,this.getMaxOverflow())))}update(n){}draw(){let n=this._ctx,r=this.chart,i=this._cachedMeta,s=i.data||[],o=r.chartArea,a=[],c=this._drawStart||0,l=this._drawCount||s.length-c,d=this.options.drawActiveElementsOnTop,h;for(i.dataset&&i.dataset.draw(n,o,c,l),h=c;h<c+l;++h){let p=s[h];p.hidden||(p.active&&d?a.push(p):p.draw(n,o))}for(h=0;h<a.length;++h)a[h].draw(n,o)}getStyle(n,r){let i=r?"active":"default";return n===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(n||0,i)}getContext(n,r,i){let s=this.getDataset(),o;if(n>=0&&n<this._cachedMeta.data.length){let a=this._cachedMeta.data[n];o=a.$context||(a.$context=dJ(this.getContext(),n,a)),o.parsed=this.getParsed(n),o.raw=s.data[n],o.index=o.dataIndex=n}else o=this.$context||(this.$context=uJ(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!r,o.mode=i,o}resolveDatasetElementOptions(n){return this._resolveElementOptions(this.datasetElementType.id,n)}resolveDataElementOptions(n,r){return this._resolveElementOptions(this.dataElementType.id,r,n)}_resolveElementOptions(n,r="default",i){let s=r==="active",o=this._cachedDataOpts,a=n+"-"+r,c=o[a],l=this.enableOptionSharing&&zf(i);if(c)return Fj(c,l);let d=this.chart.config,h=d.datasetElementScopeKeys(this._type,n),p=s?[`${n}Hover`,"hover",n,""]:[n,""],g=d.getOptionScopes(this.getDataset(),h),v=Object.keys(yt.elements[n]),S=()=>this.getContext(i,s,r),C=d.resolveNamedOptions(g,v,S,p);return C.$shared&&(C.$shared=l,o[a]=Object.freeze(Fj(C,l))),C}_resolveAnimations(n,r,i){let s=this.chart,o=this._cachedDataOpts,a=`animation-${r}`,c=o[a];if(c)return c;let l;if(s.options.animation!==!1){let h=this.chart.config,p=h.datasetAnimationScopeKeys(this._type,r),g=h.getOptionScopes(this.getDataset(),p);l=h.createResolver(g,this.getContext(n,i,r))}let d=new MA(s,l&&l.animations);return l&&l._cacheable&&(o[a]=Object.freeze(d)),d}getSharedOptions(n){if(n.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},n))}includeOptions(n,r){return!r||DA(n)||this.chart._animationsDisabled}_getSharedOptions(n,r){let i=this.resolveDataElementOptions(n,r),s=this._sharedOptions,o=this.getSharedOptions(i),a=this.includeOptions(r,o)||o!==s;return this.updateSharedOptions(o,r,i),{sharedOptions:o,includeOptions:a}}updateElement(n,r,i,s){DA(s)?Object.assign(n,i):this._resolveAnimations(r,s).update(n,i)}updateSharedOptions(n,r,i){n&&!DA(r)&&this._resolveAnimations(void 0,r).update(n,i)}_setStyle(n,r,i,s){n.active=s;let o=this.getStyle(r,s);this._resolveAnimations(r,i,s).update(n,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(n,r,i){this._setStyle(n,i,"active",!1)}setHoverStyle(n,r,i){this._setStyle(n,i,"active",!0)}_removeDatasetHoverStyle(){let n=this._cachedMeta.dataset;n&&this._setStyle(n,void 0,"active",!1)}_setDatasetHoverStyle(){let n=this._cachedMeta.dataset;n&&this._setStyle(n,void 0,"active",!0)}_resyncElements(n){let r=this._data,i=this._cachedMeta.data;for(let[c,l,d]of this._syncList)this[c](l,d);this._syncList=[];let s=i.length,o=r.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,n):o<s&&this._removeElements(o,s-o)}_insertElements(n,r,i=!0){let s=this._cachedMeta,o=s.data,a=n+r,c,l=d=>{for(d.length+=r,c=d.length-1;c>=a;c--)d[c]=d[c-r]};for(l(o),c=n;c<a;++c)o[c]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(n,r),i&&this.updateElements(o,n,r,"reset")}updateElements(n,r,i,s){}_removeElements(n,r){let i=this._cachedMeta;if(this._parsing){let s=i._parsed.splice(n,r);i._stacked&&Zf(i,s)}i.data.splice(n,r)}_sync(n){if(this._parsing)this._syncList.push(n);else{let[r,i,s]=n;this[r](i,s)}this.chart._dataChanges.push([this.index,...n])}_onDataPush(){let n=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-n,n])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(n,r){r&&this._sync(["_removeElements",n,r]);let i=arguments.length-2;i&&this._sync(["_insertElements",n,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return t})();function Ac(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var NA=class t{static override(e){Object.assign(t.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Ac()}parse(){return Ac()}format(){return Ac()}add(){return Ac()}diff(){return Ac()}startOf(){return Ac()}endOf(){return Ac()}},pJ={_date:NA};function gJ(t,e,n,r){let{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){let l=a._reversePixels?dj:Tv;if(r){if(i._sharedOptions){let d=s[0],h=typeof d.getRange=="function"&&d.getRange(e);if(h){let p=l(s,e,n-h),g=l(s,e,n+h);return{lo:p.lo,hi:g.hi}}}}else{let d=l(s,e,n);if(c){let{vScale:h}=i._cachedMeta,{_parsed:p}=t,g=p.slice(0,d.lo+1).reverse().findIndex(S=>!dt(S[h.axis]));d.lo-=Math.max(0,g);let v=p.slice(d.hi).findIndex(S=>!dt(S[h.axis]));d.hi+=Math.max(0,v)}return d}}return{lo:0,hi:s.length-1}}function sp(t,e,n,r,i){let s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,c=s.length;a<c;++a){let{index:l,data:d}=s[a],{lo:h,hi:p}=gJ(s[a],e,o,i);for(let g=h;g<=p;++g){let v=d[g];v.skip||r(v,l,g)}}}function mJ(t){let e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){let s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function CA(t,e,n,r,i){let s=[];return!i&&!t.isPointInArea(e)||sp(t,n,e,function(a,c,l){!i&&!Dc(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:c,index:l})},!0),s}function yJ(t,e,n,r){let i=[];function s(o,a,c){let{startAngle:l,endAngle:d}=o.getProps(["startAngle","endAngle"],r),{angle:h}=cj(o,{x:e.x,y:e.y});lj(h,l,d)&&i.push({element:o,datasetIndex:a,index:c})}return sp(t,n,e,s),i}function _J(t,e,n,r,i,s){let o=[],a=mJ(n),c=Number.POSITIVE_INFINITY;function l(d,h,p){let g=d.inRange(e.x,e.y,i);if(r&&!g)return;let v=d.getCenterPoint(i);if(!(!!s||t.isPointInArea(v))&&!g)return;let C=a(e,v);C<c?(o=[{element:d,datasetIndex:h,index:p}],c=C):C===c&&o.push({element:d,datasetIndex:h,index:p})}return sp(t,n,e,l),o}function SA(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?yJ(t,e,n,i):_J(t,e,n,r,i,s)}function Lj(t,e,n,r,i){let s=[],o=n==="x"?"inXRange":"inYRange",a=!1;return sp(t,n,e,(c,l,d)=>{c[o]&&c[o](e[n],i)&&(s.push({element:c,datasetIndex:l,index:d}),a=a||c.inRange(e.x,e.y,i))}),r&&!a?[]:s}var vJ={evaluateInteractionItems:sp,modes:{index(t,e,n,r){let i=Jo(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?CA(t,i,s,r,o):SA(t,i,s,!1,r,o),c=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(l=>{let d=a[0].index,h=l.data[d];h&&!h.skip&&c.push({element:h,datasetIndex:l.index,index:d})}),c):[]},dataset(t,e,n,r){let i=Jo(e,t),s=n.axis||"xy",o=n.includeInvisible||!1,a=n.intersect?CA(t,i,s,r,o):SA(t,i,s,!1,r,o);if(a.length>0){let c=a[0].datasetIndex,l=t.getDatasetMeta(c).data;a=[];for(let d=0;d<l.length;++d)a.push({element:l[d],datasetIndex:c,index:d})}return a},point(t,e,n,r){let i=Jo(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return CA(t,i,s,r,o)},nearest(t,e,n,r){let i=Jo(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return SA(t,i,s,n.intersect,r,o)},x(t,e,n,r){let i=Jo(e,t);return Lj(t,i,"x",n.intersect,r)},y(t,e,n,r){let i=Jo(e,t);return Lj(t,i,"y",n.intersect,r)}}},yB=["left","top","right","bottom"];function Xf(t,e){return t.filter(n=>n.pos===e)}function Vj(t,e){return t.filter(n=>yB.indexOf(n.pos)===-1&&n.box.axis===e)}function Jf(t,e){return t.sort((n,r)=>{let i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function bJ(t){let e=[],n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function EJ(t){let e={};for(let n of t){let{stack:r,pos:i,stackWeight:s}=n;if(!r||!yB.includes(i))continue;let o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function wJ(t,e){let n=EJ(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e,s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];let{fullSize:c}=a.box,l=n[a.stack],d=l&&a.stackWeight/l.weight;a.horizontal?(a.width=d?d*r:c&&e.availableWidth,a.height=i):(a.width=r,a.height=d?d*i:c&&e.availableHeight)}return n}function IJ(t){let e=bJ(t),n=Jf(e.filter(l=>l.box.fullSize),!0),r=Jf(Xf(e,"left"),!0),i=Jf(Xf(e,"right")),s=Jf(Xf(e,"top"),!0),o=Jf(Xf(e,"bottom")),a=Vj(e,"x"),c=Vj(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(c).concat(o).concat(a),chartArea:Xf(e,"chartArea"),vertical:r.concat(i).concat(c),horizontal:s.concat(o).concat(a)}}function jj(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function _B(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function TJ(t,e,n,r){let{pos:i,box:s}=n,o=t.maxPadding;if(!Ke(i)){n.size&&(t[i]-=n.size);let h=r[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?s.height:s.width),n.size=h.size/h.count,t[i]+=n.size}s.getPadding&&_B(o,s.getPadding());let a=Math.max(0,e.outerWidth-jj(o,t,"left","right")),c=Math.max(0,e.outerHeight-jj(o,t,"top","bottom")),l=a!==t.w,d=c!==t.h;return t.w=a,t.h=c,n.horizontal?{same:l,other:d}:{same:d,other:l}}function DJ(t){let e=t.maxPadding;function n(r){let i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function CJ(t,e){let n=e.maxPadding;function r(i){let s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function np(t,e,n,r){let i=[],s,o,a,c,l,d;for(s=0,o=t.length,l=0;s<o;++s){a=t[s],c=a.box,c.update(a.width||e.w,a.height||e.h,CJ(a.horizontal,e));let{same:h,other:p}=TJ(e,n,a,r);l|=h&&i.length,d=d||p,c.fullSize||i.push(a)}return l&&np(i,e,n,r)||d}function Mv(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function Bj(t,e,n,r){let i=n.padding,{x:s,y:o}=e;for(let a of t){let c=a.box,l=r[a.stack]||{count:1,placed:0,weight:1},d=a.stackWeight/l.weight||1;if(a.horizontal){let h=e.w*d,p=l.size||c.height;zf(l.start)&&(o=l.start),c.fullSize?Mv(c,i.left,o,n.outerWidth-i.right-i.left,p):Mv(c,e.left+l.placed,o,h,p),l.start=o,l.placed+=h,o=c.bottom}else{let h=e.h*d,p=l.size||c.width;zf(l.start)&&(s=l.start),c.fullSize?Mv(c,s,i.top,p,n.outerHeight-i.bottom-i.top):Mv(c,s,e.top+l.placed,p,h),l.start=s,l.placed+=h,s=c.right}}e.x=s,e.y=o}var Nv={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){let n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;let i=Qi(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=IJ(t.boxes),c=a.vertical,l=a.horizontal;En(t.boxes,S=>{typeof S.beforeLayout=="function"&&S.beforeLayout()});let d=c.reduce((S,C)=>C.box.options&&C.box.options.display===!1?S:S+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/d,hBoxMaxHeight:o/2}),p=Object.assign({},i);_B(p,Qi(r));let g=Object.assign({maxPadding:p,w:s,h:o,x:i.left,y:i.top},i),v=wJ(c.concat(l),h);np(a.fullSize,g,h,v),np(c,g,h,v),np(l,g,h,v)&&np(c,g,h,v),DJ(g),Bj(a.leftAndTop,g,h,v),g.x+=g.w,g.y+=g.h,Bj(a.rightAndBottom,g,h,v),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},En(a.chartArea,S=>{let C=S.box;Object.assign(C,t.chartArea),C.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}},Vv=class{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}},kA=class extends Vv{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},Fv="$chartjs",SJ={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Uj=t=>t===null||t==="";function AJ(t,e){let n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[Fv]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Uj(i)){let s=wA(t,"width");s!==void 0&&(t.width=s)}if(Uj(r))if(t.style.height==="")t.height=t.width/(e||2);else{let s=wA(t,"height");s!==void 0&&(t.height=s)}return t}var vB=xj?{passive:!0}:!1;function xJ(t,e,n){t&&t.addEventListener(e,n,vB)}function RJ(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,vB)}function MJ(t,e){let n=SJ[t.type]||t.type,{x:r,y:i}=Jo(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function jv(t,e){for(let n of t)if(n===e||n.contains(e))return!0}function NJ(t,e,n){let r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||jv(a.addedNodes,r),o=o&&!jv(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function kJ(t,e,n){let r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||jv(a.removedNodes,r),o=o&&!jv(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}var rp=new Map,Hj=0;function bB(){let t=window.devicePixelRatio;t!==Hj&&(Hj=t,rp.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function PJ(t,e){rp.size||window.addEventListener("resize",bB),rp.set(t,e)}function OJ(t){rp.delete(t),rp.size||window.removeEventListener("resize",bB)}function FJ(t,e,n){let r=t.canvas,i=r&&xv(r);if(!i)return;let s=dA((a,c)=>{let l=i.clientWidth;n(a,c),l<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{let c=a[0],l=c.contentRect.width,d=c.contentRect.height;l===0&&d===0||s(l,d)});return o.observe(i),PJ(t,s),o}function AA(t,e,n){n&&n.disconnect(),e==="resize"&&OJ(t)}function LJ(t,e,n){let r=t.canvas,i=dA(s=>{t.ctx!==null&&n(MJ(s,t))},t);return xJ(r,e,i),i}var PA=class extends Vv{acquireContext(e,n){let r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(AJ(e,n),r):null}releaseContext(e){let n=e.canvas;if(!n[Fv])return!1;let r=n[Fv].initial;["height","width"].forEach(s=>{let o=r[s];dt(o)?n.removeAttribute(s):n.setAttribute(s,o)});let i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[Fv],!0}addEventListener(e,n,r){this.removeEventListener(e,n);let i=e.$proxies||(e.$proxies={}),o={attach:NJ,detach:kJ,resize:FJ}[n]||LJ;i[n]=o(e,n,r)}removeEventListener(e,n){let r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:AA,detach:AA,resize:AA}[n]||RJ)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return Aj(e,n,r,i)}isAttached(e){let n=e&&xv(e);return!!(n&&n.isConnected)}};function VJ(t){return!Av()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?kA:PA}var Bv=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Gf(this.x)&&Gf(this.y)}getProps(e,n){let r=this.$animations;if(!n||!r)return this;let i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}};function jJ(t,e){let n=t.options.ticks,r=BJ(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?HJ(e):[],o=s.length,a=s[0],c=s[o-1],l=[];if(o>i)return $J(e,l,s,o/i),l;let d=UJ(s,e,i);if(o>0){let h,p,g=o>1?Math.round((c-a)/(o-1)):null;for(kv(e,l,d,dt(g)?0:a-g,a),h=0,p=o-1;h<p;h++)kv(e,l,d,s[h],s[h+1]);return kv(e,l,d,c,dt(g)?e.length:c+g),l}return kv(e,l,d),l}function BJ(t){let e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function UJ(t,e,n){let r=zJ(t),i=e.length/n;if(!r)return Math.max(i,1);let s=oj(r);for(let o=0,a=s.length-1;o<a;o++){let c=s[o];if(c>i)return c}return Math.max(i,1)}function HJ(t){let e=[],n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function $J(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function kv(t,e,n,r,i){let s=St(r,0),o=Math.min(St(i,t.length),t.length),a=0,c,l,d;for(n=Math.ceil(n),i&&(c=i-r,n=c/Math.floor(c/n)),d=s;d<0;)a++,d=Math.round(s+a*n);for(l=Math.max(s,0);l<o;l++)l===d&&(e.push(t[l]),a++,d=Math.round(s+a*n))}function zJ(t){let e=t.length,n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}var WJ=t=>t==="left"?"right":t==="right"?"left":t,$j=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,zj=(t,e)=>Math.min(e||t,t);function Wj(t,e){let n=[],r=t.length/e,i=t.length,s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function qJ(t,e,n){let r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6,c=t.getPixelForTick(i),l;if(!(n&&(r===1?l=Math.max(c-s,o-c):e===0?l=(t.getPixelForTick(1)-c)/2:l=(c-t.getPixelForTick(i-1))/2,c+=i<e?l:-l,c<s-a||c>o+a)))return c}function GJ(t,e){En(t,n=>{let r=n.gc,i=r.length/2,s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function ep(t){return t.drawTicks?t.tickLength:0}function qj(t,e){if(!t.display)return 0;let n=Cc(t.font,e),r=Qi(t.padding);return(At(t.text)?t.text.length:1)*n.lineHeight+r.height}function KJ(t,e){return Sc(t,{scale:e,type:"scale"})}function YJ(t,e,n){return Sc(t,{tick:n,index:e,type:"tick"})}function QJ(t,e,n){let r=yj(t);return(n&&e!=="right"||!n&&e==="right")&&(r=WJ(r)),r}function ZJ(t,e,n,r){let{top:i,left:s,bottom:o,right:a,chart:c}=t,{chartArea:l,scales:d}=c,h=0,p,g,v,S=o-i,C=a-s;if(t.isHorizontal()){if(g=hA(r,s,a),Ke(n)){let k=Object.keys(n)[0],O=n[k];v=d[k].getPixelForValue(O)+S-e}else n==="center"?v=(l.bottom+l.top)/2+S-e:v=$j(t,n,e);p=a-s}else{if(Ke(n)){let k=Object.keys(n)[0],O=n[k];g=d[k].getPixelForValue(O)-C+e}else n==="center"?g=(l.left+l.right)/2-C+e:g=$j(t,n,e);v=hA(r,o,i),h=n==="left"?-Yi:Yi}return{titleX:g,titleY:v,maxWidth:p,rotation:h}}var Fu=class t extends Bv{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=nr(e,Number.POSITIVE_INFINITY),n=nr(n,Number.NEGATIVE_INFINITY),r=nr(r,Number.POSITIVE_INFINITY),i=nr(i,Number.NEGATIVE_INFINITY),{min:nr(e,r),max:nr(n,i),minDefined:nn(e),maxDefined:nn(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};let a=this.getMatchingVisibleMetas();for(let c=0,l=a.length;c<l;++c)o=a[c].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:nr(n,nr(r,n)),max:nr(r,nr(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){vt(this.options.beforeUpdate,[this])}update(e,n,r){let{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Tj(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let c=a<this.ticks.length;this._convertTicksToLabels(c?Wj(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=jJ(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){vt(this.options.afterUpdate,[this])}beforeSetDimensions(){vt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){vt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),vt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){vt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let n=this.options.ticks,r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=vt(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){vt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){vt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,n=e.ticks,r=zj(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation,o=i,a,c,l;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}let d=this._getLabelSizes(),h=d.widest.width,p=d.highest.height,g=Qo(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/r:g/(r-1),h+6>a&&(a=g/(r-(e.offset?.5:1)),c=this.maxHeight-ep(e.grid)-n.padding-qj(e.title,this.chart.options.font),l=Math.sqrt(h*h+p*p),o=wv(Math.min(Math.asin(Qo((d.highest.height+6)/a,-1,1)),Math.asin(Qo(c/l,-1,1))-Math.asin(Qo(p/l,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){vt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){vt(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let c=qj(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=ep(s)+c):(e.height=this.maxHeight,e.width=ep(s)+c),r.display&&this.ticks.length){let{first:l,last:d,widest:h,highest:p}=this._getLabelSizes(),g=r.padding*2,v=qs(this.labelRotation),S=Math.cos(v),C=Math.sin(v);if(a){let k=r.mirror?0:C*h.width+S*p.height;e.height=Math.min(this.maxHeight,e.height+k+g)}else{let k=r.mirror?0:S*h.width+C*p.height;e.width=Math.min(this.maxWidth,e.width+k+g)}this._calculatePadding(l,d,C,S)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){let{ticks:{align:s,padding:o},position:a}=this.options,c=this.labelRotation!==0,l=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1),p=0,g=0;c?l?(p=i*e.width,g=r*n.height):(p=r*e.height,g=i*n.width):s==="start"?g=n.width:s==="end"?p=e.width:s!=="inner"&&(p=e.width/2,g=n.width/2),this.paddingLeft=Math.max((p-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((g-h+o)*this.width/(this.width-h),0)}else{let d=n.height/2,h=e.height/2;s==="start"?(d=0,h=e.height):s==="end"&&(d=n.height,h=0),this.paddingTop=d+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){vt(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)dt(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let n=this.options.ticks.sampleSize,r=this.ticks;n<r.length&&(r=Wj(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){let{ctx:i,_longestTextCache:s}=this,o=[],a=[],c=Math.floor(n/zj(n,r)),l=0,d=0,h,p,g,v,S,C,k,O,F,z,W;for(h=0;h<n;h+=c){if(v=e[h].label,S=this._resolveTickFontOptions(h),i.font=C=S.string,k=s[C]=s[C]||{data:{},gc:[]},O=S.lineHeight,F=z=0,!dt(v)&&!At(v))F=Hf(i,k.data,k.gc,F,v),z=O;else if(At(v))for(p=0,g=v.length;p<g;++p)W=v[p],!dt(W)&&!At(W)&&(F=Hf(i,k.data,k.gc,F,W),z+=O);o.push(F),a.push(z),l=Math.max(F,l),d=Math.max(z,d)}GJ(s,n);let K=o.indexOf(l),I=a.indexOf(d),_=E=>({width:o[E]||0,height:a[E]||0});return{first:_(0),last:_(n-1),widest:_(K),highest:_(I),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){let n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let n=this._startPixel+e*this._length;return uj(this._alignToPixels?Xo(this.chart,n,0):n)}getDecimalForPixel(e){let n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){let n=this.ticks||[];if(e>=0&&e<n.length){let r=n[e];return r.$context||(r.$context=YJ(this.getContext(),e,r))}return this.$context||(this.$context=KJ(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,n=qs(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,c=s?s.highest.height+o:0;return this.isHorizontal()?c*r>a*i?a/r:c/i:c*i<a*r?c/r:a/i}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,c=s.offset,l=this.isHorizontal(),h=this.ticks.length+(c?1:0),p=ep(s),g=[],v=a.setContext(this.getContext()),S=v.display?v.width:0,C=S/2,k=function(oe){return Xo(r,oe,S)},O,F,z,W,K,I,_,E,w,T,D,b;if(o==="top")O=k(this.bottom),I=this.bottom-p,E=O-C,T=k(e.top)+C,b=e.bottom;else if(o==="bottom")O=k(this.top),T=e.top,b=k(e.bottom)-C,I=O+C,E=this.top+p;else if(o==="left")O=k(this.right),K=this.right-p,_=O-C,w=k(e.left)+C,D=e.right;else if(o==="right")O=k(this.left),w=e.left,D=k(e.right)-C,K=O+C,_=this.left+p;else if(n==="x"){if(o==="center")O=k((e.top+e.bottom)/2+.5);else if(Ke(o)){let oe=Object.keys(o)[0],J=o[oe];O=k(this.chart.scales[oe].getPixelForValue(J))}T=e.top,b=e.bottom,I=O+C,E=I+p}else if(n==="y"){if(o==="center")O=k((e.left+e.right)/2);else if(Ke(o)){let oe=Object.keys(o)[0],J=o[oe];O=k(this.chart.scales[oe].getPixelForValue(J))}K=O-C,_=K-p,w=e.left,D=e.right}let He=St(i.ticks.maxTicksLimit,h),ge=Math.max(1,Math.ceil(h/He));for(F=0;F<h;F+=ge){let oe=this.getContext(F),J=s.setContext(oe),R=a.setContext(oe),N=J.lineWidth,se=J.color,he=R.dash||[],ke=R.dashOffset,ue=J.tickWidth,rn=J.tickColor,Rt=J.tickBorderDash||[],Gt=J.tickBorderDashOffset;z=qJ(this,F,c),z!==void 0&&(W=Xo(r,z,N),l?K=_=w=D=W:I=E=T=b=W,g.push({tx1:K,ty1:I,tx2:_,ty2:E,x1:w,y1:T,x2:D,y2:b,width:N,color:se,borderDash:he,borderDashOffset:ke,tickWidth:ue,tickColor:rn,tickBorderDash:Rt,tickBorderDashOffset:Gt}))}return this._ticksLength=h,this._borderValue=O,g}_computeLabelItems(e){let n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:l,padding:d,mirror:h}=s,p=ep(r.grid),g=p+d,v=h?-d:g,S=-qs(this.labelRotation),C=[],k,O,F,z,W,K,I,_,E,w,T,D,b="middle";if(i==="top")K=this.bottom-v,I=this._getXAxisLabelAlignment();else if(i==="bottom")K=this.top+v,I=this._getXAxisLabelAlignment();else if(i==="left"){let ge=this._getYAxisLabelAlignment(p);I=ge.textAlign,W=ge.x}else if(i==="right"){let ge=this._getYAxisLabelAlignment(p);I=ge.textAlign,W=ge.x}else if(n==="x"){if(i==="center")K=(e.top+e.bottom)/2+g;else if(Ke(i)){let ge=Object.keys(i)[0],oe=i[ge];K=this.chart.scales[ge].getPixelForValue(oe)+g}I=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")W=(e.left+e.right)/2-g;else if(Ke(i)){let ge=Object.keys(i)[0],oe=i[ge];W=this.chart.scales[ge].getPixelForValue(oe)}I=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(c==="start"?b="top":c==="end"&&(b="bottom"));let He=this._getLabelSizes();for(k=0,O=a.length;k<O;++k){F=a[k],z=F.label;let ge=s.setContext(this.getContext(k));_=this.getPixelForTick(k)+s.labelOffset,E=this._resolveTickFontOptions(k),w=E.lineHeight,T=At(z)?z.length:1;let oe=T/2,J=ge.color,R=ge.textStrokeColor,N=ge.textStrokeWidth,se=I;o?(W=_,I==="inner"&&(k===O-1?se=this.options.reverse?"left":"right":k===0?se=this.options.reverse?"right":"left":se="center"),i==="top"?l==="near"||S!==0?D=-T*w+w/2:l==="center"?D=-He.highest.height/2-oe*w+w:D=-He.highest.height+w/2:l==="near"||S!==0?D=w/2:l==="center"?D=He.highest.height/2-oe*w:D=He.highest.height-T*w,h&&(D*=-1),S!==0&&!ge.showLabelBackdrop&&(W+=w/2*Math.sin(S))):(K=_,D=(1-T)*w/2);let he;if(ge.showLabelBackdrop){let ke=Qi(ge.backdropPadding),ue=He.heights[k],rn=He.widths[k],Rt=D-ke.top,Gt=0-ke.left;switch(b){case"middle":Rt-=ue/2;break;case"bottom":Rt-=ue;break}switch(I){case"center":Gt-=rn/2;break;case"right":Gt-=rn;break;case"inner":k===O-1?Gt-=rn:k>0&&(Gt-=rn/2);break}he={left:Gt,top:Rt,width:rn+ke.width,height:ue+ke.height,color:ge.backdropColor}}C.push({label:z,font:E,textOffset:D,options:{rotation:S,color:J,strokeColor:R,strokeWidth:N,textAlign:se,textBaseline:b,translation:[W,K],backdrop:he}})}return C}_getXAxisLabelAlignment(){let{position:e,ticks:n}=this.options;if(-qs(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){let{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,c=o.widest.width,l,d;return n==="left"?i?(d=this.right+s,r==="near"?l="left":r==="center"?(l="center",d+=c/2):(l="right",d+=c)):(d=this.right-a,r==="near"?l="right":r==="center"?(l="center",d-=c/2):(l="left",d=this.left)):n==="right"?i?(d=this.left+s,r==="near"?l="right":r==="center"?(l="center",d-=c/2):(l="left",d-=c)):(d=this.left+a,r==="near"?l="left":r==="center"?(l="center",d+=c/2):(l="right",d=this.right)):l="right",{textAlign:l,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){let n=this.options.grid;if(!this._isVisible()||!n.display)return 0;let i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){let n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),s,o,a=(c,l,d)=>{!d.width||!d.color||(r.save(),r.lineWidth=d.width,r.strokeStyle=d.color,r.setLineDash(d.borderDash||[]),r.lineDashOffset=d.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(l.x,l.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){let c=i[s];n.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),n.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;let a=i.setContext(this.getContext(0)).lineWidth,c=this._borderValue,l,d,h,p;this.isHorizontal()?(l=Xo(e,this.left,o)-o/2,d=Xo(e,this.right,a)+a/2,h=p=c):(h=Xo(e,this.top,o)-o/2,p=Xo(e,this.bottom,a)+a/2,l=d=c),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(l,h),n.lineTo(d,p),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;let r=this.ctx,i=this._computeLabelArea();i&&gA(r,i);let s=this.getLabelItems(e);for(let o of s){let a=o.options,c=o.font,l=o.label,d=o.textOffset;Yf(r,l,0,d,c,a)}i&&mA(r)}drawTitle(){let{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;let s=Cc(r.font),o=Qi(r.padding),a=r.align,c=s.lineHeight/2;n==="bottom"||n==="center"||Ke(n)?(c+=o.bottom,At(r.text)&&(c+=s.lineHeight*(r.text.length-1))):c+=o.top;let{titleX:l,titleY:d,maxWidth:h,rotation:p}=ZJ(this,c,n,a);Yf(e,r.text,0,0,s,{color:r.color,maxWidth:h,rotation:p,textAlign:QJ(a,n,i),textBaseline:"middle",translation:[l,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,n=e.ticks&&e.ticks.z||0,r=St(e.grid&&e.grid.z,-1),i=St(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==t.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){let n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[],s,o;for(s=0,o=n.length;s<o;++s){let a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){let n=this.options.ticks.setContext(this.getContext(e));return Cc(n.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},Ou=class{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let n=Object.getPrototypeOf(e),r;eee(n)&&(r=this.register(n));let i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,XJ(e,o,r),this.override&&yt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){let n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in yt[i]&&(delete yt[i][r],this.override&&delete Zo[r])}};function XJ(t,e,n){let r=ku(Object.create(null),[n?yt.get(n):{},yt.get(e),t.defaults]);yt.set(e,r),t.defaultRoutes&&JJ(e,t.defaultRoutes),t.descriptors&&yt.describe(e,t.descriptors)}function JJ(t,e){Object.keys(e).forEach(n=>{let r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),c=o.join(".");yt.route(s,i,c,a)})}function eee(t){return"id"in t&&"defaults"in t}var OA=class{constructor(){this.controllers=new Ou(fJ,"datasets",!0),this.elements=new Ou(Bv,"elements"),this.plugins=new Ou(Object,"plugins"),this.scales=new Ou(Fu,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{let s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):En(i,o=>{let a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){let i=Ev(e);vt(r["before"+i],[],r),n[e](r),vt(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){let r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){let i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}},Zi=new OA,FA=class{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));let s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(let s of e){let o=s.plugin,a=o[r],c=[n,i,s.options];if(vt(a,c,o)===!1&&i.cancelable)return!1}return!0}invalidate(){dt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){let r=e&&e.config,i=St(r.options&&r.options.plugins,{}),s=tee(r);return i===!1&&!n?[]:ree(e,s,i,n)}_notifyStateChanges(e){let n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(c=>a.plugin.id===c.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}};function tee(t){let e={},n=[],r=Object.keys(Zi.plugins.items);for(let s=0;s<r.length;s++)n.push(Zi.getPlugin(r[s]));let i=t.plugins||[];for(let s=0;s<i.length;s++){let o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function nee(t,e){return!e&&t===!1?null:t===!0?{}:t}function ree(t,{plugins:e,localIds:n},r,i){let s=[],o=t.getContext();for(let a of e){let c=a.id,l=nee(r[c],i);l!==null&&s.push({plugin:a,options:iee(t.config,{plugin:a,local:n[c]},l,o)})}return s}function iee(t,{plugin:e,local:n},r,i){let s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function LA(t,e){let n=yt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function see(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function oee(t,e){return t===e?"_index_":"_value_"}function Gj(t){if(t==="x"||t==="y"||t==="r")return t}function aee(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function VA(t,...e){if(Gj(t))return t;for(let n of e){let r=n.axis||aee(n.position)||t.length>1&&Gj(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Kj(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function cee(t,e){if(e.data&&e.data.datasets){let n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return Kj(t,"x",n[0])||Kj(t,"y",n[0])}return{}}function lee(t,e){let n=Zo[t.type]||{scales:{}},r=e.scales||{},i=LA(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{let a=r[o];if(!Ke(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let c=VA(o,a,cee(o,t),yt.scales[a.type]),l=oee(c,i),d=n.scales||{};s[o]=Pu(Object.create(null),[{axis:c},a,d[c],d[l]])}),t.data.datasets.forEach(o=>{let a=o.type||t.type,c=o.indexAxis||LA(a,e),d=(Zo[a]||{}).scales||{};Object.keys(d).forEach(h=>{let p=see(h,c),g=o[p+"AxisID"]||p;s[g]=s[g]||Object.create(null),Pu(s[g],[{axis:p},r[g],d[h]])})}),Object.keys(s).forEach(o=>{let a=s[o];Pu(a,[yt.scales[a.type],yt.scale])}),s}function EB(t){let e=t.options||(t.options={});e.plugins=St(e.plugins,{}),e.scales=lee(t,e)}function wB(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function uee(t){return t=t||{},t.data=wB(t.data),EB(t),t}var Yj=new Map,IB=new Set;function Pv(t,e){let n=Yj.get(t);return n||(n=e(),Yj.set(t,n),IB.add(n)),n}var tp=(t,e,n)=>{let r=$f(e,n);r!==void 0&&t.add(r)},jA=class{constructor(e){this._config=uee(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=wB(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),EB(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Pv(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Pv(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Pv(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){let n=e.id,r=this.type;return Pv(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){let r=this._scopeCache,i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){let{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;let c=new Set;n.forEach(d=>{e&&(c.add(e),d.forEach(h=>tp(c,e,h))),d.forEach(h=>tp(c,i,h)),d.forEach(h=>tp(c,Zo[s]||{},h)),d.forEach(h=>tp(c,yt,h)),d.forEach(h=>tp(c,Cv,h))});let l=Array.from(c);return l.length===0&&l.push(Object.create(null)),IB.has(n)&&o.set(n,l),l}chartOptionScopes(){let{options:e,type:n}=this;return[e,Zo[n]||{},yt.datasets[n]||{},{type:n},yt,Cv]}resolveNamedOptions(e,n,r,i=[""]){let s={$shared:!0},{resolver:o,subPrefixes:a}=Qj(this._resolverCache,e,i),c=o;if(hee(o,n)){s.$shared=!1,r=zs(r)?r():r;let l=this.createResolver(e,r,a);c=Tc(o,r,l)}for(let l of n)s[l]=c[l];return s}createResolver(e,n,r=[""],i){let{resolver:s}=Qj(this._resolverCache,e,r);return Ke(n)?Tc(s,n,void 0,i):s}};function Qj(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));let i=n.join(),s=r.get(i);return s||(s={resolver:Sv(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}var dee=t=>Ke(t)&&Object.getOwnPropertyNames(t).some(e=>zs(t[e]));function hee(t,e){let{isScriptable:n,isIndexable:r}=_A(t);for(let i of e){let s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(zs(a)||dee(a))||o&&At(a))return!0}return!1}var fee="4.5.0",pee=["top","bottom","left","right","chartArea"];function Zj(t,e){return t==="top"||t==="bottom"||pee.indexOf(t)===-1&&e==="x"}function Xj(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Jj(t){let e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),vt(n&&n.onComplete,[t],e)}function gee(t){let e=t.chart,n=e.options.animation;vt(n&&n.onProgress,[t],e)}function TB(t){return Av()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}var Lv={},eB=t=>{let e=TB(t);return Object.values(Lv).filter(n=>n.canvas===e).pop()};function mee(t,e,n){let r=Object.keys(t);for(let i of r){let s=+i;if(s>=e){let o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function yee(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var Uv=(()=>{class t{static defaults=yt;static instances=Lv;static overrides=Zo;static registry=Zi;static version=fee;static getChart=eB;static register(...n){Zi.add(...n),tB()}static unregister(...n){Zi.remove(...n),tB()}constructor(n,r){let i=this.config=new jA(r),s=TB(n),o=eB(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||VJ(s)),this.platform.updateConfig(i);let c=this.platform.acquireContext(s,a.aspectRatio),l=c&&c.canvas,d=l&&l.height,h=l&&l.width;if(this.id=nj(),this.ctx=c,this.canvas=l,this.width=h,this.height=d,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new FA,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=mj(p=>this.update(p),a.resizeDelay||0),this._dataChanges=[],Lv[this.id]=this,!c||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Gs.listen(this,"complete",Jj),Gs.listen(this,"progress",gee),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:n,maintainAspectRatio:r},width:i,height:s,_aspectRatio:o}=this;return dt(n)?r&&o?o:s?i/s:null:n}get data(){return this.config.data}set data(n){this.config.data=n}get options(){return this._options}set options(n){this.config.options=n}get registry(){return Zi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():EA(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return pA(this.canvas,this.ctx),this}stop(){return Gs.stop(this),this}resize(n,r){Gs.running(this)?this._resizeBeforeDraw={width:n,height:r}:this._resize(n,r)}_resize(n,r){let i=this.options,s=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,n,r,o),c=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,EA(this,c,!0)&&(this.notifyPlugins("resize",{size:a}),vt(i.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let r=this.options.scales||{};En(r,(i,s)=>{i.id=s})}buildOrUpdateScales(){let n=this.options,r=n.scales,i=this.scales,s=Object.keys(i).reduce((a,c)=>(a[c]=!1,a),{}),o=[];r&&(o=o.concat(Object.keys(r).map(a=>{let c=r[a],l=VA(a,c),d=l==="r",h=l==="x";return{options:c,dposition:d?"chartArea":h?"bottom":"left",dtype:d?"radialLinear":h?"category":"linear"}}))),En(o,a=>{let c=a.options,l=c.id,d=VA(l,c),h=St(c.type,a.dtype);(c.position===void 0||Zj(c.position,d)!==Zj(a.dposition))&&(c.position=a.dposition),s[l]=!0;let p=null;if(l in i&&i[l].type===h)p=i[l];else{let g=Zi.getScale(h);p=new g({id:l,type:h,ctx:this.ctx,chart:this}),i[p.id]=p}p.init(c,n)}),En(s,(a,c)=>{a||delete i[c]}),En(i,a=>{Nv.configure(this,a,a.options),Nv.addBox(this,a)})}_updateMetasets(){let n=this._metasets,r=this.data.datasets.length,i=n.length;if(n.sort((s,o)=>s.index-o.index),i>r){for(let s=r;s<i;++s)this._destroyDatasetMeta(s);n.splice(r,i-r)}this._sortedMetasets=n.slice(0).sort(Xj("order","index"))}_removeUnreferencedMetasets(){let{_metasets:n,data:{datasets:r}}=this;n.length>r.length&&delete this._stacks,n.forEach((i,s)=>{r.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let n=[],r=this.data.datasets,i,s;for(this._removeUnreferencedMetasets(),i=0,s=r.length;i<s;i++){let o=r[i],a=this.getDatasetMeta(i),c=o.type||this.config.type;if(a.type&&a.type!==c&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=c,a.indexAxis=o.indexAxis||LA(c,this.options),a.order=o.order||0,a.index=i,a.label=""+o.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{let l=Zi.getController(c),{datasetElementType:d,dataElementType:h}=yt.datasets[c];Object.assign(l,{dataElementType:Zi.getElement(h),datasetElementType:d&&Zi.getElement(d)}),a.controller=new l(this,i),n.push(a.controller)}}return this._updateMetasets(),n}_resetElements(){En(this.data.datasets,(n,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(n){let r=this.config;r.update();let i=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:n,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let d=0,h=this.data.datasets.length;d<h;d++){let{controller:p}=this.getDatasetMeta(d),g=!s&&o.indexOf(p)===-1;p.buildOrUpdateElements(g),a=Math.max(+p.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),s||En(o,d=>{d.reset()}),this._updateDatasets(n),this.notifyPlugins("afterUpdate",{mode:n}),this._layers.sort(Xj("z","_idx"));let{_active:c,_lastEvent:l}=this;l?this._eventHandler(l,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){En(this.scales,n=>{Nv.removeBox(this,n)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let n=this.options,r=new Set(Object.keys(this._listeners)),i=new Set(n.events);(!sA(r,i)||!!this._responsiveListeners!==n.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:n}=this,r=this._getUniformDataChanges()||[];for(let{method:i,start:s,count:o}of r){let a=i==="_removeElements"?-o:o;mee(n,s,a)}}_getUniformDataChanges(){let n=this._dataChanges;if(!n||!n.length)return;this._dataChanges=[];let r=this.data.datasets.length,i=o=>new Set(n.filter(a=>a[0]===o).map((a,c)=>c+","+a.splice(1).join(","))),s=i(0);for(let o=1;o<r;o++)if(!sA(s,i(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(n){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Nv.update(this,this.width,this.height,n);let r=this.chartArea,i=r.width<=0||r.height<=0;this._layers=[],En(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(n){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:n,cancelable:!0})!==!1){for(let r=0,i=this.data.datasets.length;r<i;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,i=this.data.datasets.length;r<i;++r)this._updateDataset(r,zs(n)?n({datasetIndex:r}):n);this.notifyPlugins("afterDatasetsUpdate",{mode:n})}}_updateDataset(n,r){let i=this.getDatasetMeta(n),s={meta:i,index:n,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(r),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Gs.has(this)?this.attached&&!Gs.running(this)&&Gs.start(this):(this.draw(),Jj({chart:this})))}draw(){let n;if(this._resizeBeforeDraw){let{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let r=this._layers;for(n=0;n<r.length&&r[n].z<=0;++n)r[n].draw(this.chartArea);for(this._drawDatasets();n<r.length;++n)r[n].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(n){let r=this._sortedMetasets,i=[],s,o;for(s=0,o=r.length;s<o;++s){let a=r[s];(!n||a.visible)&&i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let n=this.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r)this._drawDataset(n[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(n){let r=this.ctx,i={meta:n,index:n.index,cancelable:!0},s=Rj(this,n);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&gA(r,s),n.controller.draw(),s&&mA(r),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(n){return Dc(n,this.chartArea,this._minPadding)}getElementsAtEventForMode(n,r,i,s){let o=vJ.modes[r];return typeof o=="function"?o(this,n,i,s):[]}getDatasetMeta(n){let r=this.data.datasets[n],i=this._metasets,s=i.filter(o=>o&&o._dataset===r).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:n,_dataset:r,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Sc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(n){let r=this.data.datasets[n];if(!r)return!1;let i=this.getDatasetMeta(n);return typeof i.hidden=="boolean"?!i.hidden:!r.hidden}setDatasetVisibility(n,r){let i=this.getDatasetMeta(n);i.hidden=!r}toggleDataVisibility(n){this._hiddenIndices[n]=!this._hiddenIndices[n]}getDataVisibility(n){return!this._hiddenIndices[n]}_updateVisibility(n,r,i){let s=i?"show":"hide",o=this.getDatasetMeta(n),a=o.controller._resolveAnimations(void 0,s);zf(r)?(o.data[r].hidden=!i,this.update()):(this.setDatasetVisibility(n,i),a.update(o,{visible:i}),this.update(c=>c.datasetIndex===n?s:void 0))}hide(n,r){this._updateVisibility(n,r,!1)}show(n,r){this._updateVisibility(n,r,!0)}_destroyDatasetMeta(n){let r=this._metasets[n];r&&r.controller&&r.controller._destroy(),delete this._metasets[n]}_stop(){let n,r;for(this.stop(),Gs.remove(this),n=0,r=this.data.datasets.length;n<r;++n)this._destroyDatasetMeta(n)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:n,ctx:r}=this;this._stop(),this.config.clearCache(),n&&(this.unbindEvents(),pA(n,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete Lv[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...n){return this.canvas.toDataURL(...n)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let n=this._listeners,r=this.platform,i=(o,a)=>{r.addEventListener(this,o,a),n[o]=a},s=(o,a,c)=>{o.offsetX=a,o.offsetY=c,this._eventHandler(o)};En(this.options.events,o=>i(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let n=this._responsiveListeners,r=this.platform,i=(l,d)=>{r.addEventListener(this,l,d),n[l]=d},s=(l,d)=>{n[l]&&(r.removeEventListener(this,l,d),delete n[l])},o=(l,d)=>{this.canvas&&this.resize(l,d)},a,c=()=>{s("attach",c),this.attached=!0,this.resize(),i("resize",o),i("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),i("attach",c)},r.isAttached(this.canvas)?c():a()}unbindEvents(){En(this._listeners,(n,r)=>{this.platform.removeEventListener(this,r,n)}),this._listeners={},En(this._responsiveListeners,(n,r)=>{this.platform.removeEventListener(this,r,n)}),this._responsiveListeners=void 0}updateHoverStyle(n,r,i){let s=i?"set":"remove",o,a,c,l;for(r==="dataset"&&(o=this.getDatasetMeta(n[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),c=0,l=n.length;c<l;++c){a=n[c];let d=a&&this.getDatasetMeta(a.datasetIndex).controller;d&&d[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(n){let r=this._active||[],i=n.map(({datasetIndex:o,index:a})=>{let c=this.getDatasetMeta(o);if(!c)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:c.data[a],index:a}});!iA(i,r)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,r))}notifyPlugins(n,r,i){return this._plugins.notify(this,n,r,i)}isPluginEnabled(n){return this._plugins._cache.filter(r=>r.plugin.id===n).length===1}_updateHoverStyles(n,r,i){let s=this.options.hover,o=(l,d)=>l.filter(h=>!d.some(p=>h.datasetIndex===p.datasetIndex&&h.index===p.index)),a=o(r,n),c=i?n:o(n,r);a.length&&this.updateHoverStyle(a,s.mode,!1),c.length&&s.mode&&this.updateHoverStyle(c,s.mode,!0)}_eventHandler(n,r){let i={event:n,replay:r,cancelable:!0,inChartArea:this.isPointInArea(n)},s=a=>(a.options.events||this.options.events).includes(n.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;let o=this._handleEvent(n,r,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(o||i.changed)&&this.render(),this}_handleEvent(n,r,i){let{_active:s=[],options:o}=this,a=r,c=this._getActiveElements(n,s,i,a),l=sj(n),d=yee(n,this._lastEvent,i,l);i&&(this._lastEvent=null,vt(o.onHover,[n,c,this],this),l&&vt(o.onClick,[n,c,this],this));let h=!iA(c,s);return(h||r)&&(this._active=c,this._updateHoverStyles(c,s,r)),this._lastEvent=d,h}_getActiveElements(n,r,i,s){if(n.type==="mouseout")return[];if(!i)return r;let o=this.options.hover;return this.getElementsAtEventForMode(n,o.mode,o,s)}}return t})();function tB(){return En(Uv.instances,t=>t._plugins.invalidate())}function _ee(t,e){let n=[],{bounds:i,step:s,min:o,max:a,precision:c,count:l,maxTicks:d,maxDigits:h,includeBounds:p}=t,g=s||1,v=d-1,{min:S,max:C}=e,k=!dt(o),O=!dt(a),F=!dt(l),z=(C-S)/(h+1),W=oA((C-S)/v/g)*g,K,I,_,E;if(W<1e-14&&!k&&!O)return[{value:S},{value:C}];E=Math.ceil(C/W)-Math.floor(S/W),E>v&&(W=oA(E*W/v/g)*g),dt(c)||(K=Math.pow(10,c),W=Math.ceil(W*K)/K),i==="ticks"?(I=Math.floor(S/W)*W,_=Math.ceil(C/W)*W):(I=S,_=C),k&&O&&s&&aj((a-o)/s,W/1e3)?(E=Math.round(Math.min((a-o)/W,d)),W=(a-o)/E,I=o,_=a):F?(I=k?o:I,_=O?a:_,E=l-1,W=(_-I)/E):(E=(_-I)/W,qf(E,Math.round(E),W/1e3)?E=Math.round(E):E=Math.ceil(E));let w=Math.max(cA(W),cA(I));K=Math.pow(10,dt(c)?w:c),I=Math.round(I*K)/K,_=Math.round(_*K)/K;let T=0;for(k&&(p&&I!==o?(n.push({value:o}),I<o&&T++,qf(Math.round((I+T*W)*K)/K,o,nB(o,z,t))&&T++):I<o&&T++);T<E;++T){let D=Math.round((I+T*W)*K)/K;if(O&&D>a)break;n.push({value:D})}return O&&p&&_!==a?n.length&&qf(n[n.length-1].value,a,nB(a,z,t))?n[n.length-1].value=a:n.push({value:a}):(!O||_===a)&&n.push({value:_}),n}function nB(t,e,{horizontal:n,minRotation:r}){let i=qs(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}var Lu=class extends Fu{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return dt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds(),{min:i,max:s}=this,o=c=>i=n?i:c,a=c=>s=r?s:c;if(e){let c=Wf(i),l=Wf(s);c<0&&l<0?a(0):c>0&&l>0&&o(0)}if(i===s){let c=s===0?1:Math.abs(s*.05);a(s+c),e||o(i-c)}this.min=i,this.max=s}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,n=e.ticks,r=this.getTickLimit();r=Math.max(2,r);let i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=_ee(i,s);return e.bounds==="ticks"&&aA(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let e=this.ticks,n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){let i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return Dv(e,this.chart.options.locale,this.options.ticks.format)}},rB=class extends Lu{static id="linear";static defaults={ticks:{callback:Kf.formatters.numeric}};determineDataLimits(){let{min:e,max:n}=this.getMinMax(!0);this.min=nn(e)?e:0,this.max=nn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),n=e?this.width:this.height,r=qs(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},ip=t=>Math.floor(Ws(t)),xc=(t,e)=>Math.pow(10,ip(t)+e);function iB(t){return t/Math.pow(10,ip(t))===1}function sB(t,e,n){let r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function vee(t,e){let n=e-t,r=ip(n);for(;sB(t,e,r)>10;)r++;for(;sB(t,e,r)<10;)r--;return Math.min(r,ip(t))}function bee(t,{min:e,max:n}){e=nr(t.min,e);let r=[],i=ip(e),s=vee(e,n),o=s<0?Math.pow(10,Math.abs(s)):1,a=Math.pow(10,s),c=i>s?Math.pow(10,i):0,l=Math.round((e-c)*o)/o,d=Math.floor((e-c)/a/10)*a*10,h=Math.floor((l-d)/Math.pow(10,s)),p=nr(t.min,Math.round((c+d+h*Math.pow(10,s))*o)/o);for(;p<n;)r.push({value:p,major:iB(p),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,o=s>=0?1:o),p=Math.round((c+d+h*Math.pow(10,s))*o)/o;let g=nr(t.max,p);return r.push({value:g,major:iB(g),significand:h}),r}var oB=class extends Fu{static id="logarithmic";static defaults={ticks:{callback:Kf.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){let r=Lu.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return nn(r)&&r>0?r:null}determineDataLimits(){let{min:e,max:n}=this.getMinMax(!0);this.min=nn(e)?Math.max(0,e):null,this.max=nn(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!nn(this._userMin)&&(this.min=e===xc(this.min,0)?xc(this.min,-1):xc(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:n}=this.getUserBounds(),r=this.min,i=this.max,s=a=>r=e?r:a,o=a=>i=n?i:a;r===i&&(r<=0?(s(1),o(10)):(s(xc(r,-1)),o(xc(i,1)))),r<=0&&s(xc(i,-1)),i<=0&&o(xc(r,1)),this.min=r,this.max=i}buildTicks(){let e=this.options,n={min:this._userMin,max:this._userMax},r=bee(n,this);return e.bounds==="ticks"&&aA(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":Dv(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=Ws(e),this._valueRange=Ws(this.max)-Ws(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Ws(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}};function BA(t){let e=t.ticks;if(e.display&&t.display){let n=Qi(e.backdropPadding);return St(e.font&&e.font.size,yt.font.size)+n.height}return 0}function Eee(t,e,n){return n=At(n)?n:[n],{w:bj(t,e.string,n),h:n.length*e.lineHeight}}function aB(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function wee(t){let e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Pn/s:0;for(let c=0;c<s;c++){let l=o.setContext(t.getPointLabelContext(c));i[c]=l.padding;let d=t.getPointPosition(c,t.drawingArea+i[c],a),h=Cc(l.font),p=Eee(t.ctx,h,t._pointLabels[c]);r[c]=p;let g=hi(t.getIndexAngle(c)+a),v=Math.round(wv(g)),S=aB(v,d.x,p.w,0,180),C=aB(v,d.y,p.h,90,270);Iee(n,e,g,S,C)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=Cee(t,r,i)}function Iee(t,e,n,r,i){let s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n)),a=0,c=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(c=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-c)):i.end>e.b&&(c=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+c))}function Tee(t,e,n){let r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,c=t.getPointPosition(e,r+i+o,s),l=Math.round(wv(hi(c.angle+Yi))),d=xee(c.y,a.h,l),h=See(l),p=Aee(c.x,a.w,h);return{visible:!0,x:c.x,y:d,textAlign:h,left:p,top:d,right:p+a.w,bottom:d+a.h}}function Dee(t,e){if(!e)return!0;let{left:n,top:r,right:i,bottom:s}=t;return!(Dc({x:n,y:r},e)||Dc({x:n,y:s},e)||Dc({x:i,y:r},e)||Dc({x:i,y:s},e))}function Cee(t,e,n){let r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,c={extra:BA(s)/2,additionalAngle:o?Pn/i:0},l;for(let d=0;d<i;d++){c.padding=n[d],c.size=e[d];let h=Tee(t,d,c);r.push(h),a==="auto"&&(h.visible=Dee(h,l),h.visible&&(l=h))}return r}function See(t){return t===0||t===180?"center":t<180?"left":"right"}function Aee(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function xee(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function Ree(t,e,n){let{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!dt(a)){let c=Ij(e.borderRadius),l=Qi(e.backdropPadding);t.fillStyle=a;let d=r-l.left,h=i-l.top,p=s-r+l.width,g=o-i+l.height;Object.values(c).some(v=>v!==0)?(t.beginPath(),Ej(t,{x:d,y:h,w:p,h:g,radius:c}),t.fill()):t.fillRect(d,h,p,g)}}function Mee(t,e){let{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){let s=t._pointLabelItems[i];if(!s.visible)continue;let o=r.setContext(t.getPointLabelContext(i));Ree(n,o,s);let a=Cc(o.font),{x:c,y:l,textAlign:d}=s;Yf(n,t._pointLabels[i],c,l+a.lineHeight/2,a,{color:o.color,textAlign:d,textBaseline:"middle"})}}function DB(t,e,n,r){let{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,Ki);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=t.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function Nee(t,e,n,r,i){let s=t.ctx,o=e.circular,{color:a,lineWidth:c}=e;!o&&!r||!a||!c||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=c,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),DB(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function kee(t,e,n){return Sc(t,{label:n,index:e,type:"pointLabel"})}var cB=class extends Lu{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Kf.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=Qi(BA(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){let{min:e,max:n}=this.getMinMax(!1);this.min=nn(e)&&!isNaN(e)?e:0,this.max=nn(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/BA(this.options))}generateTickLabels(e){Lu.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{let i=vt(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){let e=this.options;e.display&&e.pointLabels.display?wee(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){let n=Ki/(this._pointLabels.length||1),r=this.options.startAngle||0;return hi(e*n+qs(r))}getDistanceFromCenterForValue(e){if(dt(e))return NaN;let n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(dt(e))return NaN;let n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){let n=this._pointLabels||[];if(e>=0&&e<n.length){let r=n[e];return kee(this.getContext(),e,r)}}getPointPosition(e,n,r=0){let i=this.getIndexAngle(e)-Yi+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:s}}drawBackground(){let{backgroundColor:e,grid:{circular:n}}=this.options;if(e){let r=this.ctx;r.save(),r.beginPath(),DB(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){let e=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length,a,c,l;if(n.pointLabels.display&&Mee(this,o),i.display&&this.ticks.forEach((d,h)=>{if(h!==0||h===0&&this.min<0){c=this.getDistanceFromCenterForValue(d.value);let p=this.getContext(h),g=i.setContext(p),v=s.setContext(p);Nee(this,g,c,o,v)}}),r.display){for(e.save(),a=o-1;a>=0;a--){let d=r.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:p}=d;!p||!h||(e.lineWidth=p,e.strokeStyle=h,e.setLineDash(d.borderDash),e.lineDashOffset=d.borderDashOffset,c=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),l=this.getPointPosition(a,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;let i=this.getIndexAngle(0),s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&this.min>=0&&!n.reverse)return;let l=r.setContext(this.getContext(c)),d=Cc(l.font);if(s=this.getDistanceFromCenterForValue(this.ticks[c].value),l.showLabelBackdrop){e.font=d.string,o=e.measureText(a.label).width,e.fillStyle=l.backdropColor;let h=Qi(l.backdropPadding);e.fillRect(-o/2-h.left,-s-d.size/2-h.top,o+h.width,d.size+h.height)}Yf(e,a.label,0,-s,d,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),e.restore()}drawTitle(){}},Hv={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},rr=Object.keys(Hv);function lB(t,e){return t-e}function uB(t,e){if(dt(e))return null;let n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts,o=e;return typeof r=="function"&&(o=r(o)),nn(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Gf(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function dB(t,e,n,r){let i=rr.length;for(let s=rr.indexOf(t);s<i-1;++s){let o=Hv[rr[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return rr[s]}return rr[i-1]}function Pee(t,e,n,r,i){for(let s=rr.length-1;s>=rr.indexOf(n);s--){let o=rr[s];if(Hv[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return rr[n?rr.indexOf(n):0]}function Oee(t){for(let e=rr.indexOf(t)+1,n=rr.length;e<n;++e)if(Hv[rr[e]].common)return rr[e]}function hB(t,e,n){if(!n)t[e]=!0;else if(n.length){let{lo:r,hi:i}=Iv(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function Fee(t,e,n,r){let i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value,a,c;for(a=s;a<=o;a=+i.add(a,1,r))c=n[a],c>=0&&(e[c].major=!0);return e}function fB(t,e,n){let r=[],i={},s=e.length,o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:Fee(t,r,i,n)}var pB=(()=>{class t extends Fu{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(n){super(n),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(n,r={}){let i=n.time||(n.time={}),s=this._adapter=new pJ._date(n.adapters.date);s.init(r),Pu(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(n),this._normalized=r.normalized}parse(n,r){return n===void 0?null:uB(this,n)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let n=this.options,r=this._adapter,i=n.time.unit||"day",{min:s,max:o,minDefined:a,maxDefined:c}=this.getUserBounds();function l(d){!a&&!isNaN(d.min)&&(s=Math.min(s,d.min)),!c&&!isNaN(d.max)&&(o=Math.max(o,d.max))}(!a||!c)&&(l(this._getLabelBounds()),(n.bounds!=="ticks"||n.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=nn(s)&&!isNaN(s)?s:+r.startOf(Date.now(),i),o=nn(o)&&!isNaN(o)?o:+r.endOf(Date.now(),i)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){let n=this.getLabelTimestamps(),r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return n.length&&(r=n[0],i=n[n.length-1]),{min:r,max:i}}buildTicks(){let n=this.options,r=n.time,i=n.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();n.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let o=this.min,a=this.max,c=hj(s,o,a);return this._unit=r.unit||(i.autoSkip?dB(r.minUnit,this.min,this.max,this._getLabelCapacity(o)):Pee(this,c.length,r.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:Oee(this._unit),this.initOffsets(s),n.reverse&&c.reverse(),fB(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(n=>+n.value))}initOffsets(n=[]){let r=0,i=0,s,o;this.options.offset&&n.length&&(s=this.getDecimalForValue(n[0]),n.length===1?r=1-s:r=(this.getDecimalForValue(n[1])-s)/2,o=this.getDecimalForValue(n[n.length-1]),n.length===1?i=o:i=(o-this.getDecimalForValue(n[n.length-2]))/2);let a=n.length<3?.5:.25;r=Qo(r,0,a),i=Qo(i,0,a),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){let n=this._adapter,r=this.min,i=this.max,s=this.options,o=s.time,a=o.unit||dB(o.minUnit,r,i,this._getLabelCapacity(r)),c=St(s.ticks.stepSize,1),l=a==="week"?o.isoWeekday:!1,d=Gf(l)||l===!0,h={},p=r,g,v;if(d&&(p=+n.startOf(p,"isoWeek",l)),p=+n.startOf(p,d?"day":a),n.diff(i,r,a)>1e5*c)throw new Error(r+" and "+i+" are too far apart with stepSize of "+c+" "+a);let S=s.ticks.source==="data"&&this.getDataTimestamps();for(g=p,v=0;g<i;g=+n.add(g,c,a),v++)hB(h,g,S);return(g===i||s.bounds==="ticks"||v===1)&&hB(h,g,S),Object.keys(h).sort(lB).map(C=>+C)}getLabelForValue(n){let r=this._adapter,i=this.options.time;return i.tooltipFormat?r.format(n,i.tooltipFormat):r.format(n,i.displayFormats.datetime)}format(n,r){let s=this.options.time.displayFormats,o=this._unit,a=r||s[o];return this._adapter.format(n,a)}_tickFormatFunction(n,r,i,s){let o=this.options,a=o.ticks.callback;if(a)return vt(a,[n,r,i],this);let c=o.time.displayFormats,l=this._unit,d=this._majorUnit,h=l&&c[l],p=d&&c[d],g=i[r],v=d&&p&&g&&g.major;return this._adapter.format(n,s||(v?p:h))}generateTickLabels(n){let r,i,s;for(r=0,i=n.length;r<i;++r)s=n[r],s.label=this._tickFormatFunction(s.value,r,n)}getDecimalForValue(n){return n===null?NaN:(n-this.min)/(this.max-this.min)}getPixelForValue(n){let r=this._offsets,i=this.getDecimalForValue(n);return this.getPixelForDecimal((r.start+i)*r.factor)}getValueForPixel(n){let r=this._offsets,i=this.getDecimalForPixel(n)/r.factor-r.end;return this.min+i*(this.max-this.min)}_getLabelSize(n){let r=this.options.ticks,i=this.ctx.measureText(n).width,s=qs(this.isHorizontal()?r.maxRotation:r.minRotation),o=Math.cos(s),a=Math.sin(s),c=this._resolveTickFontOptions(0).size;return{w:i*o+c*a,h:i*a+c*o}}_getLabelCapacity(n){let r=this.options.time,i=r.displayFormats,s=i[r.unit]||i.millisecond,o=this._tickFormatFunction(n,0,fB(this,[n],this._majorUnit),s),a=this._getLabelSize(o),c=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return c>0?c:1}getDataTimestamps(){let n=this._cache.data||[],r,i;if(n.length)return n;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(r=0,i=s.length;r<i;++r)n=n.concat(s[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){let n=this._cache.labels||[],r,i;if(n.length)return n;let s=this.getLabels();for(r=0,i=s.length;r<i;++r)n.push(uB(this,s[r]));return this._cache.labels=this._normalized?n:this.normalize(n)}normalize(n){return gj(n.sort(lB))}}return t})();function Ov(t,e,n){let r=0,i=t.length-1,s,o,a,c;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=Tv(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:c}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=Tv(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:c}=t[i]);let l=o-s;return l?a+(c-a)*(e-s)/l:a}var gB=class extends pB{static id="timeseries";static defaults=pB.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Ov(n,this.min),this._tableRange=Ov(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:n,max:r}=this,i=[],s=[],o,a,c,l,d;for(o=0,a=e.length;o<a;++o)l=e[o],l>=n&&l<=r&&i.push(l);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)d=i[o+1],c=i[o-1],l=i[o],Math.round((d+c)/2)!==l&&s.push({time:l,pos:o/(a-1)});return s}_generate(){let e=this.min,n=this.max,r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Ov(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Ov(this._table,r*this._tableRange+this._minPos,!0)}};var Lee=typeof global=="object"&&global&&global.Object===Object&&global,$v=Lee;var Vee=typeof self=="object"&&self&&self.Object===Object&&self,jee=$v||Vee||Function("return this")(),Vr=jee;var Bee=Vr.Symbol,Vu=Bee;var CB=Object.prototype,Uee=CB.hasOwnProperty,Hee=CB.toString,op=Vu?Vu.toStringTag:void 0;function $ee(t){var e=Uee.call(t,op),n=t[op];try{t[op]=void 0;var r=!0}catch{}var i=Hee.call(t);return r&&(e?t[op]=n:delete t[op]),i}var SB=$ee;var zee=Object.prototype,Wee=zee.toString;function qee(t){return Wee.call(t)}var AB=qee;var Gee="[object Null]",Kee="[object Undefined]",xB=Vu?Vu.toStringTag:void 0;function Yee(t){return t==null?t===void 0?Kee:Gee:xB&&xB in Object(t)?SB(t):AB(t)}var ea=Yee;function Qee(t){return t!=null&&typeof t=="object"}var Xi=Qee;var Zee=Array.isArray,ap=Zee;function Xee(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var ir=Xee;function Jee(t){return t}var zv=Jee;var ete="[object AsyncFunction]",tte="[object Function]",nte="[object GeneratorFunction]",rte="[object Proxy]";function ite(t){if(!ir(t))return!1;var e=ea(t);return e==tte||e==nte||e==ete||e==rte}var ju=ite;var ste=Vr["__core-js_shared__"],Wv=ste;var RB=(function(){var t=/[^.]+$/.exec(Wv&&Wv.keys&&Wv.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function ote(t){return!!RB&&RB in t}var MB=ote;var ate=Function.prototype,cte=ate.toString;function lte(t){if(t!=null){try{return cte.call(t)}catch{}try{return t+""}catch{}}return""}var NB=lte;var ute=/[\\^$.*+?()[\]{}|]/g,dte=/^\[object .+?Constructor\]$/,hte=Function.prototype,fte=Object.prototype,pte=hte.toString,gte=fte.hasOwnProperty,mte=RegExp("^"+pte.call(gte).replace(ute,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function yte(t){if(!ir(t)||MB(t))return!1;var e=ju(t)?mte:dte;return e.test(NB(t))}var kB=yte;function _te(t,e){return t?.[e]}var PB=_te;function vte(t,e){var n=PB(t,e);return kB(n)?n:void 0}var Bu=vte;var OB=Object.create,bte=(function(){function t(){}return function(e){if(!ir(e))return{};if(OB)return OB(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}})(),FB=bte;function Ete(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var LB=Ete;function wte(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var VB=wte;var Ite=800,Tte=16,Dte=Date.now;function Cte(t){var e=0,n=0;return function(){var r=Dte(),i=Tte-(r-n);if(n=r,i>0){if(++e>=Ite)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var jB=Cte;function Ste(t){return function(){return t}}var BB=Ste;var Ate=(function(){try{var t=Bu(Object,"defineProperty");return t({},"",{}),t}catch{}})(),Uu=Ate;var xte=Uu?function(t,e){return Uu(t,"toString",{configurable:!0,enumerable:!1,value:BB(e),writable:!0})}:zv,UB=xte;var Rte=jB(UB),HB=Rte;var Mte=9007199254740991,Nte=/^(?:0|[1-9]\d*)$/;function kte(t,e){var n=typeof t;return e=e??Mte,!!e&&(n=="number"||n!="symbol"&&Nte.test(t))&&t>-1&&t%1==0&&t<e}var qv=kte;function Pte(t,e,n){e=="__proto__"&&Uu?Uu(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var Hu=Pte;function Ote(t,e){return t===e||t!==t&&e!==e}var ta=Ote;var Fte=Object.prototype,Lte=Fte.hasOwnProperty;function Vte(t,e,n){var r=t[e];(!(Lte.call(t,e)&&ta(r,n))||n===void 0&&!(e in t))&&Hu(t,e,n)}var $B=Vte;function jte(t,e,n,r){var i=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],c=r?r(n[a],t[a],a,n,t):void 0;c===void 0&&(c=t[a]),i?Hu(n,a,c):$B(n,a,c)}return n}var zB=jte;var WB=Math.max;function Bte(t,e,n){return e=WB(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=WB(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(o),LB(t,this,a)}}var qB=Bte;function Ute(t,e){return HB(qB(t,e,zv),t+"")}var GB=Ute;var Hte=9007199254740991;function $te(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Hte}var Gv=$te;function zte(t){return t!=null&&Gv(t.length)&&!ju(t)}var $u=zte;function Wte(t,e,n){if(!ir(n))return!1;var r=typeof e;return(r=="number"?$u(n)&&qv(e,n.length):r=="string"&&e in n)?ta(n[e],t):!1}var KB=Wte;function qte(t){return GB(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&KB(n[0],n[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a,r,s)}return e})}var YB=qte;var Gte=Object.prototype;function Kte(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Gte;return t===n}var Kv=Kte;function Yte(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var QB=Yte;var Qte="[object Arguments]";function Zte(t){return Xi(t)&&ea(t)==Qte}var UA=Zte;var ZB=Object.prototype,Xte=ZB.hasOwnProperty,Jte=ZB.propertyIsEnumerable,ene=UA((function(){return arguments})())?UA:function(t){return Xi(t)&&Xte.call(t,"callee")&&!Jte.call(t,"callee")},cp=ene;function tne(){return!1}var XB=tne;var tU=typeof exports=="object"&&exports&&!exports.nodeType&&exports,JB=tU&&typeof module=="object"&&module&&!module.nodeType&&module,nne=JB&&JB.exports===tU,eU=nne?Vr.Buffer:void 0,rne=eU?eU.isBuffer:void 0,ine=rne||XB,Yv=ine;var sne="[object Arguments]",one="[object Array]",ane="[object Boolean]",cne="[object Date]",lne="[object Error]",une="[object Function]",dne="[object Map]",hne="[object Number]",fne="[object Object]",pne="[object RegExp]",gne="[object Set]",mne="[object String]",yne="[object WeakMap]",_ne="[object ArrayBuffer]",vne="[object DataView]",bne="[object Float32Array]",Ene="[object Float64Array]",wne="[object Int8Array]",Ine="[object Int16Array]",Tne="[object Int32Array]",Dne="[object Uint8Array]",Cne="[object Uint8ClampedArray]",Sne="[object Uint16Array]",Ane="[object Uint32Array]",ht={};ht[bne]=ht[Ene]=ht[wne]=ht[Ine]=ht[Tne]=ht[Dne]=ht[Cne]=ht[Sne]=ht[Ane]=!0;ht[sne]=ht[one]=ht[_ne]=ht[ane]=ht[vne]=ht[cne]=ht[lne]=ht[une]=ht[dne]=ht[hne]=ht[fne]=ht[pne]=ht[gne]=ht[mne]=ht[yne]=!1;function xne(t){return Xi(t)&&Gv(t.length)&&!!ht[ea(t)]}var nU=xne;function Rne(t){return function(e){return t(e)}}var rU=Rne;var iU=typeof exports=="object"&&exports&&!exports.nodeType&&exports,lp=iU&&typeof module=="object"&&module&&!module.nodeType&&module,Mne=lp&&lp.exports===iU,HA=Mne&&$v.process,Nne=(function(){try{var t=lp&&lp.require&&lp.require("util").types;return t||HA&&HA.binding&&HA.binding("util")}catch{}})(),$A=Nne;var sU=$A&&$A.isTypedArray,kne=sU?rU(sU):nU,Qv=kne;var Pne=Object.prototype,One=Pne.hasOwnProperty;function Fne(t,e){var n=ap(t),r=!n&&cp(t),i=!n&&!r&&Yv(t),s=!n&&!r&&!i&&Qv(t),o=n||r||i||s,a=o?QB(t.length,String):[],c=a.length;for(var l in t)(e||One.call(t,l))&&!(o&&(l=="length"||i&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||qv(l,c)))&&a.push(l);return a}var oU=Fne;function Lne(t,e){return function(n){return t(e(n))}}var aU=Lne;function Vne(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var cU=Vne;var jne=Object.prototype,Bne=jne.hasOwnProperty;function Une(t){if(!ir(t))return cU(t);var e=Kv(t),n=[];for(var r in t)r=="constructor"&&(e||!Bne.call(t,r))||n.push(r);return n}var lU=Une;function Hne(t){return $u(t)?oU(t,!0):lU(t)}var Zv=Hne;var $ne=Bu(Object,"create"),Ks=$ne;function zne(){this.__data__=Ks?Ks(null):{},this.size=0}var uU=zne;function Wne(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var dU=Wne;var qne="__lodash_hash_undefined__",Gne=Object.prototype,Kne=Gne.hasOwnProperty;function Yne(t){var e=this.__data__;if(Ks){var n=e[t];return n===qne?void 0:n}return Kne.call(e,t)?e[t]:void 0}var hU=Yne;var Qne=Object.prototype,Zne=Qne.hasOwnProperty;function Xne(t){var e=this.__data__;return Ks?e[t]!==void 0:Zne.call(e,t)}var fU=Xne;var Jne="__lodash_hash_undefined__";function ere(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ks&&e===void 0?Jne:e,this}var pU=ere;function zu(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}zu.prototype.clear=uU;zu.prototype.delete=dU;zu.prototype.get=hU;zu.prototype.has=fU;zu.prototype.set=pU;var zA=zu;function tre(){this.__data__=[],this.size=0}var gU=tre;function nre(t,e){for(var n=t.length;n--;)if(ta(t[n][0],e))return n;return-1}var na=nre;var rre=Array.prototype,ire=rre.splice;function sre(t){var e=this.__data__,n=na(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():ire.call(e,n,1),--this.size,!0}var mU=sre;function ore(t){var e=this.__data__,n=na(e,t);return n<0?void 0:e[n][1]}var yU=ore;function are(t){return na(this.__data__,t)>-1}var _U=are;function cre(t,e){var n=this.__data__,r=na(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var vU=cre;function Wu(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Wu.prototype.clear=gU;Wu.prototype.delete=mU;Wu.prototype.get=yU;Wu.prototype.has=_U;Wu.prototype.set=vU;var ra=Wu;var lre=Bu(Vr,"Map"),Xv=lre;function ure(){this.size=0,this.__data__={hash:new zA,map:new(Xv||ra),string:new zA}}var bU=ure;function dre(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var EU=dre;function hre(t,e){var n=t.__data__;return EU(e)?n[typeof e=="string"?"string":"hash"]:n.map}var ia=hre;function fre(t){var e=ia(this,t).delete(t);return this.size-=e?1:0,e}var wU=fre;function pre(t){return ia(this,t).get(t)}var IU=pre;function gre(t){return ia(this,t).has(t)}var TU=gre;function mre(t,e){var n=ia(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var DU=mre;function qu(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}qu.prototype.clear=bU;qu.prototype.delete=wU;qu.prototype.get=IU;qu.prototype.has=TU;qu.prototype.set=DU;var CU=qu;var yre=aU(Object.getPrototypeOf,Object),Jv=yre;var _re="[object Object]",vre=Function.prototype,bre=Object.prototype,SU=vre.toString,Ere=bre.hasOwnProperty,wre=SU.call(Object);function Ire(t){if(!Xi(t)||ea(t)!=_re)return!1;var e=Jv(t);if(e===null)return!0;var n=Ere.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&SU.call(n)==wre}var AU=Ire;function Tre(){this.__data__=new ra,this.size=0}var xU=Tre;function Dre(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var RU=Dre;function Cre(t){return this.__data__.get(t)}var MU=Cre;function Sre(t){return this.__data__.has(t)}var NU=Sre;var Are=200;function xre(t,e){var n=this.__data__;if(n instanceof ra){var r=n.__data__;if(!Xv||r.length<Are-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new CU(r)}return n.set(t,e),this.size=n.size,this}var kU=xre;function Gu(t){var e=this.__data__=new ra(t);this.size=e.size}Gu.prototype.clear=xU;Gu.prototype.delete=RU;Gu.prototype.get=MU;Gu.prototype.has=NU;Gu.prototype.set=kU;var PU=Gu;var VU=typeof exports=="object"&&exports&&!exports.nodeType&&exports,OU=VU&&typeof module=="object"&&module&&!module.nodeType&&module,Rre=OU&&OU.exports===VU,FU=Rre?Vr.Buffer:void 0,LU=FU?FU.allocUnsafe:void 0;function Mre(t,e){if(e)return t.slice();var n=t.length,r=LU?LU(n):new t.constructor(n);return t.copy(r),r}var jU=Mre;var Nre=Vr.Uint8Array,WA=Nre;function kre(t){var e=new t.constructor(t.byteLength);return new WA(e).set(new WA(t)),e}var BU=kre;function Pre(t,e){var n=e?BU(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var UU=Pre;function Ore(t){return typeof t.constructor=="function"&&!Kv(t)?FB(Jv(t)):{}}var HU=Ore;function Fre(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var c=o[t?a:++i];if(n(s[c],c,s)===!1)break}return e}}var $U=Fre;var Lre=$U(),zU=Lre;function Vre(t,e,n){(n!==void 0&&!ta(t[e],n)||n===void 0&&!(e in t))&&Hu(t,e,n)}var up=Vre;function jre(t){return Xi(t)&&$u(t)}var WU=jre;function Bre(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var dp=Bre;function Ure(t){return zB(t,Zv(t))}var qU=Ure;function Hre(t,e,n,r,i,s,o){var a=dp(t,n),c=dp(e,n),l=o.get(c);if(l){up(t,n,l);return}var d=s?s(a,c,n+"",t,e,o):void 0,h=d===void 0;if(h){var p=ap(c),g=!p&&Yv(c),v=!p&&!g&&Qv(c);d=c,p||g||v?ap(a)?d=a:WU(a)?d=VB(a):g?(h=!1,d=jU(c,!0)):v?(h=!1,d=UU(c,!0)):d=[]:AU(c)||cp(c)?(d=a,cp(a)?d=qU(a):(!ir(a)||ju(a))&&(d=HU(c))):h=!1}h&&(o.set(c,d),i(d,c,r,s,o),o.delete(c)),up(t,n,d)}var GU=Hre;function KU(t,e,n,r,i){t!==e&&zU(e,function(s,o){if(i||(i=new PU),ir(s))GU(t,e,o,n,KU,r,i);else{var a=r?r(dp(t,o),s,o+"",t,e,i):void 0;a===void 0&&(a=s),up(t,o,a)}},Zv)}var YU=KU;var $re=YB(function(t,e,n){YU(t,e,n)}),qA=$re;var zre=new te("Configuration for ngCharts");var Wre=(()=>{let e=class e{constructor(){this.colorschemesOptions=new It(void 0)}setColorschemesOptions(r){this.pColorschemesOptions=r,this.colorschemesOptions.next(r)}getColorschemesOptions(){return this.pColorschemesOptions}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),QU=(()=>{let e=class e{constructor(r,i,s,o){this.zone=i,this.themeService=s,this.type="bar",this.plugins=[],this.chartClick=new pt,this.chartHover=new pt,this.subs=[],this.themeOverrides={},o?.registerables&&Uv.register(...o.registerables),o?.defaults&&yt.set(o.defaults),this.ctx=r.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe(lE()).subscribe(a=>this.themeChanged(a)))}ngOnChanges(r){let i=["type"],s=Object.getOwnPropertyNames(r);if(s.some(o=>i.includes(o))||s.every(o=>r[o].isFirstChange()))this.render();else{let o=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,o.data),this.chart.config.plugins&&Object.assign(this.chart.config.plugins,o.plugins),this.chart.config.options&&Object.assign(this.chart.config.options,o.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(r=>r.unsubscribe())}render(){return this.chart&&this.chart.destroy(),this.zone.runOutsideAngular(()=>this.chart=new Uv(this.ctx,this.getChartConfiguration()))}update(r){this.chart&&this.zone.runOutsideAngular(()=>this.chart?.update(r))}hideDataset(r,i){this.chart&&(this.chart.getDatasetMeta(r).hidden=i,this.update())}isDatasetHidden(r){return this.chart?.getDatasetMeta(r)?.hidden}toBase64Image(){return this.chart?.toBase64Image()}themeChanged(r){this.themeOverrides=r,this.chart&&(this.chart.config.options&&Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return qA({onHover:(r,i)=>{!this.chartHover.observed&&!this.chartHover.observers?.length||this.zone.run(()=>this.chartHover.emit({event:r,active:i}))},onClick:(r,i)=>{!this.chartClick.observed&&!this.chartClick.observers?.length||this.zone.run(()=>this.chartClick.emit({event:r,active:i}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),options:this.getChartOptions(),plugins:this.plugins}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}};e.\u0275fac=function(i){return new(i||e)(Z(Zt),Z(Le),Z(Wre),Z(zre,8))},e.\u0275dir=Ze({type:e,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[Sr]});let t=e;return t})();var GA=t=>({display:t}),sa=class t{constructor(e,n,r){this.auth=e;this.firestore=n;this.router=r}isAuth=!1;userName="Loading...";userPhotoUrl=null;userRole="viewer";ngOnInit(){Ui(this.auth,async e=>{if(e){this.isAuth=!0,this.userName=e.displayName||e.email||"User",this.userPhotoUrl=e.photoURL;let n=tn(this.firestore,"users",e.uid),r=await Go(n);r.exists()?this.userRole=r.data().role||"viewer":(console.warn("User document not found. Defaulting to viewer role."),this.userRole="viewer")}else this.isAuth=!1,this.userName="Guest",this.userPhotoUrl=null,this.userRole="viewer"})}async signOut(){try{await l_(this.auth),this.router.navigate(["/login"])}catch(e){console.error("Error signing out:",e)}}static \u0275fac=function(n){return new(n||t)(Z(en),Z(bn),Z(Pt))};static \u0275cmp=Bn({type:t,selectors:[["app-navigation"]],decls:32,vars:11,consts:[["id","navbar",1,"navbar","navbar-expand-lg","navbar-dark","bg-primary",3,"ngStyle"],[1,"container"],["routerLink","/dashboard",1,"navbar-brand"],[1,"fas","fa-calendar-alt","me-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto"],[1,"nav-item"],["routerLink","/dashboard","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-home","me-1"],["routerLink","/transactions","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-exchange-alt","me-1"],[1,"nav-item",3,"ngStyle"],["routerLink","/members","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-users","me-1"],[1,"navbar-nav"],[1,"nav-item","dropdown"],["href","#","id","userDropdown","role","button","data-bs-toggle","dropdown",1,"nav-link","dropdown-toggle","d-flex","align-items-center"],["alt","User","width","32","height","32",1,"rounded-circle","me-2",3,"src","ngStyle"],["id","userName"],[1,"dropdown-menu","dropdown-menu-end"],["href","#",1,"dropdown-item",3,"click"],[1,"fas","fa-sign-out-alt","me-2"]],template:function(n,r){n&1&&(A(0,"nav",0)(1,"div",1)(2,"a",2),ne(3,"i",3),P(4," Festival Ledger "),x(),A(5,"button",4),ne(6,"span",5),x(),A(7,"div",6)(8,"ul",7)(9,"li",8)(10,"a",9),ne(11,"i",10),P(12,"Dashboard "),x()(),A(13,"li",8)(14,"a",11),ne(15,"i",12),P(16,"Transactions "),x()(),A(17,"li",13)(18,"a",14),ne(19,"i",15),P(20,"Members "),x()()(),A(21,"div",16)(22,"div",17)(23,"a",18),ne(24,"img",19),A(25,"span",20),P(26),x()(),A(27,"ul",21)(28,"li")(29,"a",22),qe("click",function(){return r.signOut()}),ne(30,"i",23),P(31,"Sign Out "),x()()()()()()()()),n&2&&(le("ngStyle",ah(5,GA,r.isAuth?"block":"none")),$(17),le("ngStyle",ah(7,GA,(r.userRole==="admin","block"))),$(7),le("src",r.userPhotoUrl,ys)("ngStyle",ah(9,GA,r.userPhotoUrl?"block":"none")),$(2),Ar(r.userName))},dependencies:[Mr,l0,Bh,Co,Q0],encapsulation:2})};var rH="firebasestorage.googleapis.com",iH="storageBucket",qre=120*1e3,Gre=600*1e3;var xt=class t extends Rn{constructor(e,n,r=0){super(KA(e),`Firebase Storage: ${n} (${KA(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return KA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Ot=(function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t})(Ot||{});function KA(t){return"storage/"+t}function ex(){let t="An unknown error occurred, please check the error payload for server response.";return new xt(Ot.UNKNOWN,t)}function Kre(t){return new xt(Ot.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Yre(t){return new xt(Ot.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Qre(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new xt(Ot.UNAUTHENTICATED,t)}function Zre(){return new xt(Ot.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Xre(t){return new xt(Ot.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Jre(){return new xt(Ot.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function eie(){return new xt(Ot.CANCELED,"User canceled the upload/download.")}function tie(t){return new xt(Ot.INVALID_URL,"Invalid URL '"+t+"'.")}function nie(t){return new xt(Ot.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function rie(){return new xt(Ot.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+iH+"' property when initializing the app?")}function iie(){return new xt(Ot.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function sie(){return new xt(Ot.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function oie(t){return new xt(Ot.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function YA(t){return new xt(Ot.INVALID_ARGUMENT,t)}function sH(){return new xt(Ot.APP_DELETED,"The Firebase app was deleted.")}function aie(t){return new xt(Ot.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fp(t,e){return new xt(Ot.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function hp(t){throw new xt(Ot.INTERNAL_ERROR,"Internal error: "+t)}var fi=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw nie(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(z){z.path.charAt(z.path.length-1)==="/"&&(z.path_=z.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(z){z.path_=decodeURIComponent(z.path)}let d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",g=new RegExp(`^https?://${h}/${d}/b/${i}/o${p}`,"i"),v={bucket:1,path:3},S=n===rH?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",k=new RegExp(`^https?://${S}/${i}/${C}`,"i"),F=[{regex:a,indices:c,postModify:s},{regex:g,indices:v,postModify:l},{regex:k,indices:{bucket:1,path:2},postModify:l}];for(let z=0;z<F.length;z++){let W=F[z],K=W.regex.exec(e);if(K){let I=K[W.indices.bucket],_=K[W.indices.path];_||(_=""),r=new t(I,_),W.postModify(r);break}}if(r==null)throw tie(e);return r}},QA=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function cie(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function d(...C){l||(l=!0,e.apply(null,C))}function h(C){i=setTimeout(()=>{i=null,t(g,c())},C)}function p(){s&&clearTimeout(s)}function g(C,...k){if(l){p();return}if(C){p(),d.call(null,C,...k);return}if(c()||o){p(),d.call(null,C,...k);return}r<64&&(r*=2);let F;a===1?(a=2,F=0):F=(r+Math.random())*1e3,h(F)}let v=!1;function S(C){v||(v=!0,p(),!l&&(i!==null?(C||(a=2),clearTimeout(i),h(0)):C||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,S(!0)},n),S}function lie(t){t(!1)}function uie(t){return t!==void 0}function die(t){return typeof t=="object"&&!Array.isArray(t)}function tx(t){return typeof t=="string"||t instanceof String}function ZU(t){return nx()&&t instanceof Blob}function nx(){return typeof Blob<"u"}function XU(t,e,n,r){if(r<e)throw YA(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw YA(`Invalid value for '${t}'. Expected ${n} or less.`)}function rx(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function oH(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Yu=(function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t})(Yu||{});function hie(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}var ZA=class{constructor(e,n,r,i,s,o,a,c,l,d,h,p=!0,g=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=d,this.connectionFactory_=h,this.retry=p,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,S)=>{this.resolve_=v,this.reject_=S,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Ku(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===Yu.NO_ERROR,c=s.getStatus();if(!a||hie(c,this.additionalRetryCodes_)&&this.retry){let d=s.getErrorCode()===Yu.ABORT;r(!1,new Ku(!1,null,d));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new Ku(l,s))})},n=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());uie(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=ex();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?sH():eie();o(c)}else{let c=Jre();o(c)}};this.canceled_?n(!1,new Ku(!1,null,!0)):this.backoffId_=cie(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&lie(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Ku=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function fie(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function pie(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function gie(t,e){e&&(t["X-Firebase-GMPID"]=e)}function mie(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function yie(t,e,n,r,i,s,o=!0,a=!1){let c=oH(t.urlParams),l=t.url+c,d=Object.assign({},t.headers);return gie(d,e),fie(d,n),pie(d,s),mie(d,r),new ZA(l,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}function _ie(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function vie(...t){let e=_ie();if(e!==void 0){let n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(nx())return new Blob(t);throw new xt(Ot.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function bie(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function Eie(t){if(typeof atob>"u")throw oie("base-64");return atob(t)}var Ji={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},pp=class{constructor(e,n){this.data=e,this.contentType=n||null}};function wie(t,e){switch(t){case Ji.RAW:return new pp(aH(e));case Ji.BASE64:case Ji.BASE64URL:return new pp(cH(t,e));case Ji.DATA_URL:return new pp(Tie(e),Die(e))}throw ex()}function aH(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Iie(t){let e;try{e=decodeURIComponent(t)}catch{throw fp(Ji.DATA_URL,"Malformed data URL.")}return aH(e)}function cH(t,e){switch(t){case Ji.BASE64:{let i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw fp(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ji.BASE64URL:{let i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw fp(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Eie(e)}catch(i){throw i.message.includes("polyfill")?i:fp(t,"Invalid character found")}let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}var tb=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw fp(Ji.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=n[1]||null;r!=null&&(this.base64=Cie(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function Tie(t){let e=new tb(t);return e.base64?cH(Ji.BASE64,e.rest):Iie(e.rest)}function Die(t){return new tb(t).contentType}function Cie(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var nb=class t{constructor(e,n){let r=0,i="";ZU(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(ZU(this.data_)){let r=this.data_,i=bie(r,e,n);return i===null?null:new t(i)}else{let r=new Uint8Array(this.data_.buffer,e,n-e);return new t(r,!0)}}static getBlob(...e){if(nx()){let n=e.map(r=>r instanceof t?r.data_:r);return new t(vie.apply(null,n))}else{let n=e.map(o=>tx(o)?wie(Ji.RAW,o).data:o.data_),r=0;n.forEach(o=>{r+=o.byteLength});let i=new Uint8Array(r),s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new t(i,!0)}}uploadData(){return this.data_}};function lH(t){let e;try{e=JSON.parse(t)}catch{return null}return die(e)?e:null}function Sie(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Aie(t,e){let n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function uH(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function xie(t,e){return e}var wn=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||xie}},eb=null;function Rie(t){return!tx(t)||t.length<2?t:uH(t)}function dH(){if(eb)return eb;let t=[];t.push(new wn("bucket")),t.push(new wn("generation")),t.push(new wn("metageneration")),t.push(new wn("name","fullPath",!0));function e(s,o){return Rie(o)}let n=new wn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}let i=new wn("size");return i.xform=r,t.push(i),t.push(new wn("timeCreated")),t.push(new wn("updated")),t.push(new wn("md5Hash",null,!0)),t.push(new wn("cacheControl",null,!0)),t.push(new wn("contentDisposition",null,!0)),t.push(new wn("contentEncoding",null,!0)),t.push(new wn("contentLanguage",null,!0)),t.push(new wn("contentType",null,!0)),t.push(new wn("metadata","customMetadata",!0)),eb=t,eb}function Mie(t,e){function n(){let r=t.bucket,i=t.fullPath,s=new fi(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function Nie(t,e,n){let r={};r.type="file";let i=n.length;for(let s=0;s<i;s++){let o=n[s];r[o.local]=o.xform(r,e[o.server])}return Mie(r,t),r}function hH(t,e,n){let r=lH(e);return r===null?null:Nie(t,r,n)}function kie(t,e,n,r){let i=lH(e);if(i===null||!tx(i.downloadTokens))return null;let s=i.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(l=>{let d=t.bucket,h=t.fullPath,p="/b/"+o(d)+"/o/"+o(h),g=rx(p,n,r),v=oH({alt:"media",token:l});return g+v})[0]}function Pie(t,e){let n={},r=e.length;for(let i=0;i<r;i++){let s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}var rb=class{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function fH(t){if(!t)throw ex()}function Oie(t,e){function n(r,i){let s=hH(t,i,e);return fH(s!==null),s}return n}function Fie(t,e){function n(r,i){let s=hH(t,i,e);return fH(s!==null),kie(s,i,t.host,t._protocol)}return n}function pH(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Zre():i=Qre():n.getStatus()===402?i=Yre(t.bucket):n.getStatus()===403?i=Xre(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Lie(t){let e=pH(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=Kre(t.path)),s.serverResponse=i.serverResponse,s}return n}function Vie(t,e,n){let r=e.fullServerUrl(),i=rx(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new rb(i,s,Fie(t,n),o);return a.errorHandler=Lie(e),a}function jie(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Bie(t,e,n){let r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=jie(null,e)),r}function Uie(t,e,n,r,i){let s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let F="";for(let z=0;z<2;z++)F=F+Math.random().toString().slice(2);return F}let c=a();o["Content-Type"]="multipart/related; boundary="+c;let l=Bie(e,r,i),d=Pie(l,n),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+l.contentType+`\r
\r
`,p=`\r
--`+c+"--",g=nb.getBlob(h,r,p);if(g===null)throw iie();let v={name:l.fullPath},S=rx(s,t.host,t._protocol),C="POST",k=t.maxUploadRetryTime,O=new rb(S,C,Oie(t,n),k);return O.urlParams=v,O.headers=o,O.body=g.uploadData(),O.errorHandler=pH(e),O}var SMe=256*1024;var JU=null,XA=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Yu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Yu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw hp("cannot .send() more than once");if(ri(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(let o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw hp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw hp("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw hp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw hp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},JA=class extends XA{initXhr(){this.xhr_.responseType="text"}};function gH(){return JU?JU():new JA}var Qu=class t{constructor(e,n){this._service=e,n instanceof fi?this._location=n:this._location=fi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new fi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return uH(this._location.path)}get storage(){return this._service}get parent(){let e=Sie(this._location.path);if(e===null)return null;let n=new fi(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw aie(e)}};function Hie(t,e,n){t._throwIfRoot("uploadBytes");let r=Uie(t.storage,t._location,dH(),new nb(e,!0),n);return t.storage.makeRequestWithTokens(r,gH).then(i=>({metadata:i,ref:t}))}function $ie(t){t._throwIfRoot("getDownloadURL");let e=Vie(t.storage,t._location,dH());return t.storage.makeRequestWithTokens(e,gH).then(n=>{if(n===null)throw sie();return n})}function zie(t,e){let n=Aie(t._location.path,e),r=new fi(t._location.bucket,n);return new Qu(t.storage,r)}function Wie(t){return/^[A-Za-z]+:\/\//.test(t)}function qie(t,e){return new Qu(t,e)}function mH(t,e){if(t instanceof gp){let n=t;if(n._bucket==null)throw rie();let r=new Qu(n,n._bucket);return e!=null?mH(r,e):r}else return e!==void 0?zie(t,e):t}function Gie(t,e){if(e&&Wie(e)){if(t instanceof gp)return qie(t,e);throw YA("To use ref(service, url), the first argument must be a Storage instance.")}else return mH(t,e)}function eH(t,e){let n=e?.[iH];return n==null?null:fi.makeFromBucketSpec(n,t)}function Kie(t,e,n,r={}){t.host=`${e}:${n}`;let i=ri(e);i&&(zl(`https://${t.host}/b`),Wl("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";let{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Ny(s,t.app.options.projectId))}var gp=class{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=rH,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=qre,this._maxUploadRetryTime=Gre,this._requests=new Set,i!=null?this._bucket=fi.makeFromBucketSpec(i,this._host):this._bucket=eH(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=fi.makeFromBucketSpec(this._url,e):this._bucket=eH(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){XU("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){XU("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qu(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new QA(sH());{let o=yie(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){let[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}},tH="@firebase/storage",nH="0.13.14";var yH="storage";function _H(t,e,n){return t=ot(t),Hie(t,e,n)}function vH(t){return t=ot(t),$ie(t)}function bH(t,e){return t=ot(t),Gie(t,e)}function EH(t=Li(),e){t=ot(t);let r=Fi(t,yH).getImmediate({identifier:e}),i=My("storage");return i&&wH(r,...i),r}function wH(t,e,n,r={}){Kie(t,e,n,r)}function Yie(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new gp(n,r,i,e,mr)}function Qie(){Mn(new Jt(yH,Yie,"PUBLIC").setMultipleInstances(!0)),ze(tH,nH,""),ze(tH,nH,"esm2017")}Qie();var Ys=class{constructor(e){return e}},IH="storage",ix=class{constructor(){return Ro(IH)}};var sx=new te("angularfire2.storage-instances");function Zie(t,e){let n=nc(IH,t,e);return n&&new Ys(n)}function Xie(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ys(r)}}var Jie={provide:ix,deps:[[new Qt,sx]]},ese={provide:Ys,useFactory:Zie,deps:[[new Qt,sx],ii]};function TH(t,...e){return ze("angularfire",Vi.full,"gcs"),lr([ese,Jie,{provide:sx,useFactory:Xie(t),multi:!0,deps:[Le,ft,ji,Ss,[new Qt,ac],[new Qt,No],...e]}])}var ib=at(vH,!0);var DH=at(EH,!0);var sb=at(bH,!0,2);var ob=at(_H,!0);var ab=class t{constructor(e,n,r){this.firestore=e;this.storage=n;this.auth=r}async getTransactions(){let e=Hs(di(this.firestore,"transactions"),wc("createdAt","desc"));return(await Us(e)).docs.map(r=>H({id:r.id},r.data()))}async addTransaction(e,n){let r=null;if(n){let s=sb(this.storage,`transaction-images/${Date.now()}_${n.name}`),o=await ob(s,n);r=await ib(o.ref)}let i=this.auth.currentUser;await lv(di(this.firestore,"transactions"),be(H({},e),{imageUrl:r,createdBy:i?.uid,createdByName:i?.displayName||i?.email,createdAt:js()}))}async deleteTransaction(e){await Bs(tn(this.firestore,"transactions",e))}async clearAllTransactions(e){let n=e.map(r=>Bs(tn(this.firestore,"transactions",r.id)));await Promise.all(n)}async getMembers(){let e=Hs(di(this.firestore,"users"),wc("displayName"));return(await Us(e)).docs.map(r=>H({id:r.id},r.data()))}async addMember(e,n){let r=e.replace(/[^a-zA-Z0-9]/g,"_"),i=this.auth.currentUser;await Au(tn(this.firestore,"users",r),{email:e,role:n,status:"invited",invitedBy:i?.uid,invitedAt:js(),displayName:e.split("@")[0]})}async updateMemberRole(e,n){let r=this.auth.currentUser;await uv(tn(this.firestore,"users",e),{role:n,updatedAt:js(),updatedBy:r?.uid})}async removeMember(e){await Bs(tn(this.firestore,"users",e))}static \u0275fac=function(n){return new(n||t)(ae(bn),ae(Ys),ae(en))};static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})};var nse=(t,e)=>({"bg-success":t,"bg-danger":e});function rse(t,e){if(t&1&&(bs(0),ne(1,"canvas",23),Es()),t&2){let n=Ve();$(),le("data",n.pieChartData)("type",n.pieChartType)}}function ise(t,e){if(t&1&&(bs(0),ne(1,"canvas",23),Es()),t&2){let n=Ve();$(),le("data",n.barChartData)("type",n.barChartType)}}function sse(t,e){t&1&&(A(0,"div",24),ne(1,"i",25),A(2,"p"),P(3,"Loading transactions..."),x()())}function ose(t,e){t&1&&(A(0,"div",24),ne(1,"i",26),A(2,"p"),P(3,"No transactions found"),x(),A(4,"a",27),P(5,"Add First Transaction"),x()())}function ase(t,e){if(t&1&&(A(0,"div",29)(1,"div",30)(2,"span",31),P(3),Dt(4,"titlecase"),x()(),A(5,"div",32)(6,"strong"),P(7),Dt(8,"number"),x()(),A(9,"div",33),P(10),x(),A(11,"div",34)(12,"small"),P(13),Dt(14,"date"),x()()()),t&2){let n=e.$implicit;$(2),le("ngClass",Xr(13,nse,n.type==="credit",n.type==="debit")),$(),tt(" ",Ci(4,5,n.type)," "),$(4),tt("\u20B9",An(8,7,n.amount,"1.2-2")),$(3),tt(" ",n.note||"No description"," "),$(3),Ar(An(14,10,n.createdAt.toDate(),"shortDate"))}}function cse(t,e){if(t&1&&(A(0,"div"),ut(1,ase,15,16,"div",28),x()),t&2){let n=Ve();$(),le("ngForOf",n.recentTransactions)}}var cb=class t{constructor(e,n,r,i,s,o){this.authService=e;this.dataService=n;this.auth=r;this.firestore=i;this.router=s;this.platformId=o;this.isBrowser=wl(this.platformId)}totalCredits=0;totalDebits=0;currentBalance=0;recentTransactions=[];isLoadingTransactions=!0;pieChartData={labels:["Credits","Debits"],datasets:[{data:[0,0],backgroundColor:["#28a745","#dc3545"],borderColor:"#fff",borderWidth:2}]};pieChartType="pie";barChartData={labels:[],datasets:[{data:[],label:"Credits",backgroundColor:"#28a745",borderColor:"#1e7e34",borderWidth:1},{data:[],label:"Debits",backgroundColor:"#dc3545",borderColor:"#c82333",borderWidth:1}]};barChartType="bar";isBrowser=!1;ngOnInit(){Ui(this.auth,e=>{e?this.loadDashboardData():this.router.navigate(["/login"])})}async loadDashboardData(){this.isLoadingTransactions=!0,this.totalCredits=0,this.totalDebits=0,this.currentBalance=0;try{let e=Hs(di(this.firestore,"transactions"),wc("createdAt","desc")),n=await Us(e),r=[],i={};n.forEach(s=>{let o=s.data(),a={id:s.id,amount:o.amount||0,type:o.type,note:o.note,imageUrl:o.imageUrl||void 0,createdBy:o.createdBy,createdByName:o.createdByName,createdAt:o.createdAt};r.push(a);let c=a.amount||0;a.type==="credit"?this.totalCredits+=c:this.totalDebits+=c;let l=a.createdAt?.toDate()||new Date,d=new Date(l).toLocaleDateString();i[d]||(i[d]={credits:0,debits:0}),a.type==="credit"?i[d].credits+=c:i[d].debits+=c}),this.currentBalance=this.totalCredits-this.totalDebits,this.recentTransactions=r.slice(0,5),this.updateCharts(i)}catch(e){console.error("Error loading dashboard data:",e)}finally{this.isLoadingTransactions=!1}}updateCharts(e){this.pieChartData.datasets[0].data=[this.totalCredits,this.totalDebits];let n=Object.keys(e).slice(-7),r=n.map(s=>e[s]?.credits||0),i=n.map(s=>e[s]?.debits||0);this.barChartData.labels=n,this.barChartData.datasets[0].data=r,this.barChartData.datasets[1].data=i}static \u0275fac=function(n){return new(n||t)(Z(Ru),Z(ab),Z(en),Z(bn),Z(Pt),Z(dr))};static \u0275cmp=Bn({type:t,selectors:[["app-dashboard"]],decls:64,vars:17,consts:[[1,"container","mt-4"],[1,"row","mb-4"],[1,"col-md-4","mb-3"],[1,"card","bg-success","text-white"],[1,"card-body"],[1,"d-flex","justify-content-between"],[1,"card-title"],[1,"mb-0"],[1,"align-self-center"],[1,"fas","fa-arrow-up","fa-2x"],[1,"card","bg-danger","text-white"],[1,"fas","fa-arrow-down","fa-2x"],[1,"card","bg-info","text-white"],[1,"fas","fa-balance-scale","fa-2x"],[1,"row"],[1,"col-lg-6","mb-4"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[4,"ngIf"],[1,"card-header","d-flex","justify-content-between","align-items-center"],["routerLink","/transactions",1,"btn","btn-primary","btn-sm"],["class","text-center text-muted",4,"ngIf"],["baseChart","",3,"data","type"],[1,"text-center","text-muted"],[1,"fas","fa-spinner","fa-spin","fa-2x","mb-3"],[1,"fas","fa-receipt","fa-2x","mb-3"],["routerLink","/transactions",1,"btn","btn-primary"],["class","row border-bottom py-2",4,"ngFor","ngForOf"],[1,"row","border-bottom","py-2"],[1,"col-md-2"],[1,"badge",3,"ngClass"],[1,"col-md-3"],[1,"col-md-4"],[1,"col-md-3","text-end","text-muted"]],template:function(n,r){n&1&&(ne(0,"app-navigation"),A(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div")(8,"h6",6),P(9,"Total Credits"),x(),A(10,"h3",7),P(11),Dt(12,"number"),x()(),A(13,"div",8),ne(14,"i",9),x()()()()(),A(15,"div",2)(16,"div",10)(17,"div",4)(18,"div",5)(19,"div")(20,"h6",6),P(21,"Total Debits"),x(),A(22,"h3",7),P(23),Dt(24,"number"),x()(),A(25,"div",8),ne(26,"i",11),x()()()()(),A(27,"div",2)(28,"div",12)(29,"div",4)(30,"div",5)(31,"div")(32,"h6",6),P(33,"Current Balance"),x(),A(34,"h3",7),P(35),Dt(36,"number"),x()(),A(37,"div",8),ne(38,"i",13),x()()()()()(),A(39,"div",14)(40,"div",15)(41,"div",16)(42,"div",17)(43,"h5",18),P(44,"Credits vs Debits"),x()(),A(45,"div",4),ut(46,rse,2,2,"ng-container",19),x()()(),A(47,"div",15)(48,"div",16)(49,"div",17)(50,"h5",18),P(51,"Daily Summary"),x()(),A(52,"div",4),ut(53,ise,2,2,"ng-container",19),x()()()(),A(54,"div",16)(55,"div",20)(56,"h5",18),P(57,"Recent Transactions"),x(),A(58,"a",21),P(59,"View All"),x()(),A(60,"div",4),ut(61,sse,4,0,"div",22)(62,ose,6,0,"div",22)(63,cse,2,1,"div",19),x()()()),n&2&&($(11),tt("\u20B9",An(12,8,r.totalCredits,"1.2-2")),$(12),tt("\u20B9",An(24,11,r.totalDebits,"1.2-2")),$(12),tt("\u20B9",An(36,14,r.currentBalance,"1.2-2")),$(11),le("ngIf",r.isBrowser),$(7),le("ngIf",r.isBrowser),$(8),le("ngIf",r.isLoadingTransactions),$(),le("ngIf",!r.isLoadingTransactions&&r.recentTransactions.length===0),$(),le("ngIf",!r.isLoadingTransactions&&r.recentTransactions.length>0))},dependencies:[Mr,Ba,bo,Ua,Bh,Co,QU,sa,gh,Ha,$a],encapsulation:2})};var ox=()=>["admin","editor"],lse=(t,e)=>({"fa-spinner fa-spin":t,"fa-save":e}),use=(t,e)=>({"bg-success":t,"bg-danger":e}),dse=(t,e)=>({"fa-arrow-up":t,"fa-arrow-down":e});function hse(t,e){if(t&1){let n=ws();A(0,"div",44)(1,"div",5)(2,"div",45)(3,"h5",7),ne(4,"i",46),P(5,"Add Transaction "),x()(),A(6,"div",15)(7,"form",47,0),qe("ngSubmit",function(){Vt(n);let i=BI(8),s=Ve();return jt(s.addTransaction(i))}),A(9,"div",48)(10,"label",49),P(11,"Type"),x(),A(12,"select",50),Hn("ngModelChange",function(i){Vt(n);let s=Ve();return Xn(s.newTransaction.type,i)||(s.newTransaction.type=i),jt(i)}),A(13,"option",11),P(14,"Select Type"),x(),A(15,"option",12),P(16,"Credit (Money In)"),x(),A(17,"option",13),P(18,"Debit (Money Out)"),x()()(),A(19,"div",48)(20,"label",51),P(21,"Amount (\u20B9)"),x(),A(22,"div",52)(23,"span",53),P(24,"\u20B9"),x(),A(25,"input",54),Hn("ngModelChange",function(i){Vt(n);let s=Ve();return Xn(s.newTransaction.amount,i)||(s.newTransaction.amount=i),jt(i)}),x()()(),A(26,"div",48)(27,"label",55),P(28,"Description"),x(),A(29,"textarea",56),Hn("ngModelChange",function(i){Vt(n);let s=Ve();return Xn(s.newTransaction.note,i)||(s.newTransaction.note=i),jt(i)}),x()(),A(30,"div",48)(31,"label",57),P(32," Receipt/Image "),A(33,"small",20),P(34,"(Optional)"),x()(),A(35,"input",58),qe("change",function(i){Vt(n);let s=Ve();return jt(s.onFileSelected(i))}),x()(),A(36,"div",59),ne(37,"img",60),A(38,"button",61),qe("click",function(){Vt(n);let i=Ve();return jt(i.removeImage())}),ne(39,"i",62),x()(),A(40,"button",63),ne(41,"i",64),P(42),x()()()()()}if(t&2){let n=Ve();$(12),Un("ngModel",n.newTransaction.type),$(13),Un("ngModel",n.newTransaction.amount),$(4),Un("ngModel",n.newTransaction.note),$(7),Im("display",n.imageUrl?"block":"none"),$(),le("src",n.imageUrl,ys),$(3),le("disabled",n.isAddingTransaction),$(),le("ngClass",Xr(9,lse,n.isAddingTransaction,!n.isAddingTransaction)),$(),tt(" ",n.isAddingTransaction?"Adding...":"Add Transaction"," ")}}function fse(t,e){if(t&1){let n=ws();A(0,"button",65),qe("click",function(){Vt(n);let i=Ve();return jt(i.clearAllTransactions())}),ne(1,"i",66),P(2,"Clear All "),x()}}function pse(t,e){t&1&&(A(0,"th"),P(1,"Actions"),x())}function gse(t,e){t&1&&(A(0,"tr")(1,"td",67),ne(2,"i",68),P(3,"Loading transactions... "),x()())}function mse(t,e){t&1&&(A(0,"tr")(1,"td",67),ne(2,"i",69),A(3,"p"),P(4,"No transactions found"),x()()())}function yse(t,e){if(t&1){let n=ws();A(0,"button",75),qe("click",function(){Vt(n);let i=Ve().$implicit,s=Ve(2);return jt(s.showImageModal(i.imageUrl))}),ne(1,"i",76),x()}}function _se(t,e){t&1&&(A(0,"span",20),P(1,"-"),x())}function vse(t,e){if(t&1){let n=ws();A(0,"td")(1,"button",77),qe("click",function(){Vt(n);let i=Ve().$implicit,s=Ve(2);return jt(s.confirmDelete(i))}),ne(2,"i",78),x()()}}function bse(t,e){if(t&1&&(A(0,"tr")(1,"td")(2,"span",71),ne(3,"i",64),P(4),Dt(5,"titlecase"),x()(),A(6,"td")(7,"strong"),P(8),Dt(9,"number"),x()(),A(10,"td")(11,"div",72),P(12),x()(),A(13,"td")(14,"small"),P(15),Dt(16,"date"),x()(),A(17,"td")(18,"small",20),P(19),x()(),A(20,"td"),ut(21,yse,2,0,"button",73)(22,_se,2,0,"span",74),x(),ut(23,vse,3,0,"td",27),x()),t&2){let n=e.$implicit,r=Ve(2);$(2),le("ngClass",Xr(19,use,n.type==="credit",n.type==="debit")),$(),le("ngClass",Xr(22,dse,n.type==="credit",n.type==="debit")),$(),tt(" ",Ci(5,11,n.type)," "),$(4),tt("\u20B9",An(9,13,n.amount,"1.2-2")),$(3),le("title",n.note),$(),tt(" ",n.note||"No description"," "),$(3),Ar(An(16,16,n.createdAt==null?null:n.createdAt.toDate(),"shortDate")),$(4),Ar(n.createdByName||"Unknown"),$(2),le("ngIf",n.imageUrl),$(),le("ngIf",!n.imageUrl),$(),le("ngIf",oh(25,ox).includes(r.userRole))}}function Ese(t,e){if(t&1&&(bs(0),ut(1,bse,24,26,"tr",70),Es()),t&2){let n=Ve();$(),le("ngForOf",n.filteredTransactions)}}function wse(t,e){if(t&1&&(A(0,"div",79)(1,"strong"),P(2,"Type:"),x(),P(3),Dt(4,"titlecase"),ne(5,"br"),A(6,"strong"),P(7,"Amount:"),x(),P(8),Dt(9,"number"),ne(10,"br"),A(11,"strong"),P(12,"Description:"),x(),P(13),x()),t&2){let n=Ve();$(3),tt(" ",Ci(4,3,n.transactionToDelete.type)),$(5),tt(" \u20B9",An(9,5,n.transactionToDelete.amount,"1.2-2")),$(5),tt(" ",n.transactionToDelete.note||"No description"," ")}}var lb=class t{constructor(e,n,r,i){this.auth=e;this.firestore=n;this.storage=r;this.router=i}userRole="viewer";allTransactions=[];filteredTransactions=[];isLoadingTransactions=!0;isAddingTransaction=!1;newTransaction={type:"",amount:0,note:""};imageFile=null;imageUrl=null;transactionToDelete=null;modalImageUrl=null;summaryCredits=0;summaryDebits=0;summaryBalance=0;filterType="";ngOnInit(){Ui(this.auth,async e=>{if(e){let n=await Go(tn(this.firestore,"users",e.uid));this.userRole=n.exists()&&n.data().role||"viewer",this.loadTransactions()}else this.router.navigate(["/login"])})}onFileSelected(e){let n=e.target.files[0];if(n){this.imageFile=n;let r=new FileReader;r.onload=i=>{this.imageUrl=i.target?.result},r.readAsDataURL(n)}}removeImage(){this.imageFile=null,this.imageUrl=null}async addTransaction(e){if(this.userRole==="viewer"){alert("You do not have permission to add transactions.");return}this.isAddingTransaction=!0;try{let n=null;if(this.imageFile){let i=sb(this.storage,`transaction-images/${Date.now()}_${this.imageFile.name}`),s=await ob(i,this.imageFile);n=await ib(s.ref)}let r={type:this.newTransaction.type,amount:this.newTransaction.amount,note:this.newTransaction.note,imageUrl:n,createdBy:this.auth.currentUser?.uid,createdByName:this.auth.currentUser?.displayName||this.auth.currentUser?.email,createdAt:js()};await lv(di(this.firestore,"transactions"),r),e.resetForm(),this.removeImage(),this.loadTransactions()}catch(n){console.error("Error adding transaction:",n)}finally{this.isAddingTransaction=!1}}async loadTransactions(){this.isLoadingTransactions=!0;try{let e=Hs(di(this.firestore,"transactions"),wc("createdAt","desc")),n=await Us(e);this.allTransactions=n.docs.map(r=>H({id:r.id},r.data())),this.filterTransactions(),this.updateSummary(this.allTransactions)}catch(e){console.error("Error loading transactions:",e)}finally{this.isLoadingTransactions=!1}}filterTransactions(){this.filterType?this.filteredTransactions=this.allTransactions.filter(e=>e.type===this.filterType):this.filteredTransactions=[...this.allTransactions],this.updateSummary(this.filteredTransactions)}updateSummary(e){this.summaryCredits=e.reduce((n,r)=>r.type==="credit"?n+(parseFloat(r.amount)||0):n,0),this.summaryDebits=e.reduce((n,r)=>r.type==="debit"?n+(parseFloat(r.amount)||0):n,0),this.summaryBalance=this.summaryCredits-this.summaryDebits}showImageModal(e){this.modalImageUrl=e}confirmDelete(e){this.transactionToDelete=e}async deleteTransaction(){if(this.transactionToDelete)try{await Bs(tn(this.firestore,"transactions",this.transactionToDelete.id)),this.loadTransactions()}catch(e){console.error("Error deleting transaction:",e)}}async clearAllTransactions(){if(this.userRole!=="admin"){alert("Only administrators can clear all transactions.");return}if(confirm("Are you sure you want to delete ALL transactions? This action cannot be undone."))try{let e=this.allTransactions.map(n=>Bs(tn(this.firestore,"transactions",n.id)));await Promise.all(e),this.loadTransactions()}catch(e){console.error("Error clearing transactions:",e)}}static \u0275fac=function(n){return new(n||t)(Z(en),Z(bn),Z(Ys),Z(Pt))};static \u0275cmp=Bn({type:t,selectors:[["app-transactions"]],decls:92,vars:23,consts:[["transactionForm","ngForm"],[1,"container","mt-4"],[1,"row"],["class","col-lg-4 mb-4",4,"ngIf"],[1,"col-lg-8"],[1,"card"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"card-title","mb-0"],[1,"fas","fa-list","me-2"],[1,"d-flex","gap-2"],["id","filterType",1,"form-select","form-select-sm",2,"width","auto",3,"ngModelChange","change","ngModel"],["value",""],["value","credit"],["value","debit"],["class","btn btn-outline-danger btn-sm",3,"click",4,"ngIf"],[1,"card-body"],[1,"row","mb-3"],[1,"col-md-4"],[1,"card","bg-light"],[1,"card-body","text-center","py-2"],[1,"text-muted"],[1,"h5","text-success","mb-0"],[1,"h5","text-danger","mb-0"],[1,"h5","text-info","mb-0"],[1,"table-responsive"],[1,"table","table-hover"],[1,"table-dark"],[4,"ngIf"],["id","imageModal","tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal",1,"btn-close"],[1,"modal-body","text-center"],["alt","Transaction Image",1,"img-fluid",3,"src"],["id","confirmDeleteModal","tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-body"],["class","border p-3 rounded",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fas","fa-trash","me-2"],[1,"col-lg-4","mb-4"],[1,"card-header"],[1,"fas","fa-plus","me-2"],[3,"ngSubmit"],[1,"mb-3"],["for","transactionType",1,"form-label"],["id","transactionType","name","type","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","transactionAmount",1,"form-label"],[1,"input-group"],[1,"input-group-text"],["type","number","id","transactionAmount","name","amount","min","0","step","0.01","placeholder","0.00","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","transactionNote",1,"form-label"],["id","transactionNote","name","note","rows","3","placeholder","Enter transaction details...","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","transactionImage",1,"form-label"],["type","file","id","transactionImage","accept","image/*",1,"form-control",3,"change"],["id","imagePreview",1,"mb-3"],["alt","Preview",1,"img-thumbnail",2,"max-height","150px",3,"src"],["type","button",1,"btn","btn-sm","btn-outline-danger","ms-2",3,"click"],[1,"fas","fa-times"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],[1,"fas",3,"ngClass"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"fas","fa-trash","me-1"],["colspan","7",1,"text-center","text-muted"],[1,"fas","fa-spinner","fa-spin","me-2"],[1,"fas","fa-receipt","fa-2x","mb-3"],[4,"ngFor","ngForOf"],[1,"badge",3,"ngClass"],[1,"text-truncate",2,"max-width","200px",3,"title"],["class","btn btn-sm btn-outline-primary",3,"click",4,"ngIf"],["class","text-muted",4,"ngIf"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"fas","fa-image"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"fas","fa-trash"],[1,"border","p-3","rounded"]],template:function(n,r){n&1&&(ne(0,"app-navigation"),A(1,"div",1)(2,"div",2),ut(3,hse,43,12,"div",3),A(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),ne(8,"i",8),P(9,"All Transactions "),x(),A(10,"div",9)(11,"select",10),Hn("ngModelChange",function(s){return Xn(r.filterType,s)||(r.filterType=s),s}),qe("change",function(){return r.filterTransactions()}),A(12,"option",11),P(13,"All Types"),x(),A(14,"option",12),P(15,"Credits Only"),x(),A(16,"option",13),P(17,"Debits Only"),x()(),ut(18,fse,3,0,"button",14),x()(),A(19,"div",15)(20,"div",16)(21,"div",17)(22,"div",18)(23,"div",19)(24,"small",20),P(25,"Credits"),x(),A(26,"div",21),P(27),Dt(28,"number"),x()()()(),A(29,"div",17)(30,"div",18)(31,"div",19)(32,"small",20),P(33,"Debits"),x(),A(34,"div",22),P(35),Dt(36,"number"),x()()()(),A(37,"div",17)(38,"div",18)(39,"div",19)(40,"small",20),P(41,"Balance"),x(),A(42,"div",23),P(43),Dt(44,"number"),x()()()()(),A(45,"div",24)(46,"table",25)(47,"thead",26)(48,"tr")(49,"th"),P(50,"Type"),x(),A(51,"th"),P(52,"Amount"),x(),A(53,"th"),P(54,"Description"),x(),A(55,"th"),P(56,"Date"),x(),A(57,"th"),P(58,"Added By"),x(),A(59,"th"),P(60,"Image"),x(),ut(61,pse,2,0,"th",27),x()(),A(62,"tbody"),ut(63,gse,4,0,"tr",27)(64,mse,5,0,"tr",27)(65,Ese,2,1,"ng-container",27),x()()()()()()()(),A(66,"div",28)(67,"div",29)(68,"div",30)(69,"div",31)(70,"h5",32),P(71,"Transaction Image"),x(),ne(72,"button",33),x(),A(73,"div",34),ne(74,"img",35),x()()()(),A(75,"div",36)(76,"div",37)(77,"div",30)(78,"div",31)(79,"h5",32),P(80,"Confirm Delete"),x(),ne(81,"button",33),x(),A(82,"div",38)(83,"p"),P(84,"Are you sure you want to delete this transaction?"),x(),ut(85,wse,14,8,"div",39),x(),A(86,"div",40)(87,"button",41),P(88,"Cancel"),x(),A(89,"button",42),qe("click",function(){return r.deleteTransaction()}),ne(90,"i",43),P(91,"Delete "),x()()()()()),n&2&&($(3),le("ngIf",oh(21,ox).includes(r.userRole)),$(8),Un("ngModel",r.filterType),$(7),le("ngIf",r.userRole==="admin"),$(9),tt("\u20B9",An(28,12,r.summaryCredits,"1.2-2")),$(8),tt("\u20B9",An(36,15,r.summaryDebits,"1.2-2")),$(8),tt("\u20B9",An(44,18,r.summaryBalance,"1.2-2")),$(18),le("ngIf",oh(22,ox).includes(r.userRole)),$(2),le("ngIf",r.isLoadingTransactions),$(),le("ngIf",!r.isLoadingTransactions&&r.filteredTransactions.length===0),$(),le("ngIf",!r.isLoadingTransactions),$(9),le("src",r.modalImageUrl,ys),$(11),le("ngIf",r.transactionToDelete))},dependencies:[Mr,Ba,bo,Ua,$l,Ul,Sy,Ay,Ao,oT,Hl,jl,Bl,Xa,aT,Za,Qa,sa,gh,Ha,$a],encapsulation:2})};var Ise=(t,e)=>({"fa-spinner fa-spin":t,"fa-save":e}),Tse=(t,e)=>({"fa-spinner fa-spin":t,"fa-user-times":e}),Dse=(t,e)=>({"fa-spinner fa-spin":t,"fa-user-plus":e});function Cse(t,e){t&1&&(A(0,"div")(1,"div",27)(2,"div",28)(3,"div",29)(4,"div",30),ne(5,"i",31),A(6,"h3"),P(7,"Access Denied"),x(),A(8,"p",32),P(9,"Only administrators can access the members page."),x(),A(10,"a",33),ne(11,"i",34),P(12,"Back to Dashboard "),x()()()()()())}function Sse(t,e){t&1&&(A(0,"tr")(1,"td",68),ne(2,"i",69),P(3,"Loading members... "),x()())}function Ase(t,e){t&1&&(A(0,"tr")(1,"td",68),ne(2,"i",70),A(3,"p"),P(4,"No members found"),x()()())}function xse(t,e){if(t&1&&ne(0,"img",80),t&2){let n=Ve().$implicit;le("src",n.photoURL,ys)}}function Rse(t,e){t&1&&(A(0,"div",81),ne(1,"i",82),x())}function Mse(t,e){t&1&&(A(0,"small",83),P(1,"You"),x())}function Nse(t,e){if(t&1){let n=ws();A(0,"div",84)(1,"button",85),qe("click",function(){Vt(n);let i=Ve().$implicit,s=Ve(3);return jt(s.showChangeRoleModal(i))}),ne(2,"i",86),x(),A(3,"button",87),qe("click",function(){Vt(n);let i=Ve().$implicit,s=Ve(3);return jt(s.showRemoveMemberModal(i))}),ne(4,"i",88),x()()}}function kse(t,e){t&1&&(A(0,"span",32),P(1,"-"),x())}function Pse(t,e){if(t&1&&(A(0,"tr")(1,"td")(2,"div",72),ut(3,xse,1,1,"img",73)(4,Rse,2,0,"div",74),A(5,"div")(6,"div",75),P(7),x(),ut(8,Mse,2,0,"small",76),x()()(),A(9,"td")(10,"small",32),P(11),x()(),A(12,"td")(13,"span",77),ne(14,"i",21),P(15),Dt(16,"titlecase"),x()(),A(17,"td")(18,"span",77),P(19),Dt(20,"titlecase"),x()(),A(21,"td")(22,"small",32),P(23),Dt(24,"date"),x()(),A(25,"td"),ut(26,Nse,5,0,"div",78)(27,kse,2,0,"span",79),x()()),t&2){let n=e.$implicit,r=Ve(3);$(3),le("ngIf",n.photoURL),$(),le("ngIf",!n.photoURL),$(3),Ar(n.displayName||(n.email==null?null:n.email.split("@")[0])||"Unknown"),$(),le("ngIf",n.id===r.currentUserId),$(3),Ar(n.email||"No email"),$(2),le("ngClass",r.getRoleBadgeClass(n.role)),$(),le("ngClass",r.getRoleIcon(n.role)),$(),tt(" ",Ci(16,13,n.role)," "),$(3),le("ngClass",r.getStatusBadgeClass(n.status)),$(),tt(" ",Ci(20,15,n.status)," "),$(4),tt(" ",An(24,17,n.invitedAt==null?null:n.invitedAt.toDate(),"shortDate")," "),$(3),le("ngIf",n.id!==r.currentUserId),$(),le("ngIf",n.id===r.currentUserId)}}function Ose(t,e){if(t&1&&(bs(0),ut(1,Pse,28,20,"tr",71),Es()),t&2){let n=Ve(2);$(),le("ngForOf",n.filteredMembers)}}function Fse(t,e){if(t&1){let n=ws();A(0,"div",35)(1,"div",36)(2,"div",37)(3,"div",38)(4,"h5",39),ne(5,"i",40),P(6,"Add Member "),x()(),A(7,"div",41)(8,"form",42,0),qe("ngSubmit",function(){Vt(n);let i=Ve();return jt(i.addMember())}),A(10,"div",12)(11,"label",43),P(12,"Email Address"),x(),A(13,"input",44),Hn("ngModelChange",function(i){Vt(n);let s=Ve();return Xn(s.newMember.email,i)||(s.newMember.email=i),jt(i)}),x(),A(14,"div",45),P(15,"User must sign in with Google first"),x()(),A(16,"div",12)(17,"label",46),P(18,"Role"),x(),A(19,"select",47),Hn("ngModelChange",function(i){Vt(n);let s=Ve();return Xn(s.newMember.role,i)||(s.newMember.role=i),jt(i)}),A(20,"option",48),P(21,"Select Role"),x(),A(22,"option",15),P(23,"Viewer - Can only view transactions"),x(),A(24,"option",16),P(25,"Editor - Can add/edit/delete transactions"),x(),A(26,"option",17),P(27,"Admin - Full access including members"),x()()(),A(28,"button",49),ne(29,"i",21),P(30),x()()()(),A(31,"div",50)(32,"div",38)(33,"h6",39),ne(34,"i",51),P(35,"Role Permissions "),x()(),A(36,"div",41)(37,"div",12)(38,"h6",52),ne(39,"i",53),P(40,"Viewer "),x(),A(41,"ul",54),P(42," [cite_start]"),A(43,"li"),P(44,"View transactions only [cite: 1]"),x(),P(45," [cite_start]"),A(46,"li"),P(47,"Access dashboard [cite: 1]"),x(),P(48," [cite_start]"),A(49,"li"),P(50,"No editing permissions [cite: 1]"),x()()(),A(51,"div",12)(52,"h6",55),ne(53,"i",56),P(54,"Editor "),x(),A(55,"ul",54),P(56," [cite_start]"),A(57,"li"),P(58,"Add/edit/delete transactions only [cite: 1]"),x(),P(59," [cite_start]"),A(60,"li"),P(61,"View dashboard & reports [cite: 1, 23]"),x(),P(62," [cite_start]"),A(63,"li"),P(64,"Cannot manage members [cite: 1]"),x()()(),A(65,"div",57)(66,"h6",58),ne(67,"i",59),P(68,"Admin "),x(),A(69,"ul",54),P(70," [cite_start]"),A(71,"li"),P(72,"Full access, including member management [cite: 1]"),x(),P(73," [cite_start]"),A(74,"li"),P(75,"Clear all transactions [cite: 1]"),x(),P(76," [cite_start]"),A(77,"li"),P(78,"System administration [cite: 1]"),x()()()()()(),A(79,"div",60)(80,"div",37)(81,"div",61)(82,"h5",39),ne(83,"i",62),P(84,"All Members "),x(),A(85,"div",63)(86,"select",64),Hn("ngModelChange",function(i){Vt(n);let s=Ve();return Xn(s.filterRole,i)||(s.filterRole=i),jt(i)}),qe("change",function(){Vt(n);let i=Ve();return jt(i.filterMembers())}),A(87,"option",48),P(88,"All Roles"),x(),A(89,"option",17),P(90,"Admins"),x(),A(91,"option",16),P(92,"Editors"),x(),A(93,"option",15),P(94,"Viewers"),x()()()(),A(95,"div",41)(96,"div",65)(97,"table",66)(98,"thead",67)(99,"tr")(100,"th"),P(101,"User"),x(),A(102,"th"),P(103,"Email"),x(),A(104,"th"),P(105,"Role"),x(),A(106,"th"),P(107,"Status"),x(),A(108,"th"),P(109,"Joined"),x(),A(110,"th"),P(111,"Actions"),x()()(),A(112,"tbody"),ut(113,Sse,4,0,"tr",2)(114,Ase,5,0,"tr",2)(115,Ose,2,1,"ng-container",2),x()()()()()()()}if(t&2){let n=Ve();$(13),Un("ngModel",n.newMember.email),$(6),Un("ngModel",n.newMember.role),$(9),le("disabled",n.isAddingMember),$(),le("ngClass",Xr(9,Dse,n.isAddingMember,!n.isAddingMember)),$(),tt(" ",n.isAddingMember?"Adding...":"Add Member"," "),$(56),Un("ngModel",n.filterRole),$(27),le("ngIf",n.isLoadingMembers),$(),le("ngIf",!n.isLoadingMembers&&n.filteredMembers.length===0),$(),le("ngIf",!n.isLoadingMembers)}}function Lse(t,e){if(t&1&&(A(0,"div",12)(1,"div",89)(2,"strong"),P(3,"User:"),x(),P(4),ne(5,"br"),A(6,"strong"),P(7,"Current Role:"),x(),P(8),Dt(9,"titlecase"),x()()),t&2){let n=Ve();$(4),tt(" ",n.memberToUpdate.displayName||n.memberToUpdate.email),$(4),tt(" ",Ci(9,2,n.memberToUpdate.role)," ")}}function Vse(t,e){if(t&1&&(A(0,"div",89)(1,"strong"),P(2,"User:"),x(),P(3),x()),t&2){let n=Ve();$(3),tt(" ",n.memberToRemove.displayName||n.memberToRemove.email," ")}}var ub=class t{constructor(e,n,r){this.auth=e;this.firestore=n;this.router=r}userRole="viewer";currentUserId=null;isLoadingMembers=!0;isAddingMember=!1;isUpdatingRole=!1;isRemovingMember=!1;allMembers=[];filteredMembers=[];filterRole="";newMember={email:"",role:""};memberToUpdate=null;newRole="";memberToRemove=null;ngOnInit(){Ui(this.auth,async e=>{if(e){this.currentUserId=e.uid;let n=await Go(tn(this.firestore,"users",e.uid));this.userRole=n.exists()&&n.data().role||"viewer",this.userRole==="admin"?this.loadMembers():this.isLoadingMembers=!1}else this.router.navigate(["/login"])})}async addMember(){this.isAddingMember=!0;try{if(this.allMembers.find(r=>r.email===this.newMember.email)){alert("User is already a member!");return}let n=this.newMember.email.replace(/[^a-zA-Z0-9]/g,"_");await Au(tn(this.firestore,"users",n),{email:this.newMember.email,role:this.newMember.role,status:"invited",invitedBy:this.currentUserId,invitedAt:js(),displayName:this.newMember.email.split("@")[0]}),this.newMember.email="",this.newMember.role="",this.loadMembers()}catch(e){console.error("Error adding member:",e)}finally{this.isAddingMember=!1}}async loadMembers(){this.isLoadingMembers=!0;try{let e=Hs(di(this.firestore,"users")),n=await Us(e);this.allMembers=n.docs.map(r=>H({id:r.id},r.data())),this.filterMembers()}catch(e){console.error("Error loading members:",e)}finally{this.isLoadingMembers=!1}}filterMembers(){this.filterRole?this.filteredMembers=this.allMembers.filter(e=>e.role===this.filterRole):this.filteredMembers=[...this.allMembers]}showChangeRoleModal(e){this.memberToUpdate=e,this.newRole=e.role}async updateMemberRole(){if(this.memberToUpdate){this.isUpdatingRole=!0;try{await uv(tn(this.firestore,"users",this.memberToUpdate.id),{role:this.newRole,updatedAt:js(),updatedBy:this.currentUserId}),this.loadMembers()}catch(e){console.error("Error updating role:",e)}finally{this.isUpdatingRole=!1}}}showRemoveMemberModal(e){this.memberToRemove=e}async removeMember(){if(this.memberToRemove){this.isRemovingMember=!0;try{await Bs(tn(this.firestore,"users",this.memberToRemove.id)),this.loadMembers()}catch(e){console.error("Error removing member:",e)}finally{this.isRemovingMember=!1}}}getRoleBadgeClass(e){switch(e){case"admin":return"bg-danger";case"editor":return"bg-warning";case"viewer":return"bg-success";default:return"bg-secondary"}}getRoleIcon(e){switch(e){case"admin":return"fa-crown";case"editor":return"fa-edit";case"viewer":return"fa-eye";default:return"fa-user"}}getStatusBadgeClass(e){switch(e){case"active":return"bg-success";case"invited":return"bg-warning";default:return"bg-secondary"}}static \u0275fac=function(n){return new(n||t)(Z(en),Z(bn),Z(Pt))};static \u0275cmp=Bn({type:t,selectors:[["app-members"]],decls:49,vars:15,consts:[["memberForm","ngForm"],[1,"container","mt-4"],[4,"ngIf"],["class","row",4,"ngIf"],["id","changeRoleModal","tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal",1,"btn-close"],[1,"modal-body"],["class","mb-3",4,"ngIf"],[1,"mb-3"],["for","newRole",1,"form-label"],["id","newRole",1,"form-select",3,"ngModelChange","ngModel"],["value","viewer"],["value","editor"],["value","admin"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"fas",3,"ngClass"],["id","removeMemberModal","tabindex","-1",1,"modal","fade"],["class","border p-3 rounded",4,"ngIf"],[1,"alert","alert-warning","mt-3"],[1,"fas","fa-exclamation-triangle","me-2"],["type","button",1,"btn","btn-danger",3,"click","disabled"],[1,"row","justify-content-center"],[1,"col-md-6"],[1,"card","border-danger"],[1,"card-body","text-center"],[1,"fas","fa-lock","fa-4x","text-danger","mb-3"],[1,"text-muted"],["routerLink","/dashboard",1,"btn","btn-primary"],[1,"fas","fa-home","me-2"],[1,"row"],[1,"col-lg-4","mb-4"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"fas","fa-user-plus","me-2"],[1,"card-body"],[3,"ngSubmit"],["for","memberEmail",1,"form-label"],["type","email","id","memberEmail","placeholder","user@example.com","name","email","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-text"],["for","memberRole",1,"form-label"],["id","memberRole","name","role","required","",1,"form-select",3,"ngModelChange","ngModel"],["value",""],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],[1,"card","mt-4"],[1,"fas","fa-info-circle","me-2"],[1,"text-success"],[1,"fas","fa-eye","me-2"],[1,"small","text-muted","mb-0"],[1,"text-warning"],[1,"fas","fa-edit","me-2"],[1,"mb-0"],[1,"text-danger"],[1,"fas","fa-crown","me-2"],[1,"col-lg-8"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"fas","fa-users","me-2"],[1,"d-flex","gap-2"],[1,"form-select","form-select-sm",2,"width","auto",3,"ngModelChange","change","ngModel"],[1,"table-responsive"],[1,"table","table-hover"],[1,"table-dark"],["colspan","6",1,"text-center","text-muted"],[1,"fas","fa-spinner","fa-spin","me-2"],[1,"fas","fa-users","fa-2x","mb-3"],[4,"ngFor","ngForOf"],[1,"d-flex","align-items-center"],["alt","User","class","rounded-circle me-2","width","32","height","32",3,"src",4,"ngIf"],["class","bg-secondary rounded-circle d-flex align-items-center justify-content-center me-2","style","width: 32px; height: 32px;",4,"ngIf"],[1,"fw-bold"],["class","text-primary",4,"ngIf"],[1,"badge",3,"ngClass"],["class","btn-group","role","group",4,"ngIf"],["class","text-muted",4,"ngIf"],["alt","User","width","32","height","32",1,"rounded-circle","me-2",3,"src"],[1,"bg-secondary","rounded-circle","d-flex","align-items-center","justify-content-center","me-2",2,"width","32px","height","32px"],[1,"fas","fa-user","text-white"],[1,"text-primary"],["role","group",1,"btn-group"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"fas","fa-trash"],[1,"border","p-3","rounded"]],template:function(n,r){n&1&&(ne(0,"app-navigation"),A(1,"div",1),ut(2,Cse,13,0,"div",2)(3,Fse,116,12,"div",3),x(),A(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h5",8),P(9,"Change User Role"),x(),ne(10,"button",9),x(),A(11,"div",10),ut(12,Lse,10,4,"div",11),A(13,"div",12)(14,"label",13),P(15,"New Role"),x(),A(16,"select",14),Hn("ngModelChange",function(s){return Xn(r.newRole,s)||(r.newRole=s),s}),A(17,"option",15),P(18,"Viewer"),x(),A(19,"option",16),P(20,"Editor"),x(),A(21,"option",17),P(22,"Admin"),x()()()(),A(23,"div",18)(24,"button",19),P(25,"Cancel"),x(),A(26,"button",20),qe("click",function(){return r.updateMemberRole()}),ne(27,"i",21),P(28," Update Role "),x()()()()(),A(29,"div",22)(30,"div",5)(31,"div",6)(32,"div",7)(33,"h5",8),P(34,"Remove Member"),x(),ne(35,"button",9),x(),A(36,"div",10)(37,"p"),P(38,"Are you sure you want to remove this member?"),x(),ut(39,Vse,4,1,"div",23),A(40,"div",24),ne(41,"i",25),P(42," This action cannot be undone. The user will lose access to the system. "),x()(),A(43,"div",18)(44,"button",19),P(45,"Cancel"),x(),A(46,"button",26),qe("click",function(){return r.removeMember()}),ne(47,"i",21),P(48," Remove Member "),x()()()()()),n&2&&($(2),le("ngIf",r.userRole!=="admin"),$(),le("ngIf",r.userRole==="admin"),$(9),le("ngIf",r.memberToUpdate),$(4),Un("ngModel",r.newRole),$(10),le("disabled",r.isUpdatingRole),$(),le("ngClass",Xr(9,Ise,r.isUpdatingRole,!r.isUpdatingRole)),$(12),le("ngIf",r.memberToRemove),$(7),le("disabled",r.isRemovingMember),$(),le("ngClass",Xr(12,Tse,r.isRemovingMember,!r.isRemovingMember)))},dependencies:[Mr,Ba,bo,Ua,$l,Ul,Sy,Ay,Ao,Hl,jl,Bl,Xa,Za,Qa,sa,Ha,$a],encapsulation:2})};var SH=[{path:"login",component:dv},{path:"",redirectTo:"login",pathMatch:"full"},{path:"dashboard",component:cb},{path:"transactions",component:lb},{path:"members",component:ub},{path:"**",redirectTo:"login"}];var ax=class{constructor(e,n){this._delegate=e,this.firebase=n,Zl(e,new Jt("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),sf(this._delegate)))}_getService(e,n=Oi){var r;this._delegate.checkDestroyed();let i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Oi){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Zl(this._delegate,e)}_addOrOverwriteComponent(e){RT(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}};var jse={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},AH=new tr("app-compat","Firebase",jse);function Bse(t){let e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:ze,setLogLevel:Vy,onLog:Ly,apps:null,SDK_VERSION:mr,INTERNAL:{registerComponent:a,removeApp:r,useAsService:c,modularAPIs:MT}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(l){delete e[l]}function i(l){if(l=l||Oi,!mT(e,l))throw AH.create("no-app",{appName:l});return e[l]}i.App=t;function s(l,d={}){let h=Xl(l,d);if(mT(e,h.name))return e[h.name];let p=new t(h,n);return e[h.name]=p,p}function o(){return Object.keys(e).map(l=>e[l])}function a(l){let d=l.name,h=d.replace("-compat","");if(Mn(l)&&l.type==="PUBLIC"){let p=(g=i())=>{if(typeof g[h]!="function")throw AH.create("invalid-app-argument",{appName:d});return g[h]()};l.serviceProps!==void 0&&Xh(p,l.serviceProps),n[h]=p,t.prototype[h]=function(...g){return this._getService.bind(this,d).apply(this,l.multipleInstances?g:[])}}return l.type==="PUBLIC"?n[h]:null}function c(l,d){return d==="serverAuth"?null:d}return n}function RH(){let t=Bse(ax);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:RH,extendNamespace:e,createSubscribe:ky,ErrorFactory:tr,deepExtend:Xh});function e(n){Xh(t,n)}return t}var Use=RH();var xH=new Nr("@firebase/app-compat"),Hse="@firebase/app-compat",$se="0.4.2";function zse(t){ze(Hse,$se,t)}try{let t=Jh();if(t.firebase!==void 0){xH.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);let e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&xH.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}var db=Use;zse();var Wse="firebase",qse="11.10.0";db.registerVersion(Wse,qse,"app-compat");var MH=new te("angularfire2.app.options");var rke=typeof module<"u"&&!!module.hot;globalThis.\u0275AngularfireInstanceCache||=[];var cx={production:!1,firebaseConfig:{apiKey:"AIzaSyDROZ6i2StEEv2zV7ed3DFfiyZnI7kTFVA",authDomain:"festival-ledger.firebaseapp.com",projectId:"festival-ledger",storageBucket:"festival-ledger.firebasestorage.app",messagingSenderId:"1006141649883",appId:"1:1006141649883:web:8aa63659bccdfd34fdadfe"}};var NH={providers:[Z0(SH),ZO(()=>XO(cx.firebaseConfig)),nL(()=>rL()),B2(()=>U2()),TH(()=>DH()),{provide:MH,useValue:cx.firebaseConfig}]};var hb=class t{title="festival-ledger-app";static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Bn({type:t,selectors:[["app-root"]],decls:4,vars:0,consts:[["lang","en"]],template:function(n,r){n&1&&(A(0,"html",0),ne(1,"head"),A(2,"body"),ne(3,"router-outlet"),x()())},dependencies:[Oh],encapsulation:2})};w0(hb,NH).catch(t=>console.error(t));
